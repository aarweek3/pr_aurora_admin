Я реализовал поддержку входа и регистрации через Google на стороне фронтенда.

Выполненные изменения:

LoginComponent
:
Добавлена кнопка "Войти через Google" с иконкой.
Реализован метод
loginWithGoogle()
, который перенаправляет пользователя на бэкенд (/api/Auth/external/login/Google).
AuthService
:
Добавлен метод
setSession(accessToken, refreshToken)
. Он пытается установить куки (на случай, если бэкенд отправил токены в URL, но не установил HttpOnly куки) и сразу проверяет сессию вызовом
getProfile()
, обновляя состояние пользователя.
ExternalLoginCallbackComponent
:
Создан новый компонент для обработки возврата после авторизации (/auth/external-callback).
Он ловит токены из URL (если бэкенд их передает) и передает их в
AuthService
.
При успешной проверке перенаправляет на главную страницу.
app.routes.ts
/
auth.routes.ts
:
Зарегистрирован маршрут для колбэка.
ApiEndpoints
:
Добавлен эндпоинт
EXTERNAL_LOGIN
.
Как это работает:

Пользователь жмет "Войти через Google".
Приложение перекидывает его на Ваш API.
API отправляет его в Google -> Пользователь подтверждает.
Google возвращает на API -> API создает/находит пользователя -> Генерирует токены.
API редиректит обратно на /auth/external-callback с токенами.
Angular подхватывает токены, проверяет и пускает юзера.
Теперь фронтенд полностью готов к работе с OAuth. Убедитесь, что ваш ExternalAuthController на бэкенде настроен на редирект по адресу: http://localhost:4200/auth/external-callback (или ваш актуальный домен).

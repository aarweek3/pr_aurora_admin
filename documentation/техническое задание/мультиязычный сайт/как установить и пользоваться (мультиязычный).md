# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ @aurora/i18n –≤ –ª—é–±–æ–π Angular –ø—Ä–æ–µ–∫—Ç

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–ø–æ–¥—Ä–æ–±–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–ª—è-—Ä–∞–∑–Ω—ã—Ö-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–≤-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö)
5. [–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏](#–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
6. [–ú–∏–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫](#–º–∏–≥—Ä–∞—Ü–∏—è-—Å-–¥—Ä—É–≥–∏—Ö-–±–∏–±–ª–∏–æ—Ç–µ–∫)
7. [Troubleshooting](#troubleshooting)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install @aurora/i18n
# –∏–ª–∏
yarn add @aurora/i18n
# –∏–ª–∏
pnpm add @aurora/i18n
```

### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```bash
npx aurora-i18n init
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç:

- `src/assets/i18n/en.json` - –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- `src/assets/i18n/de.json` - –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã –Ω–∞ –Ω–µ–º–µ—Ü–∫–æ–º
- `i18n.example.ts` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ main.ts

```typescript
// src/main.ts
import { bootstrapApplication } from "@angular/platform-browser";
import { provideAuroraI18n } from "@aurora/i18n";
import { AppComponent } from "./app/app.component";

bootstrapApplication(AppComponent, {
  providers: [
    // –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã i18n
    ...provideAuroraI18n({
      localhost: "en", // –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
      "mysite.com": "en", // –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è
      "mysite.de": "de", // –ù–µ–º–µ—Ü–∫–∞—è –≤–µ—Ä—Å–∏—è
    }),
    // –í–∞—à–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã...
  ],
});
```

### –®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

```typescript
// src/app/app.component.ts
import { Component } from "@angular/core";
import { TranslationPipe } from "@aurora/i18n";

@Component({
  selector: "app-root",
  standalone: true,
  imports: [TranslationPipe],
  template: `
    <h1>{{ "HEADER.TITLE" | t }}</h1>
    <p>{{ "COMMON.LOADING" | t }}</p>
  `,
})
export class AppComponent {}
```

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à —Å–∞–π—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å.

---

## üìñ –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –î–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å NgModule (Angular 16 –∏ —Å—Ç–∞—Ä—à–µ)

–ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `NgModule` –≤–º–µ—Å—Ç–æ standalone –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```typescript
// src/main.ts (NgModule –ø—Ä–æ–µ–∫—Ç—ã)
import { platformBrowserDynamic } from "@angular/platform-browser-dynamic";
import { AppModule } from "./app/app.module";

platformBrowserDynamic().bootstrapModule(AppModule);

// src/app/app.module.ts
import { NgModule } from "@angular/core";
import { BrowserModule } from "@angular/platform-browser";
import { HttpClientModule } from "@angular/common/http";
import { provideAuroraI18n } from "@aurora/i18n";

@NgModule({
  imports: [BrowserModule, HttpClientModule],
  declarations: [AppComponent],
  providers: [
    // –î–æ–±–∞–≤–∏—Ç—å i18n –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
    ...provideAuroraI18n({
      localhost: "en",
      "mysite.com": "en",
      "mysite.de": "de",
    }),
  ],
  bootstrap: [AppComponent],
})
export class AppModule {}
```

### –î–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å Angular Universal (SSR)

```typescript
// src/main.ts - –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ
import { bootstrapApplication } from "@angular/platform-browser";
import { provideAuroraI18n } from "@aurora/i18n";

bootstrapApplication(AppComponent, {
  providers: [
    provideAuroraI18n({
      "mysite.com": "en",
      "mysite.de": "de",
    }),
    // –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã...
  ],
});

// src/main.server.ts - —Ç–æ–∂–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–µ–º –∂–µ
import { bootstrapApplication } from "@angular/platform-browser";

// @aurora/i18n –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ SSR-safe!
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å—Ç–æ–π —Å–∞–π—Ç (2-3 —è–∑—ã–∫–∞)

```typescript
// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
provideAuroraI18n({
  "mysite.com": "en",
  "mysite.de": "de",
  "mysite.fr": "fr",
});
```

**–§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤:**

```
src/assets/i18n/
‚îú‚îÄ‚îÄ en.json
‚îú‚îÄ‚îÄ de.json
‚îî‚îÄ‚îÄ fr.json
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ + Staging + Production

```typescript
provideAuroraI18n(
  {
    // Development
    localhost: "en",
    "localhost:4200": "en",
    "dev.mysite.com": "en",

    // Staging
    "staging.mysite.com": "en",
    "staging.mysite.de": "de",

    // Production
    "mysite.com": "en",
    "mysite.de": "de",
    "mysite.fr": "fr",
  },
  {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
    translationsPath: "/assets/i18n",
    fallbackLanguage: "en",
    enableLanguageMeta: true,
  }
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–¥–¥–æ–º–µ–Ω—ã –∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—É—Ç–∏

```typescript
provideAuroraI18n(
  {
    // –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∞–π—Ç—ã
    "company.com": "en",
    "company.de": "de",

    // –ü–æ–¥–¥–æ–º–µ–Ω—ã
    "blog.company.com": "en",
    "blog.company.de": "de",

    // –°–µ—Ä–≤–∏—Å—ã
    "app.company.com": "en",
    "app.company.de": "de",
  },
  {
    translationsPath: "/locales", // –ö–∞—Å—Ç–æ–º–Ω–∞—è –ø–∞–ø–∫–∞
    fallbackLanguage: "en",
  }
);
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: Enterprise —Å API –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

```typescript
// –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ —Å API
class ApiTranslationLoader implements TranslationLoader {
  constructor(private http: HttpClient) {}

  async load(lang: string): Promise<Translations> {
    return await firstValueFrom(this.http.get<Translations>(`/api/translations/${lang}`));
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
provideAuroraI18nAdvanced({
  domainMap: {
    "enterprise.com": "en",
    "enterprise.de": "de",
  },
  translationLoader: new ApiTranslationLoader(inject(HttpClient)),
  onLanguageChange: (from, to) => {
    // –ê–Ω–∞–ª–∏—Ç–∏–∫–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, API —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    analytics.track("language_changed", { from, to });
  },
});
```

---

## üß© –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Pipe

```typescript
@Component({
  selector: "app-header",
  standalone: true,
  imports: [TranslationPipe],
  template: `
    <!-- –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥ -->
    <h1>{{ "HEADER.TITLE" | t }}</h1>

    <!-- –° –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ -->
    <p>{{ "USER.GREETING" | t : { name: userName } }}</p>

    <!-- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ -->
    <span>{{ "ITEMS.COUNT" | t : { count: itemCount } }}</span>
  `,
})
export class HeaderComponent {
  userName = "John";
  itemCount = 5;
}
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Å–µ—Ä–≤–∏—Å–æ–º

```typescript
@Component({
  selector: "app-user-profile",
  standalone: true,
  imports: [CommonModule, TranslationPipe],
  template: `
    <div class="profile">
      <h2>{{ pageTitle }}</h2>

      @if (isLoading) {
      <p>{{ "COMMON.LOADING" | t }}</p>
      } @else {
      <div class="content">
        {{ dynamicMessage }}
      </div>
      }

      <button (click)="saveProfile()">
        {{ "COMMON.SAVE" | t }}
      </button>
    </div>
  `,
})
export class UserProfileComponent implements OnInit {
  private translationService = inject(TranslationService);

  pageTitle = "";
  dynamicMessage = "";
  isLoading = false;

  ngOnInit() {
    // –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    this.pageTitle = this.translationService.translate("PROFILE.TITLE");

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    this.loadUserData().then((user) => {
      this.dynamicMessage = this.translationService.translate("PROFILE.WELCOME", {
        name: user.name,
        lastLogin: user.lastLogin,
      });
    });
  }

  saveProfile() {
    this.isLoading = true;
    // –õ–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è...
  }

  private async loadUserData() {
    // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return { name: "John", lastLogin: new Date() };
  }
}
```

### –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã —Å Signals

```typescript
@Component({
  selector: "app-dashboard",
  template: `
    <div class="dashboard">
      <h1>{{ currentTitle() }}</h1>
      <p>{{ currentDescription() }}</p>

      <!-- –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
      <aurora-language-switcher-basic></aurora-language-switcher-basic>
    </div>
  `,
})
export class DashboardComponent {
  private translationService = inject(TranslationService);

  // –†–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
  currentTitle = computed(() => this.translationService.translate("DASHBOARD.TITLE"));

  currentDescription = computed(() => {
    const currentLang = this.translationService.currentLang();
    return this.translationService.translate("DASHBOARD.DESCRIPTION", {
      language: currentLang,
    });
  });
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è

```typescript
@Component({
  selector: "app-layout",
  standalone: true,
  imports: [CommonModule, TranslationPipe, BasicLanguageSwitcherComponent],
  template: `
    <header class="header">
      <nav class="navbar">
        <div class="brand">
          {{ "BRAND.NAME" | t }}
        </div>

        <ul class="nav-menu">
          <li>
            <a routerLink="/">{{ "NAV.HOME" | t }}</a>
          </li>
          <li>
            <a routerLink="/about">{{ "NAV.ABOUT" | t }}</a>
          </li>
          <li>
            <a routerLink="/contact">{{ "NAV.CONTACT" | t }}</a>
          </li>
        </ul>

        <!-- –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
        <aurora-language-switcher-basic [showWarning]="false"> </aurora-language-switcher-basic>
      </nav>
    </header>

    <main>
      <router-outlet></router-outlet>
    </main>
  `,
})
export class LayoutComponent {}
```

---

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —è–∑—ã–∫–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
class CustomLanguageInfoProvider implements LanguageInfoProvider {
  getLanguageInfo(codes: string[], domainMap: Record<string, string>): LanguageInfo[] {
    return codes.map((code) => {
      const domain = this.getDomainForLanguage(code, domainMap);

      return {
        code,
        name: this.getLocalizedName(code),
        nativeName: this.getNativeName(code),
        flag: this.getCustomFlag(code), // –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∏–ª–∏ –∏–∫–æ–Ω–∫–∏
        domain: domain || "",
        defaultLocale: this.getRegionalLocale(code),
      };
    });
  }

  private getCustomFlag(code: string): string {
    // –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ñ–ª–∞–≥–æ–≤
    const customFlags = {
      en: "üîµ", // –°–∏–Ω–∏–π –∫—Ä—É–≥ –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–∞ –°–®–ê
      de: "üü°", // –ñ–µ–ª—Ç—ã–π –∫—Ä—É–≥ –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–∞ –ì–µ—Ä–º–∞–Ω–∏–∏
      fr: "üî¥", // –ö—Ä–∞—Å–Ω—ã–π –∫—Ä—É–≥ –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–∞ –§—Ä–∞–Ω—Ü–∏–∏
    };
    return customFlags[code] || "‚ö™";
  }

  private getRegionalLocale(code: string): string {
    // –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ª–æ–∫–∞–ª–∏ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
    const regionalLocales = {
      en: "en_UK", // UK English –≤–º–µ—Å—Ç–æ US
      de: "de_AT", // Austrian German
      fr: "fr_CA", // Canadian French
    };
    return regionalLocales[code] || `${code}_${code.toUpperCase()}`;
  }

  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã...
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
provideAuroraI18nAdvanced({
  domainMap: { "mysite.com": "en", "mysite.de": "de" },
  languageInfoProvider: new CustomLanguageInfoProvider(),
});
```

### –ö–∞—Å—Ç–æ–º–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞

```typescript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ cookie –≤–º–µ—Å—Ç–æ localStorage
class CookieStorageStrategy implements StorageStrategy {
  private readonly COOKIE_NAME = "preferred-language";

  get(): string | null {
    if (typeof document === "undefined") return null;

    const cookies = document.cookie.split(";");
    const cookie = cookies.find((c) => c.trim().startsWith(this.COOKIE_NAME));
    return cookie ? cookie.split("=")[1] : null;
  }

  set(lang: string): void {
    if (typeof document === "undefined") return;

    // Cookie –Ω–∞ 1 –≥–æ–¥
    const expiry = new Date();
    expiry.setFullYear(expiry.getFullYear() + 1);

    document.cookie = `${this.COOKIE_NAME}=${lang}; expires=${expiry.toUTCString()}; path=/; SameSite=Lax`;
  }

  clear(): void {
    if (typeof document === "undefined") return;
    document.cookie = `${this.COOKIE_NAME}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
provideAuroraI18nAdvanced({
  domainMap: { "mysite.com": "en" },
  storageStrategy: new CookieStorageStrategy(),
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π

```typescript
provideAuroraI18nAdvanced({
  domainMap: {
    "analytics-site.com": "en",
    "analytics-site.de": "de",
  },
  onLanguageChange: async (from, to) => {
    // Google Analytics
    if (typeof gtag !== "undefined") {
      gtag("event", "language_change", {
        from_language: from,
        to_language: to,
        timestamp: Date.now(),
      });
    }

    // Mixpanel
    if (typeof mixpanel !== "undefined") {
      mixpanel.track("Language Changed", {
        from: from,
        to: to,
        domain: window.location.hostname,
      });
    }

    // –ö–∞—Å—Ç–æ–º–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ API
    try {
      await fetch("/api/analytics/language-change", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ from, to, timestamp: Date.now() }),
      });
    } catch (error) {
      console.warn("Analytics logging failed:", error);
    }
  },
});
```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å ngx-translate

**–ë—ã–ª–æ (ngx-translate):**

```typescript
// app.module.ts
import { TranslateModule } from '@ngx-translate/core';

@NgModule({
  imports: [
    TranslateModule.forRoot({
      loader: {
        provide: TranslateLoader,
        useFactory: HttpLoaderFactory,
        deps: [HttpClient]
      }
    })
  ]
})

// component.ts
constructor(private translate: TranslateService) {}

ngOnInit() {
  this.translate.setDefaultLang('en');
  this.translate.use('de');
}

// template
{{ 'HELLO' | translate }}
```

**–°—Ç–∞–ª–æ (@aurora/i18n):**

```typescript
// main.ts
bootstrapApplication(AppComponent, {
  providers: [
    provideAuroraI18n({
      localhost: "en",
      "mysite.de": "de",
    }),
  ],
});

// component.ts
// –ù–∏–∫–∞–∫–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –Ω—É–∂–Ω–æ!

// template
{
  {
    "HELLO" | t;
  }
}
```

**–®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏:**

1. –£–¥–∞–ª–∏—Ç—å `@ngx-translate/core` –∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@aurora/i18n`
3. –ó–∞–º–µ–Ω–∏—Ç—å `TranslateModule` –Ω–∞ `provideAuroraI18n()`
4. –ü–æ–º–µ–Ω—è—Ç—å `translate` pipe –Ω–∞ `t` pipe
5. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–º–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ú–∏–≥—Ä–∞—Ü–∏—è —Å Angular i18n

**–ë—ã–ª–æ (Angular i18n):**

```json
// angular.json
"build": {
  "configurations": {
    "en": { "aot": true, "outputPath": "dist/en/" },
    "de": { "aot": true, "outputPath": "dist/de/" }
  }
}
```

**–°—Ç–∞–ª–æ (@aurora/i18n):**

```typescript
// main.ts - –µ–¥–∏–Ω—ã–π –±–∏–ª–¥!
provideAuroraI18n({
  "mysite.com": "en",
  "mysite.de": "de",
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–∏–≥—Ä–∞—Ü–∏–∏:**

- ‚úÖ –û–¥–∏–Ω –±–∏–ª–¥ –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–≤–æ–¥—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** –ö–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å (`HEADER.TITLE` –≤–º–µ—Å—Ç–æ "My Site")

**–†–µ—à–µ–Ω–∏—è:**

```typescript
// 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª–∞–º
provideAuroraI18n(
  {
    localhost: "en",
  },
  {
    translationsPath: "/assets/i18n", // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å?
  }
);

// 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤
// src/assets/i18n/en.json –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

// 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å –≤ DevTools
// –ï—Å—Ç—å –ª–∏ 404 –æ—à–∏–±–∫–∏ –¥–ª—è .json —Ñ–∞–π–ª–æ–≤?

// 4. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
class DebugTranslationLoader implements TranslationLoader {
  constructor(private http: HttpClient) {}

  async load(lang: string): Promise<Translations> {
    console.log(`Loading translations for: ${lang}`);
    try {
      const result = await firstValueFrom(this.http.get<Translations>(`/assets/i18n/${lang}.json`));
      console.log(`Loaded translations:`, result);
      return result;
    } catch (error) {
      console.error(`Failed to load ${lang}:`, error);
      throw error;
    }
  }
}
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–º–µ–Ω—ã –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç —è–∑—ã–∫–∏

**–°–∏–º–ø—Ç–æ–º—ã:** –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ `mysite.de`, –Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

**–†–µ—à–µ–Ω–∏—è:**

```typescript
// 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—Ä—Ç—É –¥–æ–º–µ–Ω–æ–≤
provideAuroraI18n({
  "mysite.com": "en",
  "mysite.de": "de", // –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–æ–º–µ–Ω —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç
  localhost: "en", // –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
});

// 2. –û—Ç–ª–∞–¥–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞
class DebugLanguageResolver implements LanguageResolver {
  detectLanguage(hostname: string, search: string): string {
    console.log(`Detecting language for hostname: ${hostname}`);
    console.log(`Search params: ${search}`);

    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
    return "en";
  }

  // –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã...
}

// 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ DevTools
// Application > Local Storage - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —è–∑—ã–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –¥–æ–º–µ–Ω
```

### –ü—Ä–æ–±–ª–µ–º–∞: Language Switcher –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `<aurora-language-switcher-basic>` –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è

**–†–µ—à–µ–Ω–∏—è:**

```typescript
// 1. –î–æ–±–∞–≤—å—Ç–µ –∏–º–ø–æ—Ä—Ç
@Component({
  imports: [BasicLanguageSwitcherComponent], // ‚Üê –í–∞–∂–Ω–æ!
  template: `<aurora-language-switcher-basic></aurora-language-switcher-basic>`
})

// 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–∑—ã–∫–æ–≤
provideAuroraI18n({
  'localhost': 'en',
  'localhost:4200': 'de'  // –ú–∏–Ω–∏–º—É–º 2 —è–∑—ã–∫–∞ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
})

// 3. –û—Ç–ª–∞–¥–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
@Component({
  template: `
    <div>Current lang: {{ translationService.currentLang() }}</div>
    <div>Available: {{ translationService.languageInfo() | json }}</div>
    <aurora-language-switcher-basic></aurora-language-switcher-basic>
  `
})
export class DebugComponent {
  translationService = inject(TranslationService);
}
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSR –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:** –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ

**–†–µ—à–µ–Ω–∏—è:**

```typescript
// 1. @aurora/i18n —É–∂–µ SSR-safe, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
class SSRSafeCustomProvider implements LanguageInfoProvider {
  getLanguageInfo(codes: string[]): LanguageInfo[] {
    // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ window, document, localStorage –∑–¥–µ—Å—å
    // –¢–æ–ª—å–∫–æ —á–∏—Å—Ç—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
    return codes.map((code) => ({
      /* ... */
    }));
  }
}

// 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ BrowserService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
// –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç SSR, –Ω–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ window –Ω–∞–ø—Ä—è–º—É—é

// 3. –î–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
@Component({
  template: `
    @if (isBrowser) {
    <aurora-language-switcher-basic></aurora-language-switcher-basic>
    }
  `,
})
export class MyComponent {
  isBrowser = typeof window !== "undefined";
}
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
my-angular-project/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ i18n/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ en.json
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ de.json
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ fr.json
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ es.json
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ header/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ header.component.ts
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ header.component.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.component.ts
‚îÇ   ‚îî‚îÄ‚îÄ main.ts
‚îú‚îÄ‚îÄ i18n.example.ts
‚îî‚îÄ‚îÄ package.json
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```json
{
  "COMMON": {
    "BUTTONS": {
      "SAVE": "Save",
      "CANCEL": "Cancel",
      "DELETE": "Delete"
    },
    "MESSAGES": {
      "LOADING": "Loading...",
      "ERROR": "Error occurred",
      "SUCCESS": "Success!"
    }
  },
  "HEADER": {
    "TITLE": "My Website",
    "MENU": {
      "HOME": "Home",
      "ABOUT": "About",
      "CONTACT": "Contact"
    }
  },
  "PAGES": {
    "HOME": {
      "TITLE": "Welcome",
      "SUBTITLE": "Great to see you here!"
    },
    "ABOUT": {
      "TITLE": "About Us",
      "DESCRIPTION": "We are awesome company"
    }
  }
}
```

### Performance Tips

```typescript
// 1. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö
class LazyTranslationLoader implements TranslationLoader {
  private cache = new Map<string, Promise<Translations>>();

  async load(lang: string): Promise<Translations> {
    if (!this.cache.has(lang)) {
      this.cache.set(lang, this.loadFromNetwork(lang));
    }
    return this.cache.get(lang)!;
  }

  private async loadFromNetwork(lang: string): Promise<Translations> {
    // –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
  }
}

// 2. –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤
class PreloadTranslationLoader implements TranslationLoader {
  constructor() {
    // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —è–∑—ã–∫–∏
    this.preload(['en', 'de', 'fr']);
  }

  private async preload(languages: string[]) {
    // –õ–æ–≥–∏–∫–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∏
  }
}

// 3. –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ production
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ –∫–ª—é—á–∏ –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤
{
  "C": { // Common
    "B": { // Buttons
      "S": "Save", // Save
      "C": "Cancel" // Cancel
    }
  }
}
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production

### –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `@aurora/i18n`
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ `main.ts`
- [ ] –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- [ ] –î–æ–±–∞–≤–ª–µ–Ω —è–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–∞—Ä—Ç–∞ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è production
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–º–µ–Ω—ã —è–∑—ã–∫–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω SSR (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω fallback –¥–ª—è –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- [ ] –ú–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã JSON —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ä–∞–∑–º–µ—Ä bundle (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 8KB)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã —è–∑—ã–∫–æ–≤

### SEO

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã meta-—Ç–µ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã hreflang —Å—Å—ã–ª–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã URL –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤–∏–∫–∞–º–∏

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**

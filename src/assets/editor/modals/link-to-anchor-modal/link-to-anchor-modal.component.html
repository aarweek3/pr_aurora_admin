<dialog #dialog class="link-to-anchor-modal">
  <div class="modal-header">
    <h2>–°—Å—ã–ª–∫–∞ –Ω–∞ —è–∫–æ—Ä—å</h2>
    <button class="close-button" (click)="onCancel()" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
  </div>

  <div class="modal-body">
    <form (keydown)="onKeyDown($event)">
      <!-- –¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏ -->
      <div class="form-group">
        <label for="linkText">–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏:</label>
        <input
          #linkTextInput
          id="linkText"
          type="text"
          [(ngModel)]="linkText"
          name="linkText"
          placeholder="–¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è"
          autocomplete="off"
        />
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —è–∫–æ—Ä–µ–π -->
      <div class="form-group">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ —è–∫–æ—Ä—å:</label>
        <div class="anchors-list" *ngIf="availableAnchors.length > 0; else noAnchors">
          <div
            *ngFor="let anchor of availableAnchors"
            class="anchor-item"
            [class.selected]="selectedAnchorId === anchor.id"
            (click)="selectAnchor(anchor.id)"
          >
            <div class="anchor-icon">‚öì</div>
            <div class="anchor-info">
              <div class="anchor-name">{{ anchor.name || anchor.id }}</div>
              <div class="anchor-id">#{{ anchor.id }}</div>
            </div>
            <div class="anchor-check" *ngIf="selectedAnchorId === anchor.id">‚úì</div>
          </div>
        </div>
        <ng-template #noAnchors>
          <div class="no-anchors">
            <p>üìå –í –¥–æ–∫—É–º–µ–Ω—Ç–µ –Ω–µ—Ç —è–∫–æ—Ä–µ–π</p>
            <p class="hint">
              –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —è–∫–æ—Ä—å —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏ ‚öì "–°–æ–∑–¥–∞—Ç—å —è–∫–æ—Ä—å" –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+Alt+A
            </p>
          </div>
        </ng-template>
      </div>

      <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
      <div *ngIf="validationError" class="validation-error">‚ùå {{ validationError }}</div>
    </form>
  </div>

  <div class="modal-footer">
    <div class="footer-left"></div>
    <div class="footer-right">
      <button class="cancel-button" (click)="onCancel()" type="button">–û—Ç–º–µ–Ω–∞</button>
      <button class="save-button" (click)="onSave()" type="button">–°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
    </div>
  </div>
</dialog>

<div
  class="table-modal-overlay"
  *ngIf="isVisible"
  (click)="onOverlayClick($event)"
  (keydown)="onKeyDown($event)"
  tabindex="0"
>
  <div class="table-modal">
    <div class="modal-header">
      <h3>üìä –í—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É</h3>
      <button class="close-button" (click)="close()" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
    </div>

    <div class="modal-body">
      <!-- –†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã -->
      <div class="form-group">
        <label>–†–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã:</label>
        <div class="size-controls">
          <div class="size-control">
            <label for="rows">–°—Ç—Ä–æ–∫–∏:</label>
            <div class="number-input">
              <button type="button" (click)="decrement('rows')" [disabled]="rows <= 1">‚àí</button>
              <input id="rows" type="number" [(ngModel)]="rows" min="1" max="20" />
              <button type="button" (click)="increment('rows')" [disabled]="rows >= 20">+</button>
            </div>
          </div>

          <div class="size-control">
            <label for="cols">–°—Ç–æ–ª–±—Ü—ã:</label>
            <div class="number-input">
              <button type="button" (click)="decrement('cols')" [disabled]="cols <= 1">‚àí</button>
              <input id="cols" type="number" [(ngModel)]="cols" min="1" max="10" />
              <button type="button" (click)="increment('cols')" [disabled]="cols >= 10">+</button>
            </div>
          </div>
        </div>
      </div>

      <!-- –û–ø—Ü–∏–∏ —Å—Ç–∏–ª–µ–π -->
      <div class="form-group">
        <label>–û–ø—Ü–∏–∏ —Å—Ç–∏–ª–µ–π:</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="hasHeader" />
            <span>‚òë –ó–∞–≥–æ–ª–æ–≤–æ–∫ (header row)</span>
          </label>

          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="bordered" />
            <span>‚òë –ì—Ä–∞–Ω–∏—Ü—ã</span>
          </label>

          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="striped" />
            <span>‚òê –ß–µ—Ä–µ–¥—É—é—â–∏–µ—Å—è —Å—Ç—Ä–æ–∫–∏</span>
          </label>

          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="hover" />
            <span>‚òë Hover —ç—Ñ—Ñ–µ–∫—Ç</span>
          </label>
        </div>
      </div>

      <!-- –®–∏—Ä–∏–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã -->
      <div class="form-group">
        <label>–®–∏—Ä–∏–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã:</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="widthType" value="full" [(ngModel)]="widthType" />
            <span>‚óè 100%</span>
          </label>

          <label class="radio-label">
            <input type="radio" name="widthType" value="auto" [(ngModel)]="widthType" />
            <span>‚óã –ê–≤—Ç–æ</span>
          </label>

          <label class="radio-label">
            <input type="radio" name="widthType" value="custom" [(ngModel)]="widthType" />
            <span>‚óã –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è</span>
          </label>

          <div class="custom-width" *ngIf="widthType === 'custom'">
            <input type="number" [(ngModel)]="customWidth" min="200" max="1200" step="50" />
            <span>px</span>
          </div>
        </div>
      </div>

      <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
      <div class="preview-section">
        <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</label>
        <div class="preview-table">
          <div
            class="preview-grid"
            [style.grid-template-columns]="'repeat(' + cols + ', 1fr)'"
            [style.grid-template-rows]="'repeat(' + rows + ', 1fr)'"
          >
            <div
              class="preview-cell"
              *ngFor="let cell of Array(rows * cols).fill(0); let i = index"
              [class.header]="hasHeader && i < cols"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn btn-cancel" (click)="close()">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn btn-confirm" (click)="confirm()">–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
    </div>
  </div>
</div>

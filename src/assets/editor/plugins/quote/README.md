# Quote Plugin –¥–ª—è Aurora Editor

–ü–ª–∞–≥–∏–Ω –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Å—Ç–∏–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ü–∏—Ç–∞—Ç —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º.

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [API](#api)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [FAQ](#faq)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- üé® **5 –≥–æ—Ç–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π** - Classic, Modern, Minimal, Accent, Elegant
- ‚úèÔ∏è **–ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- üíæ **Offline-first** - —Ä–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —á–µ—Ä–µ–∑ IndexedDB
- üì§ **–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç** - –æ–±–º–µ–Ω —Å—Ç–∏–ª—è–º–∏ —á–µ—Ä–µ–∑ JSON —Ñ–∞–π–ª—ã
- üîç **Live preview** - –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ü–∏—Ç–∞—Ç—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚å®Ô∏è **–ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞** - Ctrl+Shift+Q –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≤—Å—Ç–∞–≤–∫–∏
- üì± **Responsive** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **TypeScript** - –ø–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Angular Standalone Components** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Dexie.js** - –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ IndexedDB –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- **RxJS** - —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Inline CSS** - —Å—Ç–∏–ª–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ HTML

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install dexie
```

### 2. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–ª–∞–≥–∏–Ω–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `quote` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–ª–∞–≥–∏–Ω–æ–≤ –≤–∞—à–µ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:

```
src/app/editor/plugins/quote/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ quote-presets.ts          # –ì–æ—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-styles.types.ts # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ aurora-db.service.ts       # IndexedDB
‚îÇ   ‚îú‚îÄ‚îÄ blockquote-styles.service.ts # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-generator.service.ts # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä HTML
‚îú‚îÄ‚îÄ modals/
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-modal/          # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
‚îÇ       ‚îú‚îÄ‚îÄ blockquote-modal.component.ts
‚îÇ       ‚îú‚îÄ‚îÄ blockquote-modal.component.html
‚îÇ       ‚îî‚îÄ‚îÄ blockquote-modal.component.scss
‚îú‚îÄ‚îÄ quote.config.ts                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ quote.plugin.ts                # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø–ª–∞–≥–∏–Ω–∞
```

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞

–í –≤–∞—à–µ–º `aurora-editor.component.ts`:

```typescript
import { QuotePlugin } from './plugins/quote/quote.plugin';

export class AuroraEditorComponent {
  private plugins: AuroraPlugin[] = [];

  ngOnInit() {
    // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø–ª–∞–≥–∏–Ω–∞
    const quotePlugin = new QuotePlugin();

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º
    quotePlugin.init();

    // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤
    this.plugins.push(quotePlugin);
  }
}
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–í—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç** –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ —Ü–∏—Ç–∞—Ç—É
2. –ù–∞–∂–º–∏—Ç–µ **Ctrl+Shift+Q** –∏–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É "–¶–∏—Ç–∞—Ç–∞" –≤ —Ç—É–ª–±–∞—Ä–µ
3. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –∏–∑ –≥–∞–ª–µ—Ä–µ–∏
5. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è "–ê–≤—Ç–æ—Ä" –∏ "–ò—Å—Ç–æ—á–Ω–∏–∫"
6. –ù–∞–∂–º–∏—Ç–µ **"–í—Å—Ç–∞–≤–∏—Ç—å —Ü–∏—Ç–∞—Ç—É"**

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞

```typescript
import { QuotePlugin } from './plugins/quote/quote.plugin';
import { BlockquoteData } from './plugins/quote/types/blockquote-styles.types';

// –°–æ–∑–¥–∞–µ–º –ø–ª–∞–≥–∏–Ω
const quotePlugin = new QuotePlugin();
quotePlugin.init();

// –î–∞–Ω–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã
const quoteData: BlockquoteData = {
  text: '–í–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞–∂–Ω–µ–µ –∑–Ω–∞–Ω–∏—è',
  author: '–ê–ª—å–±–µ—Ä—Ç –≠–π–Ω—à—Ç–µ–π–Ω',
  source: '–ò–Ω—Ç–µ—Ä–≤—å—é 1929 –≥–æ–¥–∞',
  styleId: 'classic',
};

// –í—Å—Ç–∞–≤–ª—è–µ–º –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
const editorElement = document.querySelector('.aurora-editor') as HTMLElement;
await quotePlugin.insertQuote(quoteData, editorElement);
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
quote/
‚îú‚îÄ‚îÄ config/                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø—Ä–µ—Å–µ—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ quote-presets.ts          # 5 –≥–æ—Ç–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π
‚îÇ
‚îú‚îÄ‚îÄ types/                         # TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-styles.types.ts # 12+ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ services/                      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ aurora-db.service.ts      # IndexedDB (Dexie.js)
‚îÇ   ‚îú‚îÄ‚îÄ blockquote-styles.service.ts # CRUD + –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-generator.service.ts # HTML/CSS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ modals/                        # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ blockquote-modal/
‚îÇ       ‚îú‚îÄ‚îÄ blockquote-modal.component.ts    # 470 —Å—Ç—Ä–æ–∫
‚îÇ       ‚îú‚îÄ‚îÄ blockquote-modal.component.html  # 180 —Å—Ç—Ä–æ–∫
‚îÇ       ‚îî‚îÄ‚îÄ blockquote-modal.component.scss  # 420 —Å—Ç—Ä–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ quote.config.ts               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞ (180 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ quote.plugin.ts               # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å (550 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ README.md                     # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

**–ò—Ç–æ–≥–æ:** 10 —Ñ–∞–π–ª–æ–≤, ~3,786 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

## üé® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–∞–±–æ—Ç–∞ —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º

#### –í–∫–ª–∞–¥–∫–∞ "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ"

- **–¢–µ–∫—Å—Ç —Ü–∏—Ç–∞—Ç—ã** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
- **–ê–≤—Ç–æ—Ä** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∏–º—è –∞–≤—Ç–æ—Ä–∞ —Ü–∏—Ç–∞—Ç—ã
- **–ò—Å—Ç–æ—á–Ω–∏–∫** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –∫–Ω–∏–≥–∞, —Å—Ç–∞—Ç—å—è, —Ä–µ—á—å –∏ —Ç.–¥.
- **Preview** - –∂–∏–≤–æ–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Å—Ç–∏–ª–µ–º

#### –í–∫–ª–∞–¥–∫–∞ "–°—Ç–∏–ª—å"

- **–ì–æ—Ç–æ–≤—ã–µ —Å—Ç–∏–ª–∏** - 5 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
- **–ú–æ–∏ —Å—Ç–∏–ª–∏** - –≤–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (—Ç–æ–ª—å–∫–æ –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
  - üìã –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å
  - üóëÔ∏è –£–¥–∞–ª–∏—Ç—å (—Ç–æ–ª—å–∫–æ –∫–∞—Å—Ç–æ–º–Ω—ã–µ)
  - üì§ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ
  - üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ JSON

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª—è–º–∏

#### –ò–º–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π

```typescript
// –ß–µ—Ä–µ–∑ UI
// 1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
// 2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°—Ç–∏–ª—å"
// 3. –ù–∞–∂–∞—Ç—å "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
// 4. –í—ã–±—Ä–∞—Ç—å JSON —Ñ–∞–π–ª

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
import { BlockquoteStylesService } from './services/blockquote-styles.service';

const stylesService = new BlockquoteStylesService();
const file = /* File object */;
const result = await stylesService.importStylesFromFile(file);

console.log(`–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: ${result.imported}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${result.skipped}`);
```

#### –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç–∏–ª–µ–π

```typescript
// –ß–µ—Ä–µ–∑ UI
// 1. –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
// 2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–°—Ç–∏–ª—å"
// 3. –ù–∞–∂–∞—Ç—å "–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
// 4. –§–∞–π–ª –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ
const stylesService = new BlockquoteStylesService();
await stylesService.downloadStylesAsFile();
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å—Ç–∏–ª—è

```typescript
import { BlockquoteStyle } from './types/blockquote-styles.types';

const customStyle: Omit<BlockquoteStyle, 'id' | 'isCustom'> = {
  name: '–ú–æ–π —Å—Ç–∏–ª—å',
  quoteStyles: {
    background: '#f0f9ff',
    borderWidth: '4px',
    borderStyle: 'solid',
    borderColor: '#0ea5e9',
    padding: '20px',
    fontStyle: 'italic',
    fontSize: '18px',
    color: '#0c4a6e',
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
  },
  footerStyles: {
    fontSize: '14px',
    color: '#64748b',
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
  },
};

const created = await stylesService.createCustomStyle(customStyle);
console.log('–°–æ–∑–¥–∞–Ω —Å—Ç–∏–ª—å:', created.id);
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞–≥–∏–Ω–∞

```typescript
import { QuotePlugin } from './quote.plugin';

const quotePlugin = new QuotePlugin({
  // ID –ø–ª–∞–≥–∏–Ω–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º)
  id: 'quote',

  // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  name: '–¶–∏—Ç–∞—Ç–∞',

  // –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞
  hotkey: 'Ctrl+Shift+Q',

  // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤ —Ç—É–ª–±–∞—Ä–µ
  showInToolbar: true,

  // –ü–æ—Ä—è–¥–æ–∫ –≤ —Ç—É–ª–±–∞—Ä–µ
  toolbarOrder: 50,

  // CSS –∫–ª–∞—Å—Å –¥–ª—è blockquote
  blockquoteClassName: 'aurora-blockquote',

  // –õ–∏–º–∏—Ç—ã
  maxQuoteLength: 5000,
  maxAuthorLength: 200,
  maxSourceLength: 500,

  // –ê–Ω–∏–º–∞—Ü–∏–∏
  useAnimations: true,

  // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ textarea
  autoFocusTextarea: true,

  // –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–∏–ª—å
  rememberLastStyle: true,

  // –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏
  debug: false,
});
```

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```typescript
import { QUOTE_CONSTANTS } from './quote.config';

// CSS –∫–ª–∞—Å—Å—ã
QUOTE_CONSTANTS.CSS_CLASSES.BLOCKQUOTE; // 'aurora-blockquote'
QUOTE_CONSTANTS.CSS_CLASSES.TEXT; // 'aurora-blockquote-text'
QUOTE_CONSTANTS.CSS_CLASSES.FOOTER; // 'aurora-blockquote-footer'

// Data-–∞—Ç—Ä–∏–±—É—Ç—ã
QUOTE_CONSTANTS.DATA_ATTRIBUTES.STYLE_ID; // 'data-style-id'
QUOTE_CONSTANTS.DATA_ATTRIBUTES.AUTHOR; // 'data-author'
QUOTE_CONSTANTS.DATA_ATTRIBUTES.SOURCE; // 'data-source'

// –°–æ–±—ã—Ç–∏—è
QUOTE_CONSTANTS.EVENTS.QUOTE_INSERTED; // 'quote:inserted'
QUOTE_CONSTANTS.EVENTS.MODAL_OPENED; // 'quote:modal-opened'
QUOTE_CONSTANTS.EVENTS.STYLE_SELECTED; // 'quote:style-selected'
```

## üîå API

### QuotePlugin (–≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å)

#### –ú–µ—Ç–æ–¥—ã –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞

```typescript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞
quotePlugin.init(): void

// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏)
quotePlugin.execute(editorElement: HTMLElement, options?: QuoteModalOptions): void

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∫—É—Ä—Å–æ—Ä –≤ blockquote?)
quotePlugin.isActive(editorElement: HTMLElement): boolean

// –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
quotePlugin.destroy(): void
```

#### –ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```typescript
// –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Ü–∏—Ç–∞—Ç—ã
await quotePlugin.insertQuote(
  data: BlockquoteData,
  editorElement: HTMLElement
): Promise<QuoteOperationResult>

// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ü–∏—Ç–∞—Ç—ã
quotePlugin.editQuote(blockquoteElement: HTMLElement): void
```

### BlockquoteStylesService

```typescript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç–∏–ª–∏ (Observable)
stylesService.getAllStyles(): Observable<BlockquoteStyle[]>

// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å –ø–æ ID
await stylesService.getStyleById(id: string): Promise<BlockquoteStyle | undefined>

// –°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∏–ª—å
await stylesService.createCustomStyle(style: Omit<BlockquoteStyle, 'id' | 'isCustom'>): Promise<BlockquoteStyle>

// –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∏–ª—å
await stylesService.updateCustomStyle(id: string, updates: Partial<BlockquoteStyle>): Promise<boolean>

// –£–¥–∞–ª–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å—Ç–∏–ª—å (soft delete)
await stylesService.deleteCustomStyle(id: string): Promise<boolean>

// –î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª—å
await stylesService.duplicateStyle(id: string, newName: string): Promise<BlockquoteStyle | null>

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç–∏–ª–∏
await stylesService.exportStyles(): Promise<string> // JSON string

// –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∏–ª–∏
await stylesService.importStyles(json: string): Promise<ImportResult>
await stylesService.importStylesFromFile(file: File): Promise<ImportResult>

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
await stylesService.getStats(): Promise<{
  totalStyles: number;
  presetStyles: number;
  customStyles: number;
  deletedStyles: number;
  unsyncedStyles: number;
}>
```

### BlockquoteGenerator (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å)

```typescript
// –°–æ–∑–¥–∞—Ç—å blockquote —ç–ª–µ–º–µ–Ω—Ç
BlockquoteGenerator.createBlockquote(
  data: BlockquoteData,
  style: BlockquoteStyle
): HTMLElement

// –°–æ–∑–¥–∞—Ç—å HTML —Å—Ç—Ä–æ–∫—É
BlockquoteGenerator.createBlockquoteHTML(
  data: BlockquoteData,
  style: BlockquoteStyle
): string

// –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∏–ª–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
BlockquoteGenerator.updateBlockquoteStyle(
  element: HTMLElement,
  style: BlockquoteStyle
): void

// –ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—ã–µ –∏–∑ blockquote —ç–ª–µ–º–µ–Ω—Ç–∞
BlockquoteGenerator.extractDataFromBlockquote(
  element: HTMLElement
): BlockquoteData | null

// –ü–æ–ª—É—á–∏—Ç—å CSS –æ–±—ä–µ–∫—Ç –¥–ª—è Angular [ngStyle]
BlockquoteGenerator.getBlockquoteCSSObject(
  styles: QuoteStyles
): Record<string, string>

// –£—Ç–∏–ª–∏—Ç—ã
BlockquoteGenerator.isBlockquote(element: HTMLElement): boolean
BlockquoteGenerator.findParentBlockquote(element: HTMLElement): HTMLElement | null
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         UI Layer (Components)           ‚îÇ
‚îÇ  - BlockquoteModalComponent             ‚îÇ
‚îÇ  - BlockquoteStyleEditorComponent       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Business Logic (Services)          ‚îÇ
‚îÇ  - BlockquoteStylesService (CRUD)       ‚îÇ
‚îÇ  - BlockquoteGenerator (HTML/CSS)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       Data Layer (IndexedDB)            ‚îÇ
‚îÇ  - AuroraDB (Dexie.js wrapper)          ‚îÇ
‚îÇ  - Table: blockquoteStyles              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **Singleton** - —ç–∫–∑–µ–º–ø–ª—è—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `db`
- **Static Factory** - `BlockquoteGenerator` (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å)
- **Observable Pattern** - RxJS –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Dependency Injection** - Angular DI –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **Offline-First** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–Ω–∞—á–∞–ª–∞ –≤ IndexedDB

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
User Action (UI)
    ‚Üì
Component Event
    ‚Üì
Service Method (CRUD)
    ‚Üì
IndexedDB Operation (Dexie)
    ‚Üì
BehaviorSubject Update
    ‚Üì
Observable Subscription
    ‚Üì
UI Update (Angular)
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js >= 16
- Angular >= 15
- TypeScript >= 4.7
- Dexie.js >= 3.0

### –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run start

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# http://localhost:4200
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit —Ç–µ—Å—Ç—ã
npm run test

# E2E —Ç–µ—Å—Ç—ã
npm run e2e

# Coverage
npm run test:coverage
```

### –°–±–æ—Ä–∫–∞

```bash
# Production build
npm run build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
ls dist/
```

### Debug —Ä–µ–∂–∏–º

```typescript
const quotePlugin = new QuotePlugin({
  debug: true, // –í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
});
```

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–∞ –±—É–¥—É—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è:

```
[QuotePlugin] Initialized with config: {...}
[QuotePlugin] execute() called
[QuotePlugin] Event dispatched: quote:inserted
```

## üìö FAQ

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –≥–æ—Ç–æ–≤—ã–π —Å—Ç–∏–ª—å?

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/quote-presets.ts`:

```typescript
export const MY_CUSTOM_STYLE: BlockquoteStyle = {
  id: 'my-style',
  name: '–ú–æ–π —Å—Ç–∏–ª—å',
  isCustom: false,
  quoteStyles: {
    /* ... */
  },
  footerStyles: {
    /* ... */
  },
};

export const BLOCKQUOTE_PRESETS = [
  CLASSIC_STYLE,
  MODERN_STYLE,
  MINIMAL_STYLE,
  ACCENT_STYLE,
  ELEGANT_STYLE,
  MY_CUSTOM_STYLE, // –î–æ–±–∞–≤–∏—Ç—å —Å—é–¥–∞
];
```

### –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å –≥–æ—Ä—è—á—É—é –∫–ª–∞–≤–∏—à—É?

```typescript
const quotePlugin = new QuotePlugin({
  hotkey: 'Ctrl+Alt+Q', // –ù–æ–≤–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
});
```

### –ö–∞–∫ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å—Ç–∏–ª–µ–π?

–í `services/blockquote-styles.service.ts`:

```typescript
private readonly MAX_CUSTOM_STYLES = 50;  // –ë—ã–ª–æ 100
```

### –ö–∞–∫ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?

```typescript
import { clearDB } from './services/aurora-db.service';

// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏
await clearDB();

// –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å
const stylesService = new BlockquoteStylesService();
await stylesService.clearAllCustomStyles();
```

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ–∑ Angular?

–ù–µ—Ç, –ø–ª–∞–≥–∏–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Angular-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ API:

- Standalone Components
- Dependency Injection
- RxJS Observable
- ViewChild, ComponentRef

–î–ª—è –¥—Ä—É–≥–∏—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è.

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å —Å–µ—Ä–≤–µ—Ä–æ–º?

–í Sprint 2 –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∑–∞–≥–ª—É—à–∫–∏:

```typescript
// –í blockquote-styles.service.ts
async syncWithServer(): Promise<void> {
  // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
  // 1. –ü–æ–ª—É—á–∏—Ç—å unsyncedStyles –∏–∑ IndexedDB
  // 2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä (POST /api/styles/sync)
  // 3. –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å—Ç–∏–ª–∏
  // 4. –í—ã–∑–≤–∞—Ç—å mergeServerStyles()
}

async mergeServerStyles(serverStyles: BlockquoteStyle[]): Promise<void> {
  // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å merge –ª–æ–≥–∏–∫—É
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ updatedAt, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
}
```

–°–º–æ—Ç—Ä–∏—Ç–µ —Å–µ–∫—Ü–∏—é 2.5 –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ê–≤—Ç–æ—Ä—ã

- **TomashBraun1964** - –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- Aurora Editor Team

## üîó –°—Å—ã–ª–∫–∏

- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](../../../doc/TS%20plagin%20Quote%20Technical%20Specification.txt)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./API.md)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](./EXAMPLES.md)
- [Dexie.js Documentation](https://dexie.org/)
- [Angular Standalone Components](https://angular.io/guide/standalone-components)

---

**–í–µ—Ä—Å–∏—è –ø–ª–∞–≥–∏–Ω–∞:** 1.0.0
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 6 –¥–µ–∫–∞–±—Ä—è 2025 –≥.
**–°—Ç–∞—Ç—É—Å:** Sprint 6 –∑–∞–≤–µ—Ä—à–µ–Ω (—è–¥—Ä–æ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)

–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (Enterprise Admin Panel)
Angular 19 Standalone + ng-zorro (—á–∞—Å—Ç–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)

–û–ì–õ–ê–í–õ–ï–ù–ò–ï
–ß–ê–°–¢–¨ 1: EXECUTIVE SUMMARY
1.1 –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
1.2 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
1.3 –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
1.4 –§–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ß–ê–°–¢–¨ 2: –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2.2 –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2.3 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2.4 –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–ª–æ—ë–≤

–ß–ê–°–¢–¨ 3: CORE ARCHITECTURE (v1.0)
3.1 Context Model
3.2 Error Registry
3.3 Event Bus
3.4 Command Service
3.5 Icon Provider

–ß–ê–°–¢–¨ 4: LAYOUT –ö–û–ú–ü–û–ù–ï–ù–¢–´
4.1 Header
4.2 Left Sidebar (Navigation)
4.3 Right Panel (–ì–ò–ë–†–ò–î)
4.4 Footer
4.5 Global Status Bar

–ß–ê–°–¢–¨ 5: BODY & FORMS
5.1 Page Shell
5.2 Error Handling System (–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø)
5.3 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ß–ê–°–¢–¨ 6: UI COMPONENTS LIBRARY
6.1 Grid System
6.2 Tables
6.3 Buttons
6.4 Forms
6.5 Modals
6.6 Status/Feedback

–ß–ê–°–¢–¨ 7: STYLING SYSTEM
7.1 CSS Architecture (BEM + is-\*)
7.2 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
7.3 Theming

–ß–ê–°–¢–¨ 8: ANGULAR IMPLEMENTATION
8.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Layer-based)
8.2 Standalone –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
8.3 –°–µ—Ä–≤–∏—Å—ã
8.4 Change Detection
8.5 Routing

–ß–ê–°–¢–¨ 9: PERMISSIONS MODEL
9.1 –ö–æ–Ω—Ü–µ–ø—Ü–∏—è
9.2 –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
9.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Context
9.4 –í–ª–∏—è–Ω–∏–µ –Ω–∞ UI

–ß–ê–°–¢–¨ 10: –í–ò–ó–£–ê–õ–¨–ù–´–ï –°–•–ï–ú–´
10.1 Layout Schema
10.2 Error Flow
10.3 Context Transitions
10.4 Right Panel States
10.5 Command Lifecycle

–ß–ê–°–¢–¨ 11: –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–û–ù–ù–´–ï –ü–†–ò–ú–ï–†–´
11.1 Right Menu Config
11.2 Error Registry Structure
11.3 Context Model Example
11.4 Command Configuration

–ß–ê–°–¢–¨ 12: EXTENSIBILITY ROADMAP (v2.0)
12.1 Command Pipeline
12.2 Plugin System
12.3 Icon Provider (multi-source)
12.4 Feature Flags

–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
A. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
B. CSS –∫–ª–∞—Å—Å—ã (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)
C. ng-zorro –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
D. –ì–ª–æ—Å—Å–∞—Ä–∏–π —Ç–µ—Ä–º–∏–Ω–æ–≤

–ß–ê–°–¢–¨ 1: EXECUTIVE SUMMARY
1.1 –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∞–π—Ç–∞–º–∏/—Å–µ—Ä–≤–∏—Å–∞–º–∏/–¥–∞–Ω–Ω—ã–º–∏ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –±–µ–∑ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ layout
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ standalone-–ø—Ä–æ–µ–∫—Ç–∞
‚úÖ –ß–∞—Å—Ç–∏—á–Ω–∞—è –∑–∞–º–µ–Ω–∞ UI-–±–∏–±–ª–∏–æ—Ç–µ–∫ –≤ –±—É–¥—É—â–µ–º
‚úÖ Enterprise-—É—Ä–æ–≤–µ–Ω—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
‚úÖ –ü–ª–∞–≥–∏–Ω-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π UX –±–µ–∑ —Å–∫—Ä—ã—Ç–æ–π –ª–æ–≥–∏–∫–∏
–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. ng-zorro = –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚îÇ
‚îÇ –°–µ–º–∞–Ω—Ç–∏–∫–∞ –∏ –≤–∏–∑—É–∞–ª ‚Äî –°–í–û–ò ‚îÇ
‚îÇ ‚îÇ
‚îÇ 2. –ö–ª–∞—Å—Å—ã –æ–ø–∏—Å—ã–≤–∞—é—Ç –†–û–õ–¨, –Ω–µ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚îÇ
‚îÇ State ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ is-\* –∫–ª–∞—Å—Å—ã ‚îÇ
‚îÇ ‚îÇ
‚îÇ 3. Core ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã ‚îÇ
‚îÇ UI ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (dumb components) ‚îÇ
‚îÇ ‚îÇ
‚îÇ 4. –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Event Bus ‚îÇ
‚îÇ –ù–∏–∫–∞–∫–∏—Ö –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –º–µ–∂–¥—É UI-—á–∞—Å—Ç—è–º–∏ ‚îÇ
‚îÇ ‚îÇ
‚îÇ 5. –û—à–∏–±–∫–∏ ‚Äî —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚îÇ
‚îÇ Toast ‚Üí Modal ‚Üí Registry + Status Bars ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1.2 –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
// Core
‚îú‚îÄ HTML5
‚îú‚îÄ CSS / SCSS (BEM + is-\* –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã)
‚îú‚îÄ TypeScript 5.x
‚îú‚îÄ Angular 19 (standalone –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
‚îÇ
// UI Framework (–ß–ê–°–¢–ò–ß–ù–û)
‚îú‚îÄ ng-zorro-antd
‚îÇ ‚îú‚îÄ Grid (24 –∫–æ–ª–æ–Ω–∫–∏)
‚îÇ ‚îú‚îÄ Table
‚îÇ ‚îú‚îÄ Pagination
‚îÇ ‚îú‚îÄ Modal
‚îÇ ‚îú‚îÄ Message (Toast)
‚îÇ ‚îú‚îÄ Input / Select (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ ‚îî‚îÄ Icons (—á–µ—Ä–µ–∑ Icon Provider)
‚îÇ
// State Management (Custom)
‚îú‚îÄ Context Model (Core)
‚îú‚îÄ Error Registry (Core)
‚îú‚îÄ Event Bus (Core)
‚îî‚îÄ Command Service (Core)

–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
‚ùå Bootstrap
‚ùå Angular Material
‚ùå –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ UI-–∫–∏—Ç—ã
‚ùå –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ .ant-\* –∫–ª–∞—Å—Å–æ–≤
‚ùå RxJS –¥–ª—è state (—Ç–æ–ª—å–∫–æ –¥–ª—è HTTP –∏ —Å–æ–±—ã—Ç–∏—è)
‚ùå NgRx / Akita / etc (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–≤–æ–π Core)

1.3 –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–õ–û–ô ‚îÇ –û–¢–í–ï–¢–°–¢–í–ï–ù–ù–û–°–¢–¨ ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Header ‚îÇ –ë—Ä–µ–Ω–¥–∏–Ω–≥, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è‚îÇ
‚îÇ Left Sidebar ‚îÇ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º ‚îÇ
‚îÇ Right Panel ‚îÇ –ö–æ–Ω—Ç–µ–∫—Å—Ç + –¥–µ—Ç–∞–ª–∏ ‚îÇ
‚îÇ Body ‚îÇ –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ ‚îÇ
‚îÇ Form Status Bar ‚îÇ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã (–∞–≥—Ä–µ–≥–∞—Ç) ‚îÇ
‚îÇ Error Block ‚îÇ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫ ‚îÇ
‚îÇ Global Status Bar ‚îÇ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã ‚îÇ
‚îÇ Footer ‚îÇ –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Core (Context) ‚îÇ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚îÇ
‚îÇ Core (Registry) ‚îÇ –•—Ä–∞–Ω–∏–ª–∏—â–µ –æ—à–∏–±–æ–∫ ‚îÇ
‚îÇ Core (Event Bus) ‚îÇ –°–≤—è–∑—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚îÇ
‚îÇ Core (Commands) ‚îÇ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
‚ùå –ó–ê–ü–†–ï–©–ï–ù–û:

1. –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –º–µ–∂–¥—É UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
   Body ‚Üí Right Panel ‚ùå
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ: Body ‚Üí Event Bus ‚Üí Right Panel ‚úÖ

2. –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ UI
   Component —Å–æ–¥–µ—Ä–∂–∏—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã ‚ùå
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ: Component ‚Üí Command Service ‚Üí HTTP ‚úÖ

3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   –û—à–∏–±–∫–∞ –≤ Registry + –æ—à–∏–±–∫–∞ –≤ Component ‚ùå
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äî Registry ‚úÖ

4. –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å ng-zorro —Å—Ç–∏–ª—è–º–∏
   .ant-table { color: red } ‚ùå
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ: .table-panel { color: red } ‚úÖ

5. –°–º–µ—à–∏–≤–∞–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –æ—à–∏–±–æ–∫
   Global error –≤ Form Status Bar ‚ùå
   –ü—Ä–∞–≤–∏–ª—å–Ω–æ: Global ‚Üí Global Status Bar ‚úÖ

1.4 –§–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
v1.0 (MVP - Current Scope)
‚úÖ Layout Shell
‚îú‚îÄ Header
‚îú‚îÄ Left Sidebar
‚îú‚îÄ Body (Page Shell)
‚îú‚îÄ Right Panel
‚îú‚îÄ Status Bars
‚îî‚îÄ Footer

‚úÖ Core Architecture (–º–∏–Ω–∏–º—É–º)
‚îú‚îÄ Context Model (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è)
‚îú‚îÄ Error Registry (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è)
‚îú‚îÄ Event Bus (—É–ø—Ä–æ—â—ë–Ω–Ω–∞—è - pub/sub)
‚îú‚îÄ Command Service (–±–µ–∑ pipeline - execute only)
‚îî‚îÄ Icon Provider (ng-zorro only)

‚úÖ Error Handling (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π)
‚îú‚îÄ HttpErrorInterceptor
‚îú‚îÄ ErrorHandlingService
‚îú‚îÄ GlobalErrorHandler
‚îî‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Registry

‚úÖ Forms & Tables
‚îú‚îÄ Form Status Bar
‚îú‚îÄ Error Block
‚îú‚îÄ ng-zorro Tables
‚îî‚îÄ Validation —Å–∏—Å—Ç–µ–º–∞

‚úÖ Permissions Model (–±–∞–∑–æ–≤–∞—è)
‚îú‚îÄ Context –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ JWT –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îî‚îÄ UI visibility rules

v2.0 (Roadmap - Future)
üìã Command Pipeline
‚îú‚îÄ Before/After/Error hooks
‚îú‚îÄ Middleware support
‚îî‚îÄ Retry logic

üìã Plugin System
‚îú‚îÄ Plugin manifest
‚îú‚îÄ Dynamic loading
‚îî‚îÄ Isolated namespaces

üìã Icon Provider (multi-source)
‚îú‚îÄ ng-zorro
‚îú‚îÄ SVG sprite
‚îú‚îÄ Custom –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
‚îî‚îÄ Dynamic loading

üìã Advanced Features
‚îú‚îÄ Feature flags
‚îú‚îÄ A/B testing
‚îú‚îÄ Telemetry
‚îî‚îÄ Micro-frontends

–ß–ê–°–¢–¨ 2: –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
2.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
ASCII Layout Schema:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ADMIN-HEADER ‚îÇ
‚îÇ [Logo/Brand] [User] [Actions] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ADMIN-MAIN (Body) ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ RIGHT ‚îÇ
‚îÇ LEFT ‚îÇ ‚îÇ PAGE-HEADER ‚îÇ ‚îÇ PANEL ‚îÇ
‚îÇ SIDE ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îÇ
‚îÇ BAR ‚îÇ ‚îÇ FORM-STATUS-BAR ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îÇContext‚îÇ ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îê ‚îÇ ‚îÇ ERROR-BLOCK (–µ—Å–ª–∏ –µ—Å—Ç—å) ‚îÇ ‚îÇ ‚îÇ Zone ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇNav‚îÇ ‚îÇ ‚îÇ SEARCH/FILTERS ‚îÇ ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ Menu ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ CONTENT AREA ‚îÇ ‚îÇ ‚îÇ Zone ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ (Table/Form) ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ FOOTER (Pagination + Actions) ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GLOBAL-STATUS-BAR ‚îÇ
‚îÇ [System] [Backend] [Data] [Validation] [Operations] ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ADMIN-FOOTER ‚îÇ
‚îÇ Version 1.0.0 | ¬© 2025 | Help | Privacy ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2.2 –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
AdminApp
‚îî‚îÄ AdminLayout
‚îú‚îÄ AdminHeader
‚îÇ ‚îú‚îÄ HeaderBranding
‚îÇ ‚îú‚îÄ HeaderActions
‚îÇ ‚îî‚îÄ HeaderUser
‚îÇ
‚îú‚îÄ AdminWorkspace
‚îÇ ‚îú‚îÄ LeftSidebar
‚îÇ ‚îÇ ‚îú‚îÄ SidebarTrigger (collapsed mode)
‚îÇ ‚îÇ ‚îú‚îÄ SidebarNav
‚îÇ ‚îÇ ‚îî‚îÄ SidebarSubMenu (dynamic)
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ AdminMain (Body)
‚îÇ ‚îÇ ‚îî‚îÄ RouterOutlet
‚îÇ ‚îÇ ‚îî‚îÄ Page (–ª—é–±–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
‚îÇ ‚îÇ ‚îú‚îÄ PageHeader
‚îÇ ‚îÇ ‚îú‚îÄ FormStatusBar
‚îÇ ‚îÇ ‚îú‚îÄ ErrorBlock (conditional)
‚îÇ ‚îÇ ‚îú‚îÄ SearchFilters
‚îÇ ‚îÇ ‚îú‚îÄ ContentArea
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ Table (ng-zorro wrapper)
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ Form (custom)
‚îÇ ‚îÇ ‚îî‚îÄ PageFooter
‚îÇ ‚îÇ ‚îú‚îÄ PaginationBlock
‚îÇ ‚îÇ ‚îî‚îÄ ActionsBlock
‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ RightPanel
‚îÇ ‚îú‚îÄ ContextZone (dynamic)
‚îÇ ‚îÇ ‚îî‚îÄ PropertiesPanel
‚îÇ ‚îî‚îÄ MenuZone (static)
‚îÇ ‚îú‚îÄ ActionsPanel
‚îÇ ‚îú‚îÄ ErrorsPanel
‚îÇ ‚îú‚îÄ HistoryPanel
‚îÇ ‚îî‚îÄ DebugPanel
‚îÇ
‚îú‚îÄ GlobalStatusBar
‚îÇ ‚îú‚îÄ SystemIndicator
‚îÇ ‚îú‚îÄ DataIndicator
‚îÇ ‚îú‚îÄ ValidationIndicator
‚îÇ ‚îî‚îÄ OperationsIndicator
‚îÇ
‚îî‚îÄ AdminFooter
‚îú‚îÄ FooterInfo
‚îú‚îÄ FooterVersion
‚îî‚îÄ FooterLinks

2.3 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–û–ú–ü–û–ù–ï–ù–¢ ‚îÇ –û–¢–í–ï–ß–ê–ï–¢ –ó–ê ‚îÇ –ù–ï –û–¢–í–ï–ß–ê–ï–¢ –ó–ê ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Header ‚îÇ ‚Ä¢ –ë—Ä–µ–Ω–¥–∏–Ω–≥ ‚îÇ ‚Ä¢ Layout ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è ‚îÇ ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –º–µ–Ω—é ‚îÇ ‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏—è ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Left Sidebar ‚îÇ ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º ‚îÇ ‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ü–æ–¥–º–µ–Ω—é ‚îÇ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã ‚îÇ ‚Ä¢ –û—à–∏–±–∫–∏ ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Right Panel ‚îÇ ‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚îÇ ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è ‚îÇ ‚Ä¢ Layout ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –æ–±—ä–µ–∫—Ç–æ–º ‚îÇ ‚Ä¢ Routing ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Body ‚îÇ ‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö ‚îÇ ‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –§–æ—Ä–º—ã/—Ç–∞–±–ª–∏—Ü—ã ‚îÇ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã ‚îÇ ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Form Status Bar ‚îÇ ‚Ä¢ –ê–≥—Ä–µ–≥–∞—Ç –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º—ã ‚îÇ ‚Ä¢ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã ‚îÇ ‚Ä¢ –†–µ—à–µ–Ω–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã ‚îÇ ‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Error Block ‚îÇ ‚Ä¢ –°–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ ‚îÇ ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–ª–µ–π ‚îÇ ‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ ‚îÇ –æ—à–∏–±–∫–∏ ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Global Status Bar ‚îÇ ‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚îÇ ‚Ä¢ –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Backend —Å—Ç–∞—Ç—É—Å ‚îÇ ‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã ‚îÇ ‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Footer ‚îÇ ‚Ä¢ –ú–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è ‚îÇ ‚Ä¢ –õ—é–±–∞—è –ª–æ–≥–∏–∫–∞ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –í–µ—Ä—Å–∏—è ‚îÇ ‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏—è ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ –°—Å—ã–ª–∫–∏ ‚îÇ ‚Ä¢ –î–∞–Ω–Ω—ã–µ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2.4 –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–ª–æ—ë–≤
Event Bus Architecture:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ EVENT BUS (CORE) ‚îÇ
‚îÇ ‚îÇ
‚îÇ publish(event) subscribe(type, handler) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üë ‚Üì
‚îÇ ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Body ‚îÇ ‚îÇ Left ‚îÇ ‚îÇ Right ‚îÇ ‚îÇ Status ‚îÇ
‚îÇ ‚îÇ ‚îÇ Menu ‚îÇ ‚îÇ Panel ‚îÇ ‚îÇ Bars ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–ò–ú–ï–†–´ –°–û–ë–´–¢–ò–ô:

1. Body ‚Üí "formDirty" ‚Üí Form Status Bar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
2. Body ‚Üí "errorOccurred" ‚Üí Error Block –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
3. Left Menu ‚Üí "navigationChange" ‚Üí Context Model –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
4. Command ‚Üí "commandCompleted" ‚Üí Status Bars –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
5. Error Registry ‚Üí "errorRegistered" ‚Üí UI —Ä–µ–∞–≥–∏—Ä—É–µ—Ç

–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (–ö–†–ò–¢–ò–ß–ù–û):
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–†–ê–í–ò–õ–û: UI –ù–ò–ö–û–ì–î–ê –ù–ï –û–ë–©–ê–ï–¢–°–Ø –ù–ê–ü–†–Ø–ú–£–Æ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
Body.component.ts:
this.rightPanel.open(); // –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤

‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
Body.component.ts:
this.eventBus.publish({
type: 'openRightPanel',
payload: { panelId: 'errors' }
});

RightPanel.component.ts:
ngOnInit() {
this.eventBus.subscribe('openRightPanel', (event) => {
this.open(event.payload.panelId);
});
}

Context-driven Updates:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ CONTEXT MODEL (Single Source) ‚îÇ
‚îÇ ‚îÇ
‚îÇ currentForm: 'users' ‚îÇ
‚îÇ mode: 'edit' ‚îÇ
‚îÇ dirty: true ‚îÇ
‚îÇ valid: false ‚îÇ
‚îÇ errors: [...errorRegistry] ‚îÇ
‚îÇ permissions: {...} ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì ‚Üì ‚Üì ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Body ‚îÇ ‚îÇ Right ‚îÇ ‚îÇ Status ‚îÇ ‚îÇCommands ‚îÇ
‚îÇ ‚îÇ ‚îÇ Panel ‚îÇ ‚îÇ Bars ‚îÇ ‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    –ü–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è     –†–µ–∞–≥–∏—Ä—É—é—Ç        –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è
    –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è      –Ω–∞ Context       –ø–æ —Å–æ–±—ã—Ç–∏—è–º

–ß–ê–°–¢–¨ 3: CORE ARCHITECTURE (v1.0)
3.1 Context Model
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Context Model ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –ù–ï —Ö—Ä–∞–Ω–∏—Ç –±–∏–∑–Ω–µ—Å-–¥–∞–Ω–Ω—ã–µ, –∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Å–∏—Ç—É–∞—Ü–∏—é.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== CORE CONTEXT MODEL =====

/\*\*

- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
  \*/
  export interface AppContext {
  // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–π –æ–±–ª–∞—Å—Ç–∏
  activeArea: ContextArea;

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
dataState: ContextDataState;

// –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
operationalState: ContextOperationalState;

// –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
permissions: ContextPermissions;

// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata: ContextMetadata;
}

/\*\*

- –û–ø–∏—Å–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã
  \*/
  export interface ContextArea {
  // –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–∞–±–ª–∏—Ü–∞/—Ñ–æ—Ä–º–∞/–¥–∞—à–±–æ—Ä–¥)
  type: 'table' | 'form' | 'dashboard' | 'custom';

// –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—É—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'users', 'orders')
entityId: string;

// –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
mode: ContextMode;

// ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ (–¥–ª—è form –≤ —Ä–µ–∂–∏–º–µ edit/view)
recordId?: string;

// –í—ã–±—Ä–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–¥–ª—è bulk –æ–ø–µ—Ä–∞—Ü–∏–π)
selection?: ContextSelection;
}

export type ContextMode =
| 'view' // –ü—Ä–æ—Å–º–æ—Ç—Ä
| 'edit' // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
| 'create' // –°–æ–∑–¥–∞–Ω–∏–µ
| 'readonly'; // –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ (—Å–∏—Å—Ç–µ–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)

export interface ContextSelection {
// –ú–∞—Å—Å–∏–≤ ID –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
selectedIds: string[];

// –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
totalCount: number;

// –í—ã–±—Ä–∞–Ω—ã –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã?
allSelected: boolean;
}

/\*\*

- –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
  \*/
  export interface ContextDataState {
  // –ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è?
  dirty: boolean;

// –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
valid: boolean;

// –¢–µ–∫—É—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
operation?: DataOperation;

// –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
loading: boolean;

// –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
lastModified?: Date;
}

export type DataOperation =
| 'loading' // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
| 'saving' // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
| 'deleting' // –£–¥–∞–ª–µ–Ω–∏–µ
| 'exporting' // –≠–∫—Å–ø–æ—Ä—Ç
| 'importing'; // –ò–º–ø–æ—Ä—Ç

/\*\*

- –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  \*/
  export interface ContextOperationalState {
  // –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ?
  healthy: boolean;

// Backend –¥–æ—Å—Ç—É–ø–µ–Ω?
backendAvailable: boolean;

// –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–≥–ª–æ–±–∞–ª—å–Ω—ã–π)?
globalReadOnly: boolean;

// –¢–µ–∫—É—â–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
locks: ContextLock[];

// –§–æ–Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
backgroundTasks: BackgroundTask[];
}

export interface ContextLock {
id: string;
reason: string;
source: 'system' | 'user' | 'backend';
timestamp: Date;
}

export interface BackgroundTask {
id: string;
name: string;
progress: number; // 0-100
status: 'running' | 'completed' | 'failed';
}

/\*\*

- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  \*/
  export interface ContextPermissions {
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  user: {
  id: string;
  name: string;
  email: string;
  roles: string[]; // ['admin', 'editor']
  };

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
global: string[]; // ['admin.read', 'admin.write']

// –ü—Ä–∞–≤–∞ –Ω–∞ —Ç–µ–∫—É—â—É—é —Å—É—â–Ω–æ—Å—Ç—å
entity: EntityPermissions;
}

export interface EntityPermissions {
// –ù–∞–∑–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏
entityName: string;

// –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
operations: {
read: boolean;
create: boolean;
update: boolean;
delete: boolean;
export: boolean;
};

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –ø–æ–ª—è
fieldRestrictions?: Record<string, 'hidden' | 'readonly' | 'writable'>;
}

/\*\*

- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  \*/
  export interface ContextMetadata {
  // –í–µ—Ä—Å–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
  version: number;

// –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
createdAt: Date;

// –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
updatedAt: Date;

// –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
extra?: Record<string, any>;
}

Context API:
/\*\*

- –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  \*/
  export interface IContextService {
  // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
  getContext(): AppContext;

// –ü–æ–ª—É—á–∏—Ç—å Observable –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
context$: Observable<AppContext>;

// –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (–ø–æ–ª–Ω–æ—Å—Ç—å—é)
setContext(context: AppContext): void;

// –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç (—á–∞—Å—Ç–∏—á–Ω–æ)
updateContext(partial: Partial<AppContext>): void;

// –û–±–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –æ–±–ª–∞—Å—Ç—å
setActiveArea(area: Partial<ContextArea>): void;

// –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
updateDataState(state: Partial<ContextDataState>): void;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
hasPermission(permission: string): boolean;
hasAnyPermission(permissions: string[]): boolean;
hasRole(role: string): boolean;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏
addLock(lock: ContextLock): void;
removeLock(lockId: string): void;
isLocked(): boolean;

// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–æ–º
setSelection(selection: ContextSelection): void;
clearSelection(): void;

// –°–±—Ä–æ—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
reset(): void;
}

State Transitions (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ):
–ü–ï–†–ï–•–û–î–´ –°–û–°–¢–û–Ø–ù–ò–ô CONTEXT:

1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
   null ‚Üí { activeArea: null, mode: 'view' }

2. –ù–ê–í–ò–ì–ê–¶–ò–Ø –ù–ê –°–¢–†–ê–ù–ò–¶–£
   setActiveArea({ type: 'table', entityId: 'users' })
   ‚Üí Context –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   ‚Üí Event Bus: 'contextChanged'
   ‚Üí UI —Ä–µ–∞–≥–∏—Ä—É–µ—Ç

3. –û–¢–ö–†–´–¢–ò–ï –§–û–†–ú–´ –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø
   setActiveArea({ type: 'form', mode: 'edit', recordId: '123' })
   ‚Üí Context –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   ‚Üí Right Panel –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç properties
   ‚Üí Commands –ø—Ä–æ–≤–µ—Ä—è—é—Ç permissions

4. –ò–ó–ú–ï–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•
   updateDataState({ dirty: true })
   ‚Üí Form Status Bar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ù–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
   ‚Üí Command 'Save' —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è available

5. –°–û–•–†–ê–ù–ï–ù–ò–ï
   updateDataState({ operation: 'saving' })
   ‚Üí Command Pipeline –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
   ‚Üí Success: updateDataState({ dirty: false, operation: null })
   ‚Üí Error: updateDataState({ valid: false, operation: null })

6. –°–ò–°–¢–ï–ú–ù–ê–Ø –û–®–ò–ë–ö–ê (Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
   updateOperationalState({ backendAvailable: false })
   ‚Üí Global Status Bar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
   ‚Üí All Commands —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è disabled
   ‚Üí Context mode ‚Üí 'readonly'

7. –í–´–ë–û–† –°–¢–†–û–ö –í –¢–ê–ë–õ–ò–¶–ï
   setSelection({ selectedIds: ['1', '2'], totalCount: 100 })
   ‚Üí Right Panel Context Zone –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "2 selected"
   ‚Üí Bulk Actions —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è available

8. –ü–ï–†–ï–•–û–î –ù–ê –î–†–£–ì–£–Æ –°–¢–†–ê–ù–ò–¶–£
   reset() ‚Üí setActiveArea({ type: 'dashboard', entityId: 'main' })
   ‚Üí –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è
   ‚Üí Selection –æ—á–∏—â–∞–µ—Ç—Å—è
   ‚Üí Event Bus: 'contextChanged'

Context Integration Example:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –í –ö–û–ú–ü–û–ù–ï–ù–¢–ï =====

@Component({
selector: 'app-user-form',
standalone: true,
// ...
})
export class UserFormComponent implements OnInit, OnDestroy {
private readonly contextService = inject(ContextService);
private readonly commandService = inject(CommandService);
private readonly destroy$ = new Subject<void>();

canSave = signal(false);
isReadOnly = signal(false);

ngOnInit() {
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ñ–æ—Ä–º—ã
this.contextService.setActiveArea({
type: 'form',
entityId: 'users',
mode: 'edit',
recordId: this.userId
});

    // –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    this.contextService.context$
      .pipe(takeUntil(this.destroy$))
      .subscribe(context => {
        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        this.canSave.set(
          context.dataState.dirty &&
          context.dataState.valid &&
          context.permissions.entity.operations.update
        );

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º readonly
        this.isReadOnly.set(
          context.mode === 'readonly' ||
          context.operationalState.globalReadOnly
        );
      });

}

onFieldChange() {
// –ü–æ–º–µ—Ç–∏—Ç—å —Ñ–æ—Ä–º—É –∫–∞–∫ dirty
this.contextService.updateDataState({ dirty: true });
}

onSave() {
// –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ Command Service
this.commandService.execute('save', {
entityId: 'users',
data: this.formValue
});
}

ngOnDestroy() {
this.destroy$.next();
    this.destroy$.complete();

    // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–∏ —É—Ö–æ–¥–µ
    this.contextService.reset();

}
}

3.2 Error Registry
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Error Registry ‚Äî —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ. –û–Ω –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ —Å —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –µ–¥–∏–Ω—ã–π API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∏–º.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== ERROR REGISTRY CORE =====

/\*\*

- –£—Ä–æ–≤–µ–Ω—å –æ—à–∏–±–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
  \*/
  export type ErrorLevel =
  | 'global' // –°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞ (backend, network)
  | 'contextual' // –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º—ã/—Ç–∞–±–ª–∏—Ü—ã
  | 'local'; // –û—à–∏–±–∫–∞ –ø–æ–ª—è/—Å—Ç—Ä–æ–∫–∏

/\*\*

- –ò—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–∫–∏
  \*/
  export type ErrorSource =
  | 'http' // HTTP –∑–∞–ø—Ä–æ—Å
  | 'validation' // Client-side validation
  | 'runtime' // JavaScript runtime error
  | 'system' // –°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞
  | 'plugin'; // –û—à–∏–±–∫–∞ –ø–ª–∞–≥–∏–Ω–∞

/\*\*

- –°—Ç–∞—Ç—É—Å –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ—à–∏–±–∫–∏
  \*/
  export type ErrorLifecycle =
  | 'active' // –ê–∫—Ç–∏–≤–Ω–∞—è –æ—à–∏–±–∫–∞
  | 'resolved' // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
  | 'dismissed'; // –ó–∞–∫—Ä—ã—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

/\*\*

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞
  \*/
  export interface RegisteredError {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ—à–∏–±–∫–∏ –≤ Registry
  registryId: string;

// –£—Ä–æ–≤–µ–Ω—å –æ—à–∏–±–∫–∏
level: ErrorLevel;

// –ò—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–∫–∏
source: ErrorSource;

// –°–≤—è–∑–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
contextId?: string; // formId, tableId

// –°–≤—è–∑–∞–Ω–Ω–æ–µ –ø–æ–ª–µ/—Å—Ç—Ä–æ–∫–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
fieldId?: string;
rowId?: string;

// –°–∞–º–∞ –æ—à–∏–±–∫–∞ (–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã)
errorResponse: ErrorResponse;

// –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª
lifecycle: ErrorLifecycle;

// –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
registeredAt: Date;
resolvedAt?: Date;
dismissedAt?: Date;

// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata?: Record<string, any>;
}

/\*\*

- –§–∏–ª—å—Ç—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—à–∏–±–æ–∫
  \*/
  export interface ErrorFilter {
  level?: ErrorLevel | ErrorLevel[];
  source?: ErrorSource | ErrorSource[];
  lifecycle?: ErrorLifecycle | ErrorLifecycle[];
  contextId?: string;
  fieldId?: string;
  rowId?: string;
  }

/\*\*

- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—à–∏–±–æ–∫
  \*/
  export interface ErrorSummary {
  // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫
  total: number;

// –ü–æ —É—Ä–æ–≤–Ω—è–º
byLevel: {
global: number;
contextual: number;
local: number;
};

// –ü–æ severity (–∏–∑ ErrorResponse)
bySeverity: {
critical: number;
error: number;
warning: number;
info: number;
};

// –°–∞–º–∞—è –∫—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞
highestSeverity: 'critical' | 'error' | 'warning' | 'info' | null;
}

Error Registry API:
/\*\*

- –°–µ—Ä–≤–∏—Å Error Registry
  \*/
  export interface IErrorRegistry {
  // ===== –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø =====

/\*\*

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –æ—à–∏–±–∫—É
  \*/
  register(error: Omit<RegisteredError, 'registryId' | 'registeredAt'>): string;

/\*\*

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å HTTP –æ—à–∏–±–∫—É (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ErrorHandlingService)
  \*/
  registerHttpError(
  errorResponse: ErrorResponse,
  contextId?: string
  ): string;

/\*\*

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  \*/
  registerValidationError(
  fieldId: string,
  message: string,
  contextId: string
  ): string;

// ===== –ü–û–õ–£–ß–ï–ù–ò–ï =====

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –æ—à–∏–±–∫—É –ø–æ ID
  \*/
  get(registryId: string): RegisteredError | null;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º)
  \*/
  getAll(filter?: ErrorFilter): RegisteredError[];

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–≤–æ–¥–∫—É
  \*/
  getSummary(filter?: ErrorFilter): ErrorSummary;

/\*\*

- Observable –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
  \*/
  errors$: Observable<RegisteredError[]>;

/\*\*

- Observable —Å–≤–æ–¥–∫–∏
  \*/
  summary$: Observable<ErrorSummary>;

// ===== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ñ–ò–ó–ù–ï–ù–ù–´–ú –¶–ò–ö–õ–û–ú =====

/\*\*

- –ü–æ–º–µ—Ç–∏—Ç—å –æ—à–∏–±–∫—É –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é
  \*/
  resolve(registryId: string): void;

/\*\*

- –ó–∞–∫—Ä—ã—Ç—å –æ—à–∏–±–∫—É (dismiss)
  \*/
  dismiss(registryId: string): void;

/\*\*

- –û—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
  \*/
  clear(filter: ErrorFilter): void;

/\*\*

- –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  \*/
  clearContext(contextId: string): void;

/\*\*

- –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏
  \*/
  clearAll(): void;

// ===== –ü–û–ò–°–ö =====

/\*\*

- –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è
  \*/
  getFieldErrors(fieldId: string, contextId: string): RegisteredError[];

/\*\*

- –ù–∞–π—Ç–∏ –æ—à–∏–±–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã
  \*/
  getRowErrors(rowId: string, contextId: string): RegisteredError[];

/\*\*

- –ï—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ—à–∏–±–∫–∏?
  \*/
  hasErrors(filter?: ErrorFilter): boolean;

/\*\*

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫
  \*/
  count(filter?: ErrorFilter): number;
  }

Integration with ErrorHandlingService:
// ===== –†–ê–°–®–ò–†–ï–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û ErrorHandlingService =====

@Injectable({ providedIn: 'root' })
export class ErrorHandlingService implements OnDestroy {
// –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
private readonly message = inject(NzMessageService);
private readonly modalService = inject(NzModalService);
private readonly router = inject(Router);
private readonly logger = inject(LoggingService);

// –ù–û–í–´–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò
private readonly errorRegistry = inject(ErrorRegistry);
private readonly contextService = inject(ContextService);
private readonly eventBus = inject(EventBus);

handleError(
errorResponse: ErrorResponse,
options?: Partial<ErrorDisplayConfig>
): void {
try {
this.validateErrorResponse(errorResponse);
this.logError(errorResponse);

      // === –ù–û–í–û–ï: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Error Registry ===
      const registryId = this.registerInRegistry(errorResponse);

      const config = {
        ...this.getErrorConfig(errorResponse.status),
        ...options,
      };

      // –°—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (Toast/Modal)
      this.displayError(errorResponse, config);

      // === –ù–û–í–û–ï: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è ===
      this.eventBus.publish({
        type: 'errorRegistered',
        payload: {
          registryId,
          errorResponse,
          level: this.determineErrorLevel(errorResponse)
        }
      });

    } catch (error) {
      this.logger.error(this.context, '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–∫–∏', {
        originalError: errorResponse,
        processingError: error,
      });
      this.fallbackErrorHandling();
    }

}

private registerInRegistry(errorResponse: ErrorResponse): string {
const level = this.determineErrorLevel(errorResponse);
const context = this.contextService.getContext();

    return this.errorRegistry.register({
      level,
      source: 'http',
      errorResponse,
      contextId: context.activeArea?.entityId,
      lifecycle: 'active',
      metadata: {
        url: errorResponse.requestUrl,
        timestamp: errorResponse.timestamp,
      }
    });

}

private determineErrorLevel(err: ErrorResponse): ErrorLevel {
// Global: —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
if ([500, 502, 503, 504, 0].includes(err.status)) {
return 'global';
}

    // Contextual: –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã/—Ç–∞–±–ª–∏—Ü—ã
    if ([422, 400, 409].includes(err.status)) {
      return 'contextual';
    }

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–∂–µ contextual (401, 403, 404)
    return 'contextual';

}
}

Error Registry Example:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –í FORM STATUS BAR =====

@Component({
selector: 'app-form-status-bar',
standalone: true,
template: `    <div class="form-status-bar" [class.is-error]="hasErrors()">
      @if (summary(); as s) {
        <div class="status-indicator" (click)="scrollToErrors()">
          <span class="status-icon">{{ getIcon(s) }}</span>
          <span class="status-text">{{ getText(s) }}</span>
        </div>
      }
    </div>
 `
})
export class FormStatusBarComponent implements OnInit {
private readonly errorRegistry = inject(ErrorRegistry);
private readonly contextService = inject(ContextService);

summary = signal<ErrorSummary | null>(null);

ngOnInit() {
const context = this.contextService.getContext();
const contextId = context.activeArea?.entityId;

    // –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    this.errorRegistry.summary$
      .pipe(
        map(summary => this.filterByContext(summary, contextId)),
        takeUntilDestroyed()
      )
      .subscribe(summary => {
        this.summary.set(summary);
      });

}

hasErrors(): boolean {
return (this.summary()?.total ?? 0) > 0;
}

getIcon(summary: ErrorSummary): string {
if (summary.bySeverity.critical > 0) return '‚ùå';
if (summary.bySeverity.error > 0) return '‚ö†Ô∏è';
if (summary.bySeverity.warning > 0) return '‚ö°';
return '‚úÖ';
}

getText(summary: ErrorSummary): string {
const total = summary.total;
if (total === 0) return '–ù–µ—Ç –æ—à–∏–±–æ–∫';
if (total === 1) return '1 –æ—à–∏–±–∫–∞';
if (total < 5) return `${total} –æ—à–∏–±–∫–∏`;
return `${total} –æ—à–∏–±–æ–∫`;
}

scrollToErrors() {
// –°–∫—Ä–æ–ª–ª–∏—Ç—å –∫ Error Block
document.querySelector('.error-block')?.scrollIntoView({
behavior: 'smooth'
});
}
}

3.3 Event Bus
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Event Bus ‚Äî —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è —Å–ª–∞–±—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω publish/subscribe.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== EVENT BUS CORE =====

/\*\*

- –ë–∞–∑–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
  \*/
  export interface AppEvent<T = any> {
  // –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
  type: string;

// –ü–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
payload: T;

// –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
timestamp: Date;

// –ò—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
source?: string;

// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata?: Record<string, any>;
}

/\*\*

- –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ
  \*/
  export type EventType =
  // Context Events
  | 'contextChanged'
  | 'contextReset'
  | 'modeChanged'
  | 'selectionChanged'
  | 'dirtyStateChanged'

// Command Events
| 'commandRequested'
| 'commandStarted'
| 'commandCompleted'
| 'commandFailed'

// Error Events
| 'errorRegistered'
| 'errorResolved'
| 'errorCleared'

// Navigation Events
| 'navigationStarted'
| 'navigationCompleted'
| 'submenuOpened'
| 'submenuClosed'

// Right Panel Events
| 'rightPanelOpened'
| 'rightPanelClosed'
| 'rightPanelChanged'

// System Events
| 'backendAvailable'
| 'backendUnavailable'
| 'readOnlyEnabled'
| 'readOnlyDisabled'
| 'pluginLoaded'
| 'pluginUnloaded';

/\*\*

- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
  \*/
  export type EventHandler<T = any> = (event: AppEvent<T>) => void;

/\*\*

- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
  \*/
  export interface EventSubscription {
  // –û—Ç–ø–∏—Å–∞—Ç—å—Å—è
  unsubscribe(): void;
  }

Event Bus API:
/\*\*

- –°–µ—Ä–≤–∏—Å Event Bus
  \*/
  export interface IEventBus {
  /\*\*
  - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
    \*/
    publish<T = any>(event: Omit<AppEvent<T>, 'timestamp'>): void;

/\*\*

- –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
  \*/
  subscribe<T = any>(
  type: EventType | EventType[],
  handler: EventHandler<T>
  ): EventSubscription;

/\*\*

- –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ (RxJS Observable)
  \*/
  on<T = any>(type: EventType | EventType[]): Observable<AppEvent<T>>;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
  \*/
  getHistory(type?: EventType): AppEvent[];

/\*\*

- –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  \*/
  clearHistory(): void;
  }

Event Bus Implementation:
@Injectable({ providedIn: 'root' })
export class EventBus implements IEventBus {
private readonly events$ = new Subject<AppEvent>();
private readonly history: AppEvent[] = [];
private readonly maxHistorySize = 100;

publish<T = any>(event: Omit<AppEvent<T>, 'timestamp'>): void {
const fullEvent: AppEvent<T> = {
...event,
timestamp: new Date()
};

    // –î–æ–±–∞–≤–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
    this.history.push(fullEvent);
    if (this.history.length > this.maxHistorySize) {
      this.history.shift();
    }

    // –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
    this.events$.next(fullEvent);

}

subscribe<T = any>(
type: EventType | EventType[],
handler: EventHandler<T>
): EventSubscription {
const types = Array.isArray(type) ? type : [type];

    const subscription = this.events$
      .pipe(
        filter(event => types.includes(event.type as EventType))
      )
      .subscribe(handler);

    return {
      unsubscribe: () => subscription.unsubscribe()
    };

}

on<T = any>(type: EventType | EventType[]): Observable<AppEvent<T>> {
const types = Array.isArray(type) ? type : [type];

    return this.events$.pipe(
      filter(event => types.includes(event.type as EventType))
    ) as Observable<AppEvent<T>>;

}

getHistory(type?: EventType): AppEvent[] {
if (!type) return [...this.history];
return this.history.filter(e => e.type === type);
}

clearHistory(): void {
this.history.length = 0;
}
}

Event Bus Examples:
// ===== –ü–†–ò–ú–ï–† 1: Body –ø—É–±–ª–∏–∫—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã =====

@Component({
selector: 'app-user-form'
})
export class UserFormComponent {
private readonly eventBus = inject(EventBus);

onFieldChange() {
// –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
this.eventBus.publish({
type: 'dirtyStateChanged',
payload: { dirty: true, formId: 'users' },
source: 'UserFormComponent'
});
}
}

// ===== –ü–†–ò–ú–ï–† 2: Form Status Bar –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è =====

@Component({
selector: 'app-form-status-bar'
})
export class FormStatusBarComponent implements OnInit {
private readonly eventBus = inject(EventBus);

isDirty = signal(false);

ngOnInit() {
// –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è dirty state
this.eventBus.on('dirtyStateChanged')
.pipe(takeUntilDestroyed())
.subscribe(event => {
this.isDirty.set(event.payload.dirty);
});
}
}

// ===== –ü–†–ò–ú–ï–† 3: –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –Ω–∞ –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ =====

// Form Status Bar
this.eventBus.subscribe('errorRegistered', (event) => {
this.updateErrorCount();
});

// Error Block
this.eventBus.subscribe('errorRegistered', (event) => {
this.showError(event.payload);
});

// Right Panel
this.eventBus.subscribe('errorRegistered', (event) => {
if (event.payload.level === 'critical') {
this.openErrorsPanel();
}
});

// Global Status Bar
this.eventBus.subscribe('errorRegistered', (event) => {
if (event.payload.level === 'global') {
this.showGlobalIndicator();
}
});

3.4 Command Service
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Command Service ‚Äî —ç—Ç–æ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (–∫–æ–º–∞–Ω–¥) –≤ —Å–∏—Å—Ç–µ–º–µ. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–≤—è–∑—å —Å Event Bus.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== COMMAND SERVICE CORE =====

/\*\*

- –ë–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
  \*/
  export interface Command<T = any, R = any> {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'save', 'delete')
  id: string;

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥—ã
payload: T;

// –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
result?: R;

// –û—à–∏–±–∫–∞ (–µ—Å–ª–∏ –±—ã–ª–∞)
error?: Error;

// –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
status: CommandStatus;

// –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏
requestedAt: Date;
startedAt?: Date;
completedAt?: Date;
}

export type CommandStatus =
| 'pending' // –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
| 'validating' // –í–∞–ª–∏–¥–∞—Ü–∏—è
| 'executing' // –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
| 'completed' // –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
| 'failed'; // –û—à–∏–±–∫–∞

/\*\*

- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã
  \*/
  export type CommandHandler<T = any, R = any> = (
  payload: T,
  context: AppContext
  ) => Observable<R> | Promise<R>;

/\*\*

- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
  \*/
  export interface CommandResult<R = any> {
  success: boolean;
  data?: R;
  error?: Error;
  }

Command Service API:
/\*\*

- –°–µ—Ä–≤–∏—Å –∫–æ–º–∞–Ω–¥ (v1.0 - —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ pipeline)
  \*/
  export interface ICommandService {
  /\*\*
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
    \*/
    register<T = any, R = any>(
    commandId: string,
    handler: CommandHandler<T, R>
    ): void;

/\*\*

- –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
  \*/
  execute<T = any, R = any>(
  commandId: string,
  payload: T
  ): Observable<CommandResult<R>>;

/\*\*

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã
  \*/
  isAvailable(commandId: string): boolean;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
  \*/
  getRegisteredCommands(): string[];
  }

Command Service Implementation:
@Injectable({ providedIn: 'root' })
export class CommandService implements ICommandService {
private readonly contextService = inject(ContextService);
private readonly eventBus = inject(EventBus);
private readonly logger = inject(LoggingService);

private readonly handlers = new Map<string, CommandHandler>();
private readonly context = 'CommandService';

register<T = any, R = any>(
commandId: string,
handler: CommandHandler<T, R>
): void {
if (this.handlers.has(commandId)) {
this.logger.warn(this.context, `Command ${commandId} already registered`);
return;
}

    this.handlers.set(commandId, handler);
    this.logger.info(this.context, `Command registered: ${commandId}`);

}

execute<T = any, R = any>(
commandId: string,
payload: T
): Observable<CommandResult<R>> {
// 1. –í–∞–ª–∏–¥–∞—Ü–∏—è
const handler = this.handlers.get(commandId);
if (!handler) {
return throwError(() => new Error(`Command ${commandId} not registered`));
}

    if (!this.isAvailable(commandId)) {
      return throwError(() => new Error(`Command ${commandId} not available`));
    }

    // 2. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
    const context = this.contextService.getContext();

    // 3. –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –Ω–∞—á–∞–ª–∞
    this.eventBus.publish({
      type: 'commandRequested',
      payload: { commandId, payload },
      source: 'CommandService'
    });

    // 4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
    const result$ = from(handler(payload, context)).pipe(
      map(data => ({ success: true, data } as CommandResult<R>)),
      catchError(error => {
        this.eventBus.publish({
          type: 'commandFailed',
          payload: { commandId, error },
          source: 'CommandService'
        });
        return of({ success: false, error } as CommandResult<R>);
      }),
      tap(result => {
        if (result.success) {
          this.eventBus.publish({
            type: 'commandCompleted',
            payload: { commandId, result: result.data },
            source: 'CommandService'
          });
        }
      })
    );

    return result$;

}

isAvailable(commandId: string): boolean {
const context = this.contextService.getContext();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
    if (context.operationalState.locks.length > 0) {
      return false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ readonly
    if (context.mode === 'readonly') {
      return false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ backend
    if (!context.operationalState.backendAvailable) {
      return false;
    }

    return true;

}

getRegisteredCommands(): string[] {
return Array.from(this.handlers.keys());
}
}

Command Examples:
// ===== –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ö–û–ú–ê–ù–î =====

@Injectable({ providedIn: 'root' })
export class CommandsInitializer {
private readonly commandService = inject(CommandService);
private readonly httpClient = inject(HttpClient);
private readonly contextService = inject(ContextService);
private readonly errorRegistry = inject(ErrorRegistry);

init() {
// –ö–æ–º–∞–Ω–¥–∞: Save
this.commandService.register('save', (payload, context) => {
const url = `/api/${context.activeArea.entityId}`;

      return this.httpClient.post(url, payload).pipe(
        tap(() => {
          // –£—Å–ø–µ—Ö ‚Üí –æ—á–∏—Å—Ç–∏—Ç—å dirty
          this.contextService.updateDataState({
            dirty: false,
            operation: null
          });
        }),
        catchError(error => {
          // –û—à–∏–±–∫–∞ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ HttpErrorInterceptor
          return throwError(() => error);
        })
      );
    });

    // –ö–æ–º–∞–Ω–¥–∞: Delete
    this.commandService.register('delete', (payload: { id: string }, context) => {
      const url = `/api/${context.activeArea.entityId}/${payload.id}`;

      return this.httpClient.delete(url);
    });

    // –ö–æ–º–∞–Ω–¥–∞: Refresh
    this.commandService.register('refresh', (payload, context) => {
      const url = `/api/${context.activeArea.entityId}`;

      return this.httpClient.get(url);
    });

    // –ö–æ–º–∞–Ω–¥–∞: Export
    this.commandService.register('export', (payload: { format: 'csv' | 'xlsx' }, context) => {
      const url = `/api/${context.activeArea.entityId}/export?format=${payload.format}`;

      return this.httpClient.get(url, { responseType: 'blob' });
    });

}
}

// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í –ö–û–ú–ü–û–ù–ï–ù–¢–ê–• =====

@Component({
selector: 'app-user-form'
})
export class UserFormComponent {
private readonly commandService = inject(CommandService);

canSave = computed(() => this.commandService.isAvailable('save'));

onSave() {
this.commandService.execute('save', this.formValue)
.subscribe({
next: (result) => {
if (result.success) {
console.log('Saved successfully');
} else {
console.error('Save failed', result.error);
}
}
});
}
}

3.5 Icon Provider
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Icon Provider ‚Äî —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∫–æ–Ω–∫–∞–º–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (ng-zorro, SVG, custom) —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π API.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== ICON PROVIDER CORE =====

/\*\*

- –¢–∏–ø –∏–∫–æ–Ω–∫–∏
  \*/
  export type IconType =
  | 'nz-icon' // ng-zorro icon
  | 'svg' // SVG inline/sprite
  | 'custom'; // –ë—É–¥—É—â–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

/\*\*

- –û–ø–∏—Å–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏
  \*/
  export interface IconDescriptor {
  // –¢–∏–ø –∏–∫–æ–Ω–∫–∏
  type: IconType;

// –ö–ª—é—á/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∫–æ–Ω–∫–∏
key: string;

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞)
options?: IconOptions;
}

export interface IconOptions {
// –î–ª—è ng-zorro
theme?: 'fill' | 'outline' | 'twotone';

// –î–ª—è SVG
svgPath?: string;
viewBox?: string;

// –û–±—â–∏–µ
size?: string; // '16px', '24px'
color?: string;
className?: string;
}

/\*\*

- –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏
  \*/
  export interface ResolvedIcon {
  type: IconType;
  content: string; // HTML content –∏–ª–∏ ng-zorro name
  className?: string;
  }

Icon Provider API:
/\*\*

- –°–µ—Ä–≤–∏—Å Icon Provider (v1.0 - —Ç–æ–ª—å–∫–æ ng-zorro)
  \*/
  export interface IIconProvider {
  /\*\*
  - –ü–æ–ª—É—á–∏—Ç—å –∏–∫–æ–Ω–∫—É –ø–æ –∫–ª—é—á—É
    \*/
    resolve(iconKey: string): ResolvedIcon;

/\*\*

- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫—É
  \*/
  register(iconKey: string, descriptor: IconDescriptor): void;

/\*\*

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–∫–æ–Ω–∫–∏
  \*/
  has(iconKey: string): boolean;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å fallback –∏–∫–æ–Ω–∫—É
  \*/
  getFallback(): ResolvedIcon;
  }

Icon Provider Implementation (v1.0):
@Injectable({ providedIn: 'root' })
export class IconProvider implements IIconProvider {
private readonly registry = new Map<string, IconDescriptor>();
private readonly logger = inject(LoggingService);
private readonly context = 'IconProvider';

constructor() {
this.registerDefaults();
}

resolve(iconKey: string): ResolvedIcon {
const descriptor = this.registry.get(iconKey);

    if (!descriptor) {
      this.logger.warn(this.context, `Icon ${iconKey} not found, using fallback`);
      return this.getFallback();
    }

    // v1.0 - —Ç–æ–ª—å–∫–æ ng-zorro
    if (descriptor.type === 'nz-icon') {
      return {
        type: 'nz-icon',
        content: descriptor.key,
        className: descriptor.options?.className
      };
    }

    return this.getFallback();

}

register(iconKey: string, descriptor: IconDescriptor): void {
this.registry.set(iconKey, descriptor);
}

has(iconKey: string): boolean {
return this.registry.has(iconKey);
}

getFallback(): ResolvedIcon {
return {
type: 'nz-icon',
content: 'question-circle',
className: 'icon-fallback'
};
}

private registerDefaults() {
// –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏–∫–æ–Ω–∫–∏
this.register('icon-save', { type: 'nz-icon', key: 'save' });
this.register('icon-delete', { type: 'nz-icon', key: 'delete' });
this.register('icon-refresh', { type: 'nz-icon', key: 'reload' });
this.register('icon-export', { type: 'nz-icon', key: 'download' });
this.register('icon-edit', { type: 'nz-icon', key: 'edit' });
this.register('icon-view', { type: 'nz-icon', key: 'eye' });
this.register('icon-close', { type: 'nz-icon', key: 'close' });
this.register('icon-settings', { type: 'nz-icon', key: 'setting' });

    // –û—à–∏–±–∫–∏
    this.register('icon-error', { type: 'nz-icon', key: 'close-circle', options: { theme: 'fill' } });
    this.register('icon-warning', { type: 'nz-icon', key: 'warning', options: { theme: 'fill' } });
    this.register('icon-success', { type: 'nz-icon', key: 'check-circle', options: { theme: 'fill' } });
    this.register('icon-info', { type: 'nz-icon', key: 'info-circle', options: { theme: 'fill' } });

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    this.register('icon-menu', { type: 'nz-icon', key: 'menu' });
    this.register('icon-home', { type: 'nz-icon', key: 'home' });
    this.register('icon-back', { type: 'nz-icon', key: 'arrow-left' });
    this.register('icon-forward', { type: 'nz-icon', key: 'arrow-right' });
    this.register('icon-up', { type: 'nz-icon', key: 'arrow-up' });
    this.register('icon-down', { type: 'nz-icon', key: 'arrow-down' });

}
}

// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í –ö–û–ú–ü–û–ù–ï–ù–¢–ê–• =====

@Component({
selector: 'app-button',
template: `    @if (icon(); as iconData) {
      @if (iconData.type === 'nz-icon') {
        <span nz-icon [nzType]="iconData.content" [class]="iconData.className"></span>
      }
    }
    <span class="btn-text"><ng-content></ng-content></span>
 `
})
export class ButtonComponent {
private readonly iconProvider = inject(IconProvider);

@Input() iconKey?: string;

icon = computed(() => {
if (!this.iconKey) return null;
return this.iconProvider.resolve(this.iconKey);
});
}

–ß–ê–°–¢–¨ 4: LAYOUT –ö–û–ú–ü–û–ù–ï–ù–¢–´
4.1 Header
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Header ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Ö–Ω—è—è –ø–æ–ª–æ—Å–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. Header –ù–ï —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –ù–ï –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å Header:
‚úÖ –ß–¢–û –î–ï–õ–ê–ï–¢:
‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ª–æ–≥–æ—Ç–∏–ø/–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
‚Ä¢ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –º–µ–Ω—é (Profile/Logout)
‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (Settings, Help)

‚ùå –ß–¢–û –ù–ï –î–ï–õ–ê–ï–¢:
‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ layout (—Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ sidebar)
‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
‚Ä¢ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚Ä¢ Breadcrumbs
‚Ä¢ –°—Ç–∞—Ç—É—Å—ã
‚Ä¢ –û—à–∏–±–∫–∏
‚Ä¢ –í–∞–ª–∏–¥–∞—Ü–∏—è
‚Ä¢ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== HEADER INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Header
  \*/
  export interface HeaderConfig {
  branding: HeaderBranding;
  actions: HeaderAction[];
  user?: HeaderUser;
  state?: HeaderState;
  }

/\*\*

- –ë—Ä–µ–Ω–¥–∏–Ω–≥ (–ª–æ–≥–æ—Ç–∏–ø/–Ω–∞–∑–≤–∞–Ω–∏–µ)
  \*/
  export interface HeaderBranding {
  // URL –ª–æ–≥–æ—Ç–∏–ø–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  logoUrl?: string;

// –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
title: string;

// –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
subtitle?: string;

// –°—Å—ã–ª–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –ª–æ–≥–æ—Ç–∏–ø
href?: string;
}

/\*\*

- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ Header
  \*/
  export interface HeaderAction {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–µ–π—Å—Ç–≤–∏—è
  id: string;

// –ò–∫–æ–Ω–∫–∞ (—á–µ—Ä–µ–∑ Icon Provider)
icon?: string;

// –¢–µ–∫—Å—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –º–æ–∂–µ—Ç –±—ã—Ç—å icon-only)
label?: string;

// –û—Ç–∫–ª—é—á–µ–Ω–æ?
disabled?: boolean;

// –í–∏–¥–∏–º–æ?
visible?: boolean;

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
handler: () => void;

// Tooltip
tooltip?: string;
}

/\*\*

- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
  \*/
  export interface HeaderUser {
  // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  id: string;

// –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
name: string;

// URL –∞–≤–∞—Ç–∞—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
avatarUrl?: string;

// –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
role?: string;

// Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
email?: string;
}

/\*\*

- –°–æ—Å—Ç–æ—è–Ω–∏–µ Header (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ)
  \*/
  export interface HeaderState {
  // –†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è (–≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è)
  readonly?: boolean;

// –û—Ç–∫–ª—é—á–µ–Ω (–≤—Å—è –ø–∞–Ω–µ–ª—å)
disabled?: boolean;
}

/\*\*

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –º–µ–Ω—é
  \*/
  export interface UserMenuItem {
  id: string;
  label: string;
  icon?: string;
  handler: () => void;
  divider?: boolean; // –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ—Å–ª–µ –ø—É–Ω–∫—Ç–∞
  }

Header Component:
// ===== HEADER COMPONENT =====

@Component({
selector: 'app-admin-header',
standalone: true,
imports: [CommonModule, NzIconModule, NzDropDownModule, NzAvatarModule],
template: `
<header class="admin-header" [class.is-readonly]="config().state?.readonly">
<!-- Branding -->
<div class="header-brand">
@if (config().branding.logoUrl) {
<img
[src]="config().branding.logoUrl"
alt="Logo"
class="header-logo"
/>
}
<div class="header-titles">
<h1 class="header-title">{{ config().branding.title }}</h1>
@if (config().branding.subtitle) {
<span class="header-subtitle">{{ config().branding.subtitle }}</span>
}
</div>
</div>

      <!-- Spacer -->
      <div class="header-spacer"></div>

      <!-- Actions -->
      <div class="header-actions">
        @for (action of visibleActions(); track action.id) {
          <button
            class="header-action-btn"
            [disabled]="action.disabled"
            [nz-tooltip]="action.tooltip"
            (click)="action.handler()"
          >
            @if (action.icon) {
              <app-icon [iconKey]="action.icon"></app-icon>
            }
            @if (action.label) {
              <span class="action-label">{{ action.label }}</span>
            }
          </button>
        }
      </div>

      <!-- User Menu -->
      @if (config().user; as user) {
        <div class="header-user" nz-dropdown [nzDropdownMenu]="userMenu">
          <nz-avatar
            [nzSrc]="user.avatarUrl"
            [nzText]="getInitials(user.name)"
            class="user-avatar"
          ></nz-avatar>
          <div class="user-info">
            <span class="user-name">{{ user.name }}</span>
            @if (user.role) {
              <span class="user-role">{{ user.role }}</span>
            }
          </div>
        </div>

        <nz-dropdown-menu #userMenu="nzDropdownMenu">
          <ul nz-menu>
            @for (item of userMenuItems(); track item.id) {
              @if (item.divider) {
                <li nz-menu-divider></li>
              }
              <li nz-menu-item (click)="item.handler()">
                @if (item.icon) {
                  <app-icon [iconKey]="item.icon"></app-icon>
                }
                {{ item.label }}
              </li>
            }
          </ul>
        </nz-dropdown-menu>
      }
    </header>

`,
  styles: [`
.admin-header {
display: flex;
align-items: center;
height: 64px;
padding: 0 24px;
background: #fff;
border-bottom: 1px solid #e8e8e8;

      &.is-readonly::after {
        content: 'üîí';
        margin-left: 8px;
      }
    }

    .header-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-logo {
      height: 40px;
      width: auto;
    }

    .header-titles {
      display: flex;
      flex-direction: column;
    }

    .header-title {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      line-height: 1.2;
    }

    .header-subtitle {
      font-size: 12px;
      color: #8c8c8c;
    }

    .header-spacer {
      flex: 1;
    }

    .header-actions {
      display: flex;
      gap: 8px;
      margin-right: 16px;
    }

    .header-action-btn {
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 8px 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      border-radius: 4px;
      transition: background 0.2s;

      &:hover:not(:disabled) {
        background: #f5f5f5;
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    }

    .header-user {
      display: flex;
      align-items: center;
      gap: 12px;
      cursor: pointer;
      padding: 8px;
      border-radius: 4px;
      transition: background 0.2s;

      &:hover {
        background: #f5f5f5;
      }
    }

    .user-info {
      display: flex;
      flex-direction: column;
    }

    .user-name {
      font-weight: 500;
      font-size: 14px;
    }

    .user-role {
      font-size: 12px;
      color: #8c8c8c;
    }

`]
})
export class AdminHeaderComponent {
private readonly router = inject(Router);
private readonly authService = inject(AuthService);

config = input.required<HeaderConfig>();

visibleActions = computed(() =>
this.config().actions.filter(a => a.visible !== false)
);

userMenuItems = computed<UserMenuItem[]>(() => [
{
id: 'profile',
label: '–ü—Ä–æ—Ñ–∏–ª—å',
icon: 'icon-user',
handler: () => this.router.navigate(['/profile'])
},
{
id: 'settings',
label: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
icon: 'icon-settings',
handler: () => this.router.navigate(['/settings'])
},
{
id: 'divider',
label: '',
handler: () => {},
divider: true
},
{
id: 'logout',
label: '–í—ã–π—Ç–∏',
icon: 'icon-logout',
handler: () => this.authService.logout()
}
]);

getInitials(name: string): string {
return name
.split(' ')
.map(part => part[0])
.join('')
.toUpperCase()
.slice(0, 2);
}
}

Header Configuration Example:
// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í APP =====

@Component({
selector: 'app-admin-layout',
template: `    <app-admin-header [config]="headerConfig()"></app-admin-header>
    <!-- ... rest of layout ... -->
 `
})
export class AdminLayoutComponent {
private readonly router = inject(Router);
private readonly contextService = inject(ContextService);

headerConfig = computed<HeaderConfig>(() => {
const context = this.contextService.getContext();

    return {
      branding: {
        logoUrl: '/assets/logo.svg',
        title: 'Admin Panel',
        subtitle: 'Enterprise CMS'
      },
      actions: [
        {
          id: 'refresh',
          icon: 'icon-refresh',
          tooltip: '–û–±–Ω–æ–≤–∏—Ç—å',
          handler: () => window.location.reload()
        },
        {
          id: 'help',
          icon: 'icon-help',
          tooltip: '–°–ø—Ä–∞–≤–∫–∞',
          handler: () => this.router.navigate(['/help'])
        },
        {
          id: 'settings',
          icon: 'icon-settings',
          tooltip: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
          handler: () => this.router.navigate(['/settings'])
        }
      ],
      user: {
        id: context.permissions.user.id,
        name: context.permissions.user.name,
        email: context.permissions.user.email,
        role: context.permissions.user.roles[0],
        avatarUrl: '/assets/avatar.jpg'
      },
      state: {
        readonly: context.mode === 'readonly'
      }
    };

});
}

4.2 Left Sidebar (Navigation)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Left Sidebar ‚Äî —ç—Ç–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –º–µ–Ω—é.
–°–æ—Å—Ç–æ—è–Ω–∏—è Sidebar:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–û–°–¢–û–Ø–ù–ò–ï ‚îÇ –û–ü–ò–°–ê–ù–ò–ï ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Collapsed ‚îÇ –¢–æ–ª—å–∫–æ –∏–∫–æ–Ω–∫–∏ ‚îÇ
‚îÇ ‚îÇ –¢–µ–∫—Å—Ç —Å–∫—Ä—ã—Ç ‚îÇ
‚îÇ ‚îÇ –ü–æ–¥–º–µ–Ω—é –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Expanded ‚îÇ –ò–∫–æ–Ω–∫–∏ + —Ç–µ–∫—Å—Ç ‚îÇ
‚îÇ ‚îÇ –ü–æ–¥–º–µ–Ω—é –∑–∞–∫—Ä—ã—Ç—ã ‚îÇ
‚îÇ ‚îÇ –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–∫—Ä—ã—Ç–∞ ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Expanded + Submenu ‚îÇ Sidebar —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç ‚îÇ
‚îÇ ‚îÇ –û–¥–Ω–æ –ø–æ–¥–º–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ ‚îÇ
‚îÇ ‚îÇ –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∏–¥–Ω–∞ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== LEFT SIDEBAR INTERFACES =====

/\*\*

- –°–æ—Å—Ç–æ—è–Ω–∏–µ Sidebar
  \*/
  export type SidebarState = 'collapsed' | 'expanded';

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Sidebar
  \*/
  export interface SidebarConfig {
  // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  state: SidebarState;

// –ì—Ä—É–ø–ø—ã –º–µ–Ω—é
menuGroups: MenuGroup[];

// ID –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–¥–º–µ–Ω—é (–µ—Å–ª–∏ –µ—Å—Ç—å)
openSubmenuId?: string;

// ID –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
activeMenuId?: string;
}

/\*\*

- –ì—Ä—É–ø–ø–∞ –º–µ–Ω—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è)
  \*/
  export interface MenuGroup {
  id: string;
  title?: string; // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥—Ä—É–ø–ø—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  items: MenuItem[];
  }

/\*\*

- –ü—É–Ω–∫—Ç –º–µ–Ω—é
  \*/
  export interface MenuItem {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  id: string;

// –ò–∫–æ–Ω–∫–∞ (—á–µ—Ä–µ–∑ Icon Provider)
icon: string;

// –ù–∞–∑–≤–∞–Ω–∏–µ
label: string;

// –¢–∏–ø –ø—É–Ω–∫—Ç–∞
type: 'link' | 'submenu';

// –î–ª—è type='link': –º–∞—Ä—à—Ä—É—Ç
route?: string;

// –î–ª—è type='submenu': –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
submenu?: SubMenuItem[];

// –°–æ—Å—Ç–æ—è–Ω–∏—è
disabled?: boolean;
visible?: boolean;

// Badge (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
badge?: MenuBadge;
}

/\*\*

- –ü—É–Ω–∫—Ç –ø–æ–¥–º–µ–Ω—é
  \*/
  export interface SubMenuItem {
  id: string;
  label: string;
  route: string;
  icon?: string;
  disabled?: boolean;
  visible?: boolean;
  badge?: MenuBadge;
  }

/\*\*

- Badge –¥–ª—è –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
  \*/
  export interface MenuBadge {
  value: number | string;
  intent?: 'default' | 'info' | 'warning' | 'error';
  }

/\*\*

- –°–æ–±—ã—Ç–∏—è Sidebar
  \*/
  export interface SidebarEvents {
  onToggle: (state: SidebarState) => void;
  onMenuClick: (menuId: string) => void;
  onSubmenuClick: (menuId: string, submenuId: string) => void;
  onCloseSubmenu: () => void;
  }

Sidebar State Machine:
–°–û–°–¢–û–Ø–ù–ò–Ø –ò –ü–ï–†–ï–•–û–î–´:

1. COLLAPSED ‚Üí EXPANDED
   –¢—Ä–∏–≥–≥–µ—Ä: –ö–ª–∏–∫ –Ω–∞ toggle button
   –î–µ–π—Å—Ç–≤–∏–µ:

   - state = 'expanded'
   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç –ø—É–Ω–∫—Ç–æ–≤
   - –†–∞–∑—Ä–µ—à–∏—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–¥–º–µ–Ω—é

2. EXPANDED ‚Üí COLLAPSED
   –¢—Ä–∏–≥–≥–µ—Ä: –ö–ª–∏–∫ –Ω–∞ toggle button
   –î–µ–π—Å—Ç–≤–∏–µ:

   - state = 'collapsed'
   - –°–∫—Ä—ã—Ç—å —Ç–µ–∫—Å—Ç
   - –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –ø–æ–¥–º–µ–Ω—é
   - openSubmenuId = null

3. –ö–õ–ò–ö –ü–û –ü–£–ù–ö–¢–£ –ë–ï–ó –ü–û–î–ú–ï–ù–Æ (type='link')
   –£—Å–ª–æ–≤–∏–µ: state = 'expanded'
   –î–µ–π—Å—Ç–≤–∏–µ:

   - –ó–∞–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â–µ–µ –ø–æ–¥–º–µ–Ω—é (–µ—Å–ª–∏ –±—ã–ª–æ)
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ route
   - activeMenuId = menuId
   - Event: 'navigationStarted'

4. –ö–õ–ò–ö –ü–û –ü–£–ù–ö–¢–£ –° –ü–û–î–ú–ï–ù–Æ (type='submenu')
   –£—Å–ª–æ–≤–∏–µ: state = 'expanded'
   –î–µ–π—Å—Ç–≤–∏–µ:

   - –ï—Å–ª–∏ –ø–æ–¥–º–µ–Ω—é –∑–∞–∫—Ä—ã—Ç–æ:
     - –ó–∞–∫—Ä—ã—Ç—å –¥—Ä—É–≥–æ–µ –ø–æ–¥–º–µ–Ω—é (–µ—Å–ª–∏ –±—ã–ª–æ)
     - openSubmenuId = menuId
     - –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–∫—Ä—ã—Ç—å –ø–æ–¥–º–µ–Ω—é"
   - –ï—Å–ª–∏ –ø–æ–¥–º–µ–Ω—é —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ:
     - openSubmenuId = null
     - –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–∫—Ä—ã—Ç—å –ø–æ–¥–º–µ–Ω—é"

5. –ö–õ–ò–ö –ü–û –ü–£–ù–ö–¢–£ –ü–û–î–ú–ï–ù–Æ
   –î–µ–π—Å—Ç–≤–∏–µ:

   - –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ route
   - –ü–æ–¥–º–µ–Ω—é –æ—Å—Ç–∞—ë—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º
   - activeMenuId = parentMenuId
   - Event: 'navigationStarted'

6. –ö–õ–ò–ö –ù–ê "–ó–ê–ö–†–´–¢–¨ –ü–û–î–ú–ï–ù–Æ"
   –î–µ–π—Å—Ç–≤–∏–µ:
   - openSubmenuId = null
   - –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É
   - Sidebar –æ—Å—Ç–∞—ë—Ç—Å—è expanded
   - activeMenuId —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

Sidebar Component:
// ===== LEFT SIDEBAR COMPONENT =====

@Component({
selector: 'app-left-sidebar',
standalone: true,
imports: [CommonModule, RouterModule, NzIconModule, NzBadgeModule],
template: `
<aside
class="left-sidebar"
[class.is-collapsed]="state() === 'collapsed'"
[class.is-expanded]="state() === 'expanded'" >
<!-- Toggle Button -->
<button
class="sidebar-toggle"
(click)="toggleSidebar()" >
<app-icon [iconKey]="state() === 'collapsed' ? 'icon-menu-unfold' : 'icon-menu-fold'"></app-icon>
</button>

      <!-- Close Submenu Button -->
      @if (showCloseSubmenuButton()) {
        <button
          class="sidebar-close-submenu"
          (click)="closeSubmenu()"
        >
          <app-icon iconKey="icon-close"></app-icon>
          <span class="close-submenu-text">–ó–∞–∫—Ä—ã—Ç—å –ø–æ–¥–º–µ–Ω—é</span>
        </button>
        <div class="sidebar-divider"></div>
      }

      <!-- Menu Groups -->
      <nav class="sidebar-nav">
        @for (group of config().menuGroups; track group.id) {
          <div class="sidebar-group">
            @if (group.title && state() === 'expanded') {
              <div class="sidebar-group-title">{{ group.title }}</div>
            }

            @for (item of visibleItems(group.items); track item.id) {
              <!-- Menu Item -->
              <div
                class="sidebar-item"
                [class.is-active]="isActive(item)"
                [class.is-disabled]="item.disabled"
                [class.has-submenu]="item.type === 'submenu'"
                [class.is-open]="isSubmenuOpen(item.id)"
              >
                <button
                  class="sidebar-item-btn"
                  [disabled]="item.disabled"
                  (click)="handleMenuClick(item)"
                >
                  <app-icon [iconKey]="item.icon" class="sidebar-item-icon"></app-icon>
                  @if (state() === 'expanded') {
                    <span class="sidebar-item-label">{{ item.label }}</span>
                  }
                  @if (item.badge) {
                    <nz-badge
                      [nzCount]="item.badge.value"
                      [nzStyle]="getBadgeStyle(item.badge.intent)"
                      class="sidebar-item-badge"
                    ></nz-badge>
                  }
                  @if (item.type === 'submenu' && state() === 'expanded') {
                    <app-icon
                      [iconKey]="isSubmenuOpen(item.id) ? 'icon-down' : 'icon-right'"
                      class="sidebar-item-arrow"
                    ></app-icon>
                  }
                </button>

                <!-- Submenu -->
                @if (item.type === 'submenu' && isSubmenuOpen(item.id) && item.submenu) {
                  <div class="sidebar-submenu">
                    @for (subitem of visibleItems(item.submenu); track subitem.id) {

                        class="sidebar-subitem"
                        [routerLink]="subitem.route"
                        routerLinkActive="is-active"
                        [class.is-disabled]="subitem.disabled"
                      >
                        @if (subitem.icon) {
                          <app-icon [iconKey]="subitem.icon" class="sidebar-subitem-icon"></app-icon>
                        }
                        <span class="sidebar-subitem-label">{{ subitem.label }}</span>
                        @if (subitem.badge) {
                          <nz-badge
                            [nzCount]="subitem.badge.value"
                            [nzStyle]="getBadgeStyle(subitem.badge.intent)"
                          ></nz-badge>
                        }
                      </a>
                    }
                  </div>
                }
              </div>
            }
          </div>
        }
      </nav>
    </aside>

`,
  styles: [`
.left-sidebar {
width: 64px; /_ collapsed _/
height: 100%;
background: #001529;
transition: width 0.2s;
overflow-x: hidden;
display: flex;
flex-direction: column;

      &.is-expanded {
        width: 240px;
      }
    }

    .sidebar-toggle {
      height: 48px;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.65);
      cursor: pointer;
      transition: color 0.2s;

      &:hover {
        color: #fff;
      }
    }

    .sidebar-close-submenu {
      display: flex;
      align-items: center;
      gap: 8px;
      width: 100%;
      height: 40px;
      padding: 0 16px;
      border: none;
      background: #002140;
      color: rgba(255, 255, 255, 0.85);
      cursor: pointer;
      transition: background 0.2s;

      &:hover {
        background: #003a66;
      }
    }

    .sidebar-divider {
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
      margin: 8px 0;
    }

    .sidebar-nav {
      flex: 1;
      overflow-y: auto;
      padding: 8px 0;
    }

    .sidebar-group {
      margin-bottom: 16px;
    }

    .sidebar-group-title {
      padding: 8px 16px;
      font-size: 12px;
      color: rgba(255, 255, 255, 0.45);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .sidebar-item {
      position: relative;

      &.is-active > .sidebar-item-btn {
        background: #1890ff;
        color: #fff;
      }

      &.is-disabled {
        opacity: 0.5;
        pointer-events: none;
      }
    }

    .sidebar-item-btn {
      display: flex;
      align-items: center;
      gap: 12px;
      width: 100%;
      height: 48px;
      padding: 0 16px;
      border: none;
      background: transparent;
      color: rgba(255, 255, 255, 0.65);
      cursor: pointer;
      transition: all 0.2s;

      &:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.1);
        color: #fff;
      }
    }

    .sidebar-item-icon {
      font-size: 18px;
      flex-shrink: 0;
    }

    .sidebar-item-label {
      flex: 1;
      text-align: left;
      white-space: nowrap;
    }

    .sidebar-item-arrow {
      font-size: 12px;
      transition: transform 0.2s;
    }

    .sidebar-submenu {
      background: #000c17;
      padding: 4px 0;
    }

    .sidebar-subitem {
      display: flex;
      align-items: center;
      gap: 8px;
      height: 40px;
      padding: 0 16px 0 48px;
      color: rgba(255, 255, 255, 0.65);
      text-decoration: none;
      transition: all 0.2s;

      &:hover:not(.is-disabled) {
        background: rgba(255, 255, 255, 0.05);
        color: #fff;
      }

      &.is-active {
        background: #1890ff;
        color: #fff;
      }

      &.is-disabled {
        opacity: 0.5;
        pointer-events: none;
      }
    }

    .sidebar-subitem-icon {
      font-size: 14px;
    }

    .sidebar-subitem-label {
      flex: 1;
      font-size: 14px;
    }

`]
})
export class LeftSidebarComponent {
private readonly router = inject(Router);
private readonly eventBus = inject(EventBus);

config = input.required<SidebarConfig>();

state = signal<SidebarState>('expanded');
openSubmenuId = signal<string | null>(null);

showCloseSubmenuButton = computed(() =>
this.state() === 'expanded' && this.openSubmenuId() !== null
);

ngOnInit() {
this.state.set(this.config().state);
this.openSubmenuId.set(this.config().openSubmenuId ?? null);
}

toggleSidebar() {
const newState = this.state() === 'collapsed' ? 'expanded' : 'collapsed';
this.state.set(newState);

    if (newState === 'collapsed') {
      this.openSubmenuId.set(null);
    }

    this.eventBus.publish({
      type: 'sidebarToggled',
      payload: { state: newState }
    });

}

handleMenuClick(item: MenuItem) {
if (item.disabled) return;

    if (item.type === 'link') {
      // –ó–∞–∫—Ä—ã—Ç—å –ø–æ–¥–º–µ–Ω—é –∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç
      this.openSubmenuId.set(null);
      this.router.navigate([item.route]);

      this.eventBus.publish({
        type: 'navigationStarted',
        payload: { route: item.route, menuId: item.id }
      });
    } else if (item.type === 'submenu') {
      // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –ø–æ–¥–º–µ–Ω—é
      if (this.openSubmenuId() === item.id) {
        this.openSubmenuId.set(null);
      } else {
        this.openSubmenuId.set(item.id);
      }

      this.eventBus.publish({
        type: 'submenuToggled',
        payload: { menuId: item.id, open: this.openSubmenuId() === item.id }
      });
    }

}

closeSubmenu() {
this.openSubmenuId.set(null);

    this.eventBus.publish({
      type: 'submenuClosed',
      payload: {}
    });

}

isSubmenuOpen(menuId: string): boolean {
return this.openSubmenuId() === menuId;
}

isActive(item: MenuItem): boolean {
if (item.type === 'link') {
return this.router.url === item.route;
}

    // –ï—Å–ª–∏ —ç—Ç–æ submenu, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —Ö–æ—Ç—å –æ–¥–∏–Ω subitem
    if (item.type === 'submenu' && item.submenu) {
      return item.submenu.some(sub => this.router.url === sub.route);
    }

    return false;

}

visibleItems<T extends MenuItem | SubMenuItem>(items: T[]): T[] {
return items.filter(item => item.visible !== false);
}

getBadgeStyle(intent?: 'default' | 'info' | 'warning' | 'error') {
const colors = {
default: { backgroundColor: '#d9d9d9' },
info: { backgroundColor: '#1890ff' },
warning: { backgroundColor: '#faad14' },
error: { backgroundColor: '#ff4d4f' }
};
return colors[intent || 'default'];
}
}

Sidebar Configuration Example:
// ===== –ü–†–ò–ú–ï–† –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò SIDEBAR =====

const sidebarConfig: SidebarConfig = {
state: 'expanded',
menuGroups: [
{
id: 'main',
title: '–û—Å–Ω–æ–≤–Ω–æ–µ',
items: [
{
id: 'dashboard',
icon: 'icon-dashboard',
label: '–î–∞—à–±–æ—Ä–¥',
type: 'link',
route: '/dashboard'
},
{
id: 'analytics',
icon: 'icon-chart',
label: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞',
type: 'link',
route: '/analytics'
}
]
},
{
id: 'admin',
title: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ',
items: [
{
id: 'users',
icon: 'icon-user',
label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
type: 'submenu',
submenu: [
{
id: 'users-list',
label: '–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
route: '/admin/users'
},
{
id: 'users-roles',
label: '–†–æ–ª–∏',
route: '/admin/users/roles'
},
{
id: 'users-permissions',
label: '–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞',
route: '/admin/users/permissions'
}
]
},
{
id: 'content',
icon: 'icon-file',
label: '–ö–æ–Ω—Ç–µ–Ω—Ç',
type: 'submenu',
submenu: [
{
id: 'content-pages',
label: '–°—Ç—Ä–∞–Ω–∏—Ü—ã',
route: '/admin/content/pages'
},
{
id: 'content-posts',
label: '–ü—É–±–ª–∏–∫–∞—Ü–∏–∏',
route: '/admin/content/posts',
badge: { value: 5, intent: 'warning' }
},
{
id: 'content-media',
label: '–ú–µ–¥–∏–∞',
route: '/admin/content/media'
}
]
},
{
id: 'settings',
icon: 'icon-settings',
label: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
type: 'link',
route: '/admin/settings'
}
]
}
]
};

4.3 Right Panel (–ì–ò–ë–†–ò–î)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Right Panel ‚Äî —ç—Ç–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –≥–∏–±—Ä–∏–¥–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞ + —Å—Ç–∞—Ç–∏—á–Ω–∞—è –∑–æ–Ω–∞ –º–µ–Ω—é.
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Right Panel:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ RIGHT PANEL (–ì–ò–ë–†–ò–î) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ
‚îÇ [–ö–û–ù–¢–ï–ö–°–¢–ù–ê–Ø –ó–û–ù–ê] ‚Üê –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Selected Row Properties ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ ID: 123 ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Status: Active ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Created: 2024-01-15 ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Modified: 2024-12-15 ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ [Quick Actions] ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Edit ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Duplicate ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Delete ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ [–ú–ï–ù–Æ –ó–û–ù–ê] ‚Üê –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è ‚îÇ
‚îÇ ‚Ä¢ Actions [>] ‚îÇ
‚îÇ ‚Ä¢ Errors [>] ‚îÇ
‚îÇ ‚Ä¢ History [>] ‚îÇ
‚îÇ ‚Ä¢ Debug [>] ‚îÇ
‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–û–í–ï–î–ï–ù–ò–ï:

- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞: –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ selection
- –ú–µ–Ω—é –∑–æ–Ω–∞: –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞
- –ö–ª–∏–∫ –Ω–∞ –º–µ–Ω—é ‚Üí SubMenu –≤–Ω—É—Ç—Ä–∏ –∑–æ–Ω—ã
- –ù–µ—Ç selection ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–∫—Ä—ã—Ç

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== RIGHT PANEL INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Right Panel
  \*/
  export interface RightPanelConfig {
  // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞–Ω–µ–ª–∏
  state: RightPanelState;

// –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è)
contextZone?: ContextZone;

// –ú–µ–Ω—é –∑–æ–Ω–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
menuZone: MenuZone;
}

/\*\*

- –°–æ—Å—Ç–æ—è–Ω–∏–µ Right Panel
  \*/
  export interface RightPanelState {
  // –í–∏–¥–∏–º–æ—Å—Ç—å –ø–∞–Ω–µ–ª–∏
  visible: boolean;

// –®–∏—Ä–∏–Ω–∞ –ø–∞–Ω–µ–ª–∏ (px)
width?: number;

// ID –∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –≤ –º–µ–Ω—é –∑–æ–Ω–µ (–µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞)
activePanelId?: string;
}

/\*\*

- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞ (–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ selection)
  \*/
  export interface ContextZone {
  // –¢–∏–ø –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  type: 'row-properties' | 'item-details' | 'custom';

// –ó–∞–≥–æ–ª–æ–≤–æ–∫
title: string;

// –°–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
properties?: ContextProperty[];

// –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
quickActions?: QuickAction[];

// –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–¥–ª—è custom type)
customContent?: any;
}

export interface ContextProperty {
label: string;
value: string | number | Date;
type?: 'text' | 'date' | 'number' | 'link';
href?: string; // –î–ª—è type='link'
}

export interface QuickAction {
id: string;
label: string;
icon?: string;
handler: () => void;
disabled?: boolean;
}

/\*\*

- –ú–µ–Ω—é –∑–æ–Ω–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
  \*/
  export interface MenuZone {
  // –ü–∞–Ω–µ–ª–∏ –º–µ–Ω—é
  panels: RightPanel[];
  }

/\*\*

- –ü–∞–Ω–µ–ª—å –≤ –º–µ–Ω—é –∑–æ–Ω–µ
  \*/
  export interface RightPanel {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–∞–Ω–µ–ª–∏
  id: string;

// –¢–∏–ø –ø–∞–Ω–µ–ª–∏
type: RightPanelType;

// –ù–∞–∑–≤–∞–Ω–∏–µ –ø–∞–Ω–µ–ª–∏
title: string;

// –ò–∫–æ–Ω–∫–∞
icon?: string;

// –í–∏–¥–∏–º–æ—Å—Ç—å
visible?: boolean;

// –ü–æ–¥–º–µ–Ω—é (—Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ)
subMenu?: RightSubMenu;
}

export type RightPanelType =
| 'actions' // –î–µ–π—Å—Ç–≤–∏—è
| 'errors' // –û—à–∏–±–∫–∏
| 'history' // –ò—Å—Ç–æ—Ä–∏—è
| 'debug' // –û—Ç–ª–∞–¥–∫–∞
| 'info' // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
| 'custom'; // –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–∏–ø

/\*\*

- –ü–æ–¥–º–µ–Ω—é –ø–∞–Ω–µ–ª–∏
  \*/
  export interface RightSubMenu {
  // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ–¥–º–µ–Ω—é
  header?: RightSubMenuHeader;

// –°–µ–∫—Ü–∏–∏ –ø–æ–¥–º–µ–Ω—é
sections: RightSubMenuSection[];
}

export interface RightSubMenuHeader {
title: string;
closable: boolean;
}

export interface RightSubMenuSection {
id: string;
title?: string;
items: RightSubMenuItem[];
}

/\*\*

- –≠–ª–µ–º–µ–Ω—Ç –ø–æ–¥–º–µ–Ω—é
  \*/
  export interface RightSubMenuItem {
  id: string;
  label: string;
  value?: string;
  level?: 'info' | 'warning' | 'error';
  expandable?: boolean;
  expanded?: boolean;
  meta?: Record<string, any>;
  handler?: () => void;
  }

Right Panel Component:
// ===== RIGHT PANEL COMPONENT =====

@Component({
selector: 'app-right-panel',
standalone: true,
imports: [CommonModule, NzCollapseModule, NzIconModule],
template: `
<aside
class="right-panel"
[class.is-visible]="config().state.visible"
[style.width.px]="config().state.width || 320" >
<!-- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
@if (config().contextZone; as context) {
<div class="context-zone">
<div class="context-header">
<h3 class="context-title">{{ context.title }}</h3>
</div>

          <!-- Properties -->
          @if (context.properties && context.properties.length > 0) {
            <div class="context-properties">
              @for (prop of context.properties; track prop.label) {
                <div class="context-property">
                  <span class="property-label">{{ prop.label }}</span>
                  @switch (prop.type) {
                    @case ('link') {
                      <a [href]="prop.href" class="property-value is-link">
                        {{ prop.value }}
                      </a>
                    }
                    @case ('date') {
                      <span class="property-value">
                        {{ prop.value | date:'dd.MM.yyyy HH:mm' }}
                      </span>
                    }
                    @default {
                      <span class="property-value">{{ prop.value }}</span>
                    }
                  }
                </div>
              }
            </div>
          }

          <!-- Quick Actions -->
          @if (context.quickActions && context.quickActions.length > 0) {
            <div class="context-actions">
              <div class="actions-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
              @for (action of context.quickActions; track action.id) {
                <button
                  class="action-btn"
                  [disabled]="action.disabled"
                  (click)="action.handler()"
                >
                  @if (action.icon) {
                    <app-icon [iconKey]="action.icon"></app-icon>
                  }
                  <span>{{ action.label }}</span>
                </button>
              }
            </div>
          }
        </div>

        <div class="zone-divider"></div>
      }

      <!-- –ú–µ–Ω—é –∑–æ–Ω–∞ (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞) -->
      <div class="menu-zone">
        @for (panel of visiblePanels(); track panel.id) {
          <div
            class="menu-panel"
            [class.is-active]="isActive(panel.id)"
          >
            <button
              class="panel-trigger"
              (click)="togglePanel(panel.id)"
            >
              @if (panel.icon) {
                <app-icon [iconKey]="panel.icon" class="panel-icon"></app-icon>
              }
              <span class="panel-title">{{ panel.title }}</span>
              <app-icon
                [iconKey]="isActive(panel.id) ? 'icon-down' : 'icon-right'"
                class="panel-arrow"
              ></app-icon>
            </button>

            <!-- SubMenu -->
            @if (isActive(panel.id) && panel.subMenu) {
              <div class="panel-submenu">
                @if (panel.subMenu.header) {
                  <div class="submenu-header">
                    <span class="submenu-title">{{ panel.subMenu.header.title }}</span>
                    @if (panel.subMenu.header.closable) {
                      <button
                        class="submenu-close"
                        (click)="closePanel()"
                      >
                        <app-icon iconKey="icon-close"></app-icon>
                      </button>
                    }
                  </div>
                }

                @for (section of panel.subMenu.sections; track section.id) {
                  <div class="submenu-section">
                    @if (section.title) {
                      <div class="section-title">{{ section.title }}</div>
                    }

                    @for (item of section.items; track item.id) {
                      <div
                        class="submenu-item"
                        [class.is-warning]="item.level === 'warning'"
                        [class.is-error]="item.level === 'error'"
                        [class.is-clickable]="item.handler"
                        (click)="item.handler && item.handler()"
                      >
                        <div class="item-label">{{ item.label }}</div>
                        @if (item.value) {
                          <div class="item-value">{{ item.value }}</div>
                        }
                      </div>
                    }
                  </div>
                }
              </div>
            }
          </div>
        }
      </div>
    </aside>

`,
  styles: [`
.right-panel {
height: 100%;
background: #fafafa;
border-left: 1px solid #e8e8e8;
display: flex;
flex-direction: column;
overflow-y: auto;
transform: translateX(100%);
transition: transform 0.3s;

      &.is-visible {
        transform: translateX(0);
      }
    }

    /* –ö–û–ù–¢–ï–ö–°–¢–ù–ê–Ø –ó–û–ù–ê */
    .context-zone {
      background: #fff;
      padding: 16px;
      border-bottom: 1px solid #e8e8e8;
    }

    .context-header {
      margin-bottom: 16px;
    }

    .context-title {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
    }

    .context-properties {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .context-property {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .property-label {
      font-size: 12px;
      color: #8c8c8c;
      font-weight: 500;
    }

    .property-value {
      font-size: 14px;
      color: #262626;

      &.is-link {
        color: #1890ff;
        text-decoration: none;

        &:hover {
          text-decoration: underline;
        }
      }
    }

    .context-actions {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid #f0f0f0;
    }

    .actions-title {
      font-size: 12px;
      color: #8c8c8c;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .action-btn {
      display: flex;
      align-items: center;
      gap: 8px;
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d9d9d9;
      background: #fff;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
      margin-bottom: 8px;

      &:hover:not(:disabled) {
        border-color: #1890ff;
        color: #1890ff;
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }
    }

    .zone-divider {
      height: 8px;
      background: #f0f0f0;
    }

    /* –ú–ï–ù–Æ –ó–û–ù–ê */
    .menu-zone {
      flex: 1;
      padding: 8px;
    }

    .menu-panel {
      margin-bottom: 4px;
      background: #fff;
      border-radius: 4px;
      overflow: hidden;

      &.is-active {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }
    }

    .panel-trigger {
      display: flex;
      align-items: center;
      gap: 8px;
      width: 100%;
      padding: 12px;
      border: none;
      background: transparent;
      cursor: pointer;
      transition: background 0.2s;

      &:hover {
        background: #f5f5f5;
      }
    }

    .panel-icon {
      font-size: 16px;
    }

    .panel-title {
      flex: 1;
      text-align: left;
      font-weight: 500;
    }

    .panel-arrow {
      font-size: 12px;
      transition: transform 0.2s;
    }

    .panel-submenu {
      border-top: 1px solid #f0f0f0;
      padding: 12px;
    }

    .submenu-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid #f0f0f0;
    }

    .submenu-title {
      font-weight: 600;
      font-size: 14px;
    }

    .submenu-close {
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 4px;
      color: #8c8c8c;

      &:hover {
        color: #262626;
      }
    }

    .submenu-section {
      margin-bottom: 16px;

      &:last-child {
        margin-bottom: 0;
      }
    }

    .section-title {
      font-size: 12px;
      color: #8c8c8c;
      font-weight: 500;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .submenu-item {
      padding: 8px 12px;
      margin-bottom: 4px;
      border-radius: 4px;
      background: #fafafa;

      &.is-clickable {
        cursor: pointer;
        transition: background 0.2s;

        &:hover {
          background: #f0f0f0;
        }
      }

      &.is-warning {
        background: #fffbe6;
        border-left: 3px solid #faad14;
      }

      &.is-error {
        background: #fff2f0;
        border-left: 3px solid #ff4d4f;
      }
    }

    .item-label {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .item-value {
      font-size: 12px;
      color: #8c8c8c;
    }

`]
})
export class RightPanelComponent {
private readonly eventBus = inject(EventBus);

config = input.required<RightPanelConfig>();

activePanelId = signal<string | null>(null);

ngOnInit() {
this.activePanelId.set(this.config().state.activePanelId ?? null);
}

visiblePanels() {
return this.config().menuZone.panels.filter(p => p.visible !== false);
}

isActive(panelId: string): boolean {
return this.activePanelId() === panelId;
}

togglePanel(panelId: string) {
if (this.activePanelId() === panelId) {
this.activePanelId.set(null);
this.eventBus.publish({
type: 'rightPanelClosed',
payload: { panelId }
});
} else {
this.activePanelId.set(panelId);
this.eventBus.publish({
type: 'rightPanelOpened',
payload: { panelId }
});
}
}

closePanel() {
this.activePanelId.set(null);
this.eventBus.publish({
type: 'rightPanelClosed',
payload: {}
});
}
}

Right Panel Configuration (TypeScript):
// ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø RIGHT PANEL =====

export const rightPanelConfig: RightPanelConfig = {
state: {
visible: true,
width: 320
},

// –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∑–æ–Ω–∞ (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è - –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ selection)
contextZone: {
type: 'row-properties',
title: '–í—ã–±—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ #123',
properties: [
{ label: 'ID', value: '123', type: 'text' },
{ label: '–°—Ç–∞—Ç—É—Å', value: 'Active', type: 'text' },
{ label: '–°–æ–∑–¥–∞–Ω–æ', value: new Date('2024-01-15'), type: 'date' },
{ label: '–ò–∑–º–µ–Ω–µ–Ω–æ', value: new Date('2024-12-15'), type: 'date' },
{
label: '–ê–≤—Ç–æ—Ä',
value: 'John Doe',
type: 'link',
href: '/users/john-doe'
}
],
quickActions: [
{
id: 'edit',
label: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å',
icon: 'icon-edit',
handler: () => console.log('Edit')
},
{
id: 'duplicate',
label: '–î—É–±–ª–∏—Ä–æ–≤–∞—Ç—å',
icon: 'icon-copy',
handler: () => console.log('Duplicate')
},
{
id: 'delete',
label: '–£–¥–∞–ª–∏—Ç—å',
icon: 'icon-delete',
handler: () => console.log('Delete'),
disabled: false
}
]
},

// –ú–µ–Ω—é –∑–æ–Ω–∞ (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è)
menuZone: {
panels: [
{
id: 'actions',
type: 'actions',
title: '–î–µ–π—Å—Ç–≤–∏—è',
icon: 'icon-thunderbolt',
subMenu: {
header: {
title: '–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è',
closable: true
},
sections: [
{
id: 'primary',
title: '–û—Å–Ω–æ–≤–Ω—ã–µ',
items: [
{
id: 'save',
label: '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
handler: () => console.log('Save')
},
{
id: 'export',
label: '–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',
handler: () => console.log('Export')
}
]
},
{
id: 'bulk',
title: '–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏',
items: [
{
id: 'bulk-delete',
label: '–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ',
level: 'warning',
handler: () => console.log('Bulk delete')
}
]
}
]
}
},
{
id: 'errors',
type: 'errors',
title: '–û—à–∏–±–∫–∏',
icon: 'icon-warning',
subMenu: {
header: {
title: '–û—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã',
closable: true
},
sections: [
{
id: 'validation',
title: '–í–∞–ª–∏–¥–∞—Ü–∏—è',
items: [
{
id: 'email-error',
label: 'Email',
value: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email',
level: 'error'
},
{
id: 'name-warning',
label: '–ò–º—è',
value: '–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è',
level: 'warning'
}
]
}
]
}
},
{
id: 'history',
type: 'history',
title: '–ò—Å—Ç–æ—Ä–∏—è',
icon: 'icon-history',
subMenu: {
sections: [
{
id: 'recent',
items: [
{
id: 'h1',
label: '–û–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª–µ "–°—Ç–∞—Ç—É—Å"',
value: '15.12.2024 14:30'
},
{
id: 'h2',
label: '–°–æ–∑–¥–∞–Ω–∞ –∑–∞–ø–∏—Å—å',
value: '15.01.2024 10:00'
}
]
}
]
}
},
{
id: 'debug',
type: 'debug',
title: '–û—Ç–ª–∞–¥–∫–∞',
icon: 'icon-bug',
visible: true, // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ dev mode
subMenu: {
sections: [
{
id: 'technical',
title: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
items: [
{
id: 'correlation',
label: 'Correlation ID',
value: 'err_1234567890_abc123'
},
{
id: 'timestamp',
label: 'Timestamp',
value: new Date().toISOString()
}
]
}
]
}
}
]
}
};

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 4.4 Footer, 4.5 Global Status Bar?
–ß–ê–°–¢–¨ 4: LAYOUT –ö–û–ú–ü–û–ù–ï–ù–¢–´ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
4.4 Footer
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Footer ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∏–∂–Ω—è—è –ø–æ–ª–æ—Å–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ. Footer –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –ù–ï —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º.
–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å Footer:
‚úÖ –ß–¢–û –î–ï–õ–ê–ï–¢:
‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç copyright –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
‚Ä¢ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–ø—Ä–∞–≤–∫—É/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

‚ùå –ß–¢–û –ù–ï –î–ï–õ–ê–ï–¢:
‚Ä¢ –°—Ç–∞—Ç—É—Å—ã —Å–∏—Å—Ç–µ–º—ã (—ç—Ç–æ Global Status Bar)
‚Ä¢ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (—ç—Ç–æ Page Footer –≤ Body)
‚Ä¢ –î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –¥–∞–Ω–Ω—ã–º–∏
‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º
‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== FOOTER INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Footer
  \*/
  export interface FooterConfig {
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –±–ª–æ–∫–∏
  info: FooterInfo;

// –°—Å—ã–ª–∫–∏
links: FooterLink[];

// –í–∏–¥–∏–º–æ—Å—Ç—å
visible?: boolean;
}

/\*\*

- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Footer
  \*/
  export interface FooterInfo {
  // –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  version?: string;

// Copyright —Ç–µ–∫—Å—Ç
copyright?: string;

// –ì–æ–¥ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π)
year?: number;

// –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
company?: string;

// –ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
customText?: string;
}

/\*\*

- –°—Å—ã–ª–∫–∞ –≤ Footer
  \*/
  export interface FooterLink {
  id: string;
  label: string;
  href?: string;
  handler?: () => void;
  external?: boolean; // –û—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
  icon?: string;
  }

Footer Component:
// ===== FOOTER COMPONENT =====

@Component({
selector: 'app-admin-footer',
standalone: true,
imports: [CommonModule, NzIconModule],
template: `
@if (config().visible !== false) {
<footer class="admin-footer">
<!-- Info Section -->
<div class="footer-info">
@if (config().info.version) {
<span class="footer-version">
v{{ config().info.version }}
</span>
}

          @if (config().info.copyright || config().info.company) {
            <span class="footer-copyright">
              ¬© {{ config().info.year || currentYear }}
              {{ config().info.company || config().info.copyright }}
            </span>
          }

          @if (config().info.customText) {
            <span class="footer-custom">
              {{ config().info.customText }}
            </span>
          }
        </div>

        <!-- Links Section -->
        @if (config().links.length > 0) {
          <div class="footer-links">
            @for (link of config().links; track link.id; let last = $last) {
              @if (link.href) {

                  [href]="link.href"
                  [target]="link.external ? '_blank' : '_self'"
                  [rel]="link.external ? 'noopener noreferrer' : ''"
                  class="footer-link"
                >
                  @if (link.icon) {
                    <app-icon [iconKey]="link.icon"></app-icon>
                  }
                  {{ link.label }}
                  @if (link.external) {
                    <app-icon iconKey="icon-external"></app-icon>
                  }
                </a>
              } @else {
                <button
                  class="footer-link"
                  (click)="link.handler && link.handler()"
                >
                  @if (link.icon) {
                    <app-icon [iconKey]="link.icon"></app-icon>
                  }
                  {{ link.label }}
                </button>
              }

              @if (!last) {
                <span class="footer-separator">|</span>
              }
            }
          </div>
        }
      </footer>
    }

`,
  styles: [`
.admin-footer {
display: flex;
align-items: center;
justify-content: space-between;
height: 48px;
padding: 0 24px;
background: #fafafa;
border-top: 1px solid #e8e8e8;
font-size: 12px;
color: #8c8c8c;
}

    .footer-info {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .footer-version {
      padding: 2px 8px;
      background: #f0f0f0;
      border-radius: 4px;
      font-family: monospace;
      font-weight: 500;
    }

    .footer-copyright,
    .footer-custom {
      white-space: nowrap;
    }

    .footer-links {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .footer-link {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      color: #8c8c8c;
      text-decoration: none;
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 4px 8px;
      border-radius: 4px;
      transition: all 0.2s;

      &:hover {
        color: #1890ff;
        background: #f0f0f0;
      }
    }

    .footer-separator {
      color: #d9d9d9;
    }

    @media (max-width: 768px) {
      .admin-footer {
        flex-direction: column;
        height: auto;
        padding: 12px 16px;
        gap: 8px;
      }

      .footer-info,
      .footer-links {
        width: 100%;
        justify-content: center;
      }
    }

`]
})
export class AdminFooterComponent {
config = input.required<FooterConfig>();

currentYear = new Date().getFullYear();
}

Footer Configuration Example:
// ===== –ü–†–ò–ú–ï–† –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò FOOTER =====

const footerConfig: FooterConfig = {
visible: true,
info: {
version: '1.0.0',
company: 'Your Company Name',
year: 2025,
customText: 'Enterprise Admin Panel'
},
links: [
{
id: 'help',
label: '–°–ø—Ä–∞–≤–∫–∞',
icon: 'icon-question',
href: '/help'
},
{
id: 'docs',
label: '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è',
icon: 'icon-book',
href: 'https://docs.example.com',
external: true
},
{
id: 'privacy',
label: '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
href: '/privacy'
},
{
id: 'terms',
label: '–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è',
href: '/terms'
},
{
id: 'support',
label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞',
icon: 'icon-support',
handler: () => {
// –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ —á–∞—Ç
console.log('Open support');
}
}
]
};

4.5 Global Status Bar
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Global Status Bar ‚Äî —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ª–æ–π —Å–∏—Å—Ç–µ–º—ã, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å—ã –∏–∑ Context Model –∏ Error Registry.
–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å Global Status Bar:
‚úÖ –ß–¢–û –ü–û–ö–ê–ó–´–í–ê–ï–¢:
‚Ä¢ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (backend –¥–æ—Å—Ç—É–ø–µ–Ω/–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
‚Ä¢ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ, —Å–µ—Ç–µ–≤—ã–µ)
‚Ä¢ –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (read-only, maintenance)
‚Ä¢ –§–æ–Ω–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è, —ç–∫—Å–ø–æ—Ä—Ç)

‚ùå –ß–¢–û –ù–ï –ü–û–ö–ê–ó–´–í–ê–ï–¢:
‚Ä¢ –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã (—ç—Ç–æ Form Status Bar)
‚Ä¢ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –æ—à–∏–±–æ–∫ (—ç—Ç–æ Error Block)
‚Ä¢ –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã (—ç—Ç–æ Form Status Bar)
‚Ä¢ –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GLOBAL STATUS BAR FLOW ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Context Model Error Registry
‚Üì ‚Üì
‚îú‚îÄ‚îÄ‚Üí System State ‚îú‚îÄ‚îÄ‚Üí Global Errors
‚îú‚îÄ‚îÄ‚Üí Backend Status ‚îú‚îÄ‚îÄ‚Üí Network Errors
‚îú‚îÄ‚îÄ‚Üí Read-Only Mode ‚îî‚îÄ‚îÄ‚Üí Critical Errors
‚îî‚îÄ‚îÄ‚Üí Background Tasks
‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Global Status ‚îÇ
‚îÇ Bar ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚Üì ‚Üì
Indicators Modal (–ø–æ –∫–ª–∏–∫—É –Ω–∞ –æ—à–∏–±–∫—É)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== GLOBAL STATUS BAR INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Global Status Bar
  \*/
  export interface GlobalStatusBarConfig {
  // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è
  indicators: StatusIndicator[];

// –í–∏–¥–∏–º–æ—Å—Ç—å
visible?: boolean;
}

/\*\*

- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è
  \*/
  export interface StatusIndicator {
  // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
  id: string;

// –¢–∏–ø –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
type: StatusIndicatorType;

// –£—Ä–æ–≤–µ–Ω—å –≤–∞–∂–Ω–æ—Å—Ç–∏
level: StatusLevel;

// –ò–∫–æ–Ω–∫–∞
icon: string;

// –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
message: string;

// –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π (–º–æ–∂–Ω–æ –∫–ª–∏–∫–Ω—É—Ç—å)
interactive?: boolean;

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ (–¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö)
onClick?: () => void;

// –í–∏–¥–∏–º–æ—Å—Ç—å
visible?: boolean;

// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata?: Record<string, any>;
}

export type StatusIndicatorType =
| 'system' // –°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
| 'backend' // Backend —Å—Ç–∞—Ç—É—Å
| 'data' // –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
| 'validation' // –í–∞–ª–∏–¥–∞—Ü–∏—è
| 'operation'; // –û–ø–µ—Ä–∞—Ü–∏–∏

export type StatusLevel =
| 'ok' // –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ
| 'info' // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
| 'warning' // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
| 'error' // –û—à–∏–±–∫–∞
| 'critical'; // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

/\*\*

- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ—à–∏–±–∫–∏
  \*/
  export interface GlobalErrorModal {
  visible: boolean;
  title: string;
  severity: StatusLevel;
  content: GlobalErrorContent;
  }

export interface GlobalErrorContent {
summary: string;
details?: string;
errorCode?: string;
timestamp?: Date;
correlationId?: string;
recommendation?: string;
}

Global Status Bar Component:
// ===== GLOBAL STATUS BAR COMPONENT =====

@Component({
selector: 'app-global-status-bar',
standalone: true,
imports: [CommonModule, NzIconModule, NzModalModule],
template: `
@if (config().visible !== false) {
<div class="global-status-bar">
<!-- Indicators -->
<div class="status-indicators">
@for (indicator of visibleIndicators(); track indicator.id) {
<div
class="status-indicator"
[class.is-ok]="indicator.level === 'ok'"
[class.is-info]="indicator.level === 'info'"
[class.is-warning]="indicator.level === 'warning'"
[class.is-error]="indicator.level === 'error'"
[class.is-critical]="indicator.level === 'critical'"
[class.is-interactive]="indicator.interactive"
(click)="handleIndicatorClick(indicator)" >
<app-icon
[iconKey]="indicator.icon"
class="indicator-icon" ></app-icon>
<span class="indicator-message">{{ indicator.message }}</span>
</div>
}

          <!-- Default OK state if no errors -->
          @if (visibleIndicators().length === 0) {
            <div class="status-indicator is-ok">
              <app-icon iconKey="icon-check-circle" class="indicator-icon"></app-icon>
              <span class="indicator-message">–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ</span>
            </div>
          }
        </div>
      </div>
    }

`,
  styles: [`
.global-status-bar {
height: 32px;
background: #fff;
border-top: 1px solid #e8e8e8;
display: flex;
align-items: center;
padding: 0 16px;
font-size: 12px;
}

    .status-indicators {
      display: flex;
      align-items: center;
      gap: 16px;
      width: 100%;
    }

    .status-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 4px;
      transition: background 0.2s;

      &.is-interactive {
        cursor: pointer;

        &:hover {
          background: rgba(0, 0, 0, 0.04);
        }
      }

      &.is-ok {
        color: #52c41a;
      }

      &.is-info {
        color: #1890ff;
      }

      &.is-warning {
        color: #faad14;
        background: #fffbe6;
      }

      &.is-error {
        color: #ff4d4f;
        background: #fff2f0;
      }

      &.is-critical {
        color: #fff;
        background: #ff4d4f;
        font-weight: 600;
        animation: pulse 2s infinite;
      }
    }

    .indicator-icon {
      font-size: 14px;
    }

    .indicator-message {
      white-space: nowrap;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }

    @media (max-width: 768px) {
      .status-indicators {
        flex-wrap: wrap;
        gap: 8px;
      }

      .indicator-message {
        display: none;
      }
    }

`]
})
export class GlobalStatusBarComponent implements OnInit, OnDestroy {
private readonly contextService = inject(ContextService);
private readonly errorRegistry = inject(ErrorRegistry);
private readonly modalService = inject(NzModalService);
private readonly destroy$ = new Subject<void>();

config = input<GlobalStatusBarConfig>({
indicators: [],
visible: true
});

indicators = signal<StatusIndicator[]>([]);

ngOnInit() {
this.subscribeToContext();
this.subscribeToErrors();
}

ngOnDestroy() {
this.destroy$.next();
    this.destroy$.complete();
}

visibleIndicators() {
return this.indicators().filter(i => i.visible !== false);
}

handleIndicatorClick(indicator: StatusIndicator) {
if (!indicator.interactive) return;

    if (indicator.onClick) {
      indicator.onClick();
    } else if (indicator.type === 'system' && indicator.level !== 'ok') {
      this.openErrorModal(indicator);
    }

}

private subscribeToContext() {
this.contextService.context$
      .pipe(takeUntil(this.destroy$))
.subscribe(context => {
this.updateIndicators(context);
});
}

private subscribeToErrors() {
this.errorRegistry.summary$
      .pipe(takeUntil(this.destroy$))
.subscribe(summary => {
this.updateErrorIndicators(summary);
});
}

private updateIndicators(context: AppContext) {
const newIndicators: StatusIndicator[] = [];

    // Backend Status
    if (!context.operationalState.backendAvailable) {
      newIndicators.push({
        id: 'backend',
        type: 'backend',
        level: 'critical',
        icon: 'icon-disconnect',
        message: 'Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω',
        interactive: true,
        onClick: () => this.openBackendErrorModal()
      });
    }

    // Read-Only Mode
    if (context.operationalState.globalReadOnly) {
      newIndicators.push({
        id: 'readonly',
        type: 'system',
        level: 'warning',
        icon: 'icon-lock',
        message: '–†–µ–∂–∏–º —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è',
        interactive: false
      });
    }

    // Background Tasks
    const runningTasks = context.operationalState.backgroundTasks
      .filter(t => t.status === 'running');

    if (runningTasks.length > 0) {
      newIndicators.push({
        id: 'tasks',
        type: 'operation',
        level: 'info',
        icon: 'icon-loading',
        message: `–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ${runningTasks.length} –æ–ø–µ—Ä–∞—Ü–∏–π`,
        interactive: false
      });
    }

    // Unsaved Changes
    if (context.dataState.dirty) {
      newIndicators.push({
        id: 'unsaved',
        type: 'data',
        level: 'warning',
        icon: 'icon-warning',
        message: '–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è',
        interactive: false
      });
    }

    this.indicators.update(current => {
      // Merge with existing indicators (keep error indicators)
      const errorIndicators = current.filter(i => i.type === 'validation');
      return [...newIndicators, ...errorIndicators];
    });

}

private updateErrorIndicators(summary: ErrorSummary) {
// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏
const globalErrors = summary.byLevel.global;

    if (globalErrors === 0) {
      // –£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–æ–∫
      this.indicators.update(current =>
        current.filter(i => i.id !== 'global-errors')
      );
      return;
    }

    // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ø–æ severity
    let level: StatusLevel = 'error';
    if (summary.highestSeverity === 'critical') {
      level = 'critical';
    } else if (summary.highestSeverity === 'warning') {
      level = 'warning';
    }

    const errorIndicator: StatusIndicator = {
      id: 'global-errors',
      type: 'validation',
      level,
      icon: level === 'critical' ? 'icon-close-circle' : 'icon-warning',
      message: `${globalErrors} ${this.getErrorText(globalErrors)}`,
      interactive: true,
      onClick: () => this.openGlobalErrorsModal()
    };

    this.indicators.update(current => {
      const filtered = current.filter(i => i.id !== 'global-errors');
      return [...filtered, errorIndicator];
    });

}

private getErrorText(count: number): string {
if (count === 1) return '–æ—à–∏–±–∫–∞';
if (count < 5) return '–æ—à–∏–±–∫–∏';
return '–æ—à–∏–±–æ–∫';
}

private openErrorModal(indicator: StatusIndicator) {
this.modalService.error({
nzTitle: '–°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞',
nzContent: indicator.message,
nzOkText: '–ü–æ–Ω—è—Ç–Ω–æ'
});
}

private openBackendErrorModal() {
this.modalService.error({
nzTitle: 'Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω',
nzContent: `        <p>–ù–µ —É–¥–∞—ë—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É.</p>
        <p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.</p>
     `,
nzOkText: '–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É',
nzOnOk: () => window.location.reload()
});
}

private openGlobalErrorsModal() {
const errors = this.errorRegistry.getAll({
level: 'global',
lifecycle: 'active'
});

    if (errors.length === 0) return;

    // –í–∑—è—Ç—å –ø–µ—Ä–≤—É—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É
    const criticalError = errors.find(e =>
      e.errorResponse.status >= 500
    ) || errors[0];

    const content = `
      <div>
        <p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> ${criticalError.errorResponse.getUserMessage()}</p>
        ${criticalError.errorResponse.correlationId ?
          `<p><strong>ID –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏:</strong> ${criticalError.errorResponse.correlationId}</p>` : ''}
        ${criticalError.errorResponse.timestamp ?
          `<p><strong>–í—Ä–µ–º—è:</strong> ${new Date(criticalError.errorResponse.timestamp).toLocaleString()}</p>` : ''}
      </div>
    `;

    this.modalService.error({
      nzTitle: `–û—à–∏–±–∫–∞ (${criticalError.errorResponse.status})`,
      nzContent: content,
      nzOkText: '–ü–æ–Ω—è—Ç–Ω–æ',
      nzWidth: 600
    });

}
}

Global Status Bar Integration Example:
// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í LAYOUT =====

@Component({
selector: 'app-admin-layout',
template: `
<div class="admin-layout">
<app-admin-header [config]="headerConfig()"></app-admin-header>

      <div class="admin-workspace">
        <app-left-sidebar [config]="sidebarConfig()"></app-left-sidebar>
        <main class="admin-main">
          <router-outlet></router-outlet>
        </main>
        <app-right-panel [config]="rightPanelConfig()"></app-right-panel>
      </div>

      <!-- Global Status Bar -->
      <app-global-status-bar></app-global-status-bar>

      <app-admin-footer [config]="footerConfig()"></app-admin-footer>
    </div>

`
})
export class AdminLayoutComponent implements OnInit {
private readonly contextService = inject(ContextService);
private readonly errorRegistry = inject(ErrorRegistry);

ngOnInit() {
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
this.contextService.setContext({
activeArea: {
type: 'dashboard',
entityId: 'main',
mode: 'view'
},
dataState: {
dirty: false,
valid: true,
loading: false
},
operationalState: {
healthy: true,
backendAvailable: true,
globalReadOnly: false,
locks: [],
backgroundTasks: []
},
permissions: {
user: {
id: 'user-123',
name: 'Admin User',
email: 'admin@example.com',
roles: ['admin']
},
global: ['admin.read', 'admin.write'],
entity: {
entityName: 'main',
operations: {
read: true,
create: true,
update: true,
delete: true,
export: true
}
}
},
metadata: {
version: 1,
createdAt: new Date(),
updatedAt: new Date()
}
});
}
}

–ß–ê–°–¢–¨ 5: BODY & FORMS
5.1 Page Shell
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Page Shell ‚Äî —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –û–ë–Ø–ó–ê–ù–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Page Shell.
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Page Shell:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ PAGE SHELL ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ
‚îÇ PAGE-HEADER ‚îÇ
‚îÇ ‚îú‚îÄ page-title ‚îÇ
‚îÇ ‚îú‚îÄ page-subtitle (optional) ‚îÇ
‚îÇ ‚îî‚îÄ page-toolbar (optional) ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ FORM-STATUS-BAR ‚îÇ
‚îÇ ‚îî‚îÄ –ê–≥—Ä–µ–≥–∞—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º—ã ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ ERROR-BLOCK (conditional) ‚îÇ
‚îÇ ‚îî‚îÄ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫ ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ SEARCH/FILTERS AREA (optional) ‚îÇ
‚îÇ ‚îî‚îÄ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ CONTENT AREA ‚îÇ
‚îÇ ‚îú‚îÄ Table (ng-zorro) ‚îÇ
‚îÇ ‚îî‚îÄ Form (custom) ‚îÇ
‚îÇ ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ
‚îÇ PAGE-FOOTER ‚îÇ
‚îÇ ‚îú‚îÄ Pagination Block ‚îÇ
‚îÇ ‚îî‚îÄ Actions Block ‚îÇ
‚îÇ ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== PAGE SHELL INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  \*/
  export interface PageConfig {
  // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  header: PageHeader;

// –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
contentType: 'table' | 'form' | 'custom';

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Form Status Bar?
showFormStatusBar?: boolean;

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Search/Filters?
showSearchFilters?: boolean;

// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Footer?
showFooter?: boolean;
}

/\*\*

- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  \*/
  export interface PageHeader {
  // –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
  title: string;

// –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
subtitle?: string;

// –ö–Ω–æ–ø–∫–∏ –≤ toolbar (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
toolbarActions?: PageAction[];
}

export interface PageAction {
id: string;
label: string;
icon?: string;
type?: 'primary' | 'default' | 'danger';
disabled?: boolean;
handler: () => void;
}

/\*\*

- Footer —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–Ω–µ –ø—É—Ç–∞—Ç—å —Å Admin Footer)
  \*/
  export interface PageFooter {
  // –ë–ª–æ–∫ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  pagination?: PagePagination;

// –ë–ª–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π
actions?: PageAction[];
}

export interface PagePagination {
total: number;
pageSize: number;
currentPage: number;
pageSizeOptions?: number[];
showSizeChanger?: boolean;
showTotal?: boolean;
onPageChange: (page: number) => void;
onPageSizeChange: (size: number) => void;
}

Page Shell Component:
// ===== PAGE SHELL COMPONENT =====

@Component({
selector: 'app-page-shell',
standalone: true,
imports: [CommonModule, NzButtonModule, NzIconModule],
template: `
<div class="page">
<!-- Page Header -->
<header class="page-header">
<div class="page-header-main">
<h1 class="page-title">{{ config().header.title }}</h1>
@if (config().header.subtitle) {
<p class="page-subtitle">{{ config().header.subtitle }}</p>
}
</div>

        @if (config().header.toolbarActions && config().header.toolbarActions.length > 0) {
          <div class="page-toolbar">
            @for (action of config().header.toolbarActions; track action.id) {
              <button
                nz-button
                [nzType]="action.type || 'default'"
                [disabled]="action.disabled"
                (click)="action.handler()"
              >
                @if (action.icon) {
                  <app-icon [iconKey]="action.icon"></app-icon>
                }
                {{ action.label }}
              </button>
            }
          </div>
        }
      </header>

      <!-- Form Status Bar -->
      @if (config().showFormStatusBar !== false) {
        <app-form-status-bar></app-form-status-bar>
      }

      <!-- Error Block (conditional - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç) -->
      <app-error-block></app-error-block>

      <!-- Search/Filters Area -->
      @if (config().showSearchFilters) {
        <div class="page-search-filters">
          <ng-content select="[search-filters]"></ng-content>
        </div>
      }

      <!-- Content Area -->
      <div class="page-body">
        <ng-content></ng-content>
      </div>

      <!-- Page Footer -->
      @if (config().showFooter !== false) {
        <footer class="page-footer">
          <ng-content select="[page-footer]"></ng-content>
        </footer>
      }
    </div>

`,
  styles: [`
.page {
display: flex;
flex-direction: column;
height: 100%;
background: #fff;
}

    /* PAGE HEADER */
    .page-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      padding: 24px 24px 16px;
      border-bottom: 1px solid #f0f0f0;
    }

    .page-header-main {
      flex: 1;
    }

    .page-title {
      margin: 0;
      font-size: 24px;
      font-weight: 600;
      line-height: 1.3;
      color: #262626;
    }

    .page-subtitle {
      margin: 4px 0 0;
      font-size: 14px;
      color: #8c8c8c;
    }

    .page-toolbar {
      display: flex;
      gap: 8px;
      margin-left: 16px;
    }

    /* SEARCH/FILTERS */
    .page-search-filters {
      padding: 16px 24px;
      background: #fafafa;
      border-bottom: 1px solid #f0f0f0;
    }

    /* CONTENT */
    .page-body {
      flex: 1;
      overflow: auto;
      padding: 16px 24px;
    }

    /* FOOTER */
    .page-footer {
      border-top: 1px solid #f0f0f0;
      padding: 12px 24px;
      background: #fafafa;
    }

`]
})
export class PageShellComponent {
config = input.required<PageConfig>();
}

Page Shell Usage Example:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø PAGE SHELL =====

// –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–∞–±–ª–∏—Ü–∞)
@Component({
selector: 'app-users-page',
standalone: true,
imports: [CommonModule, PageShellComponent, NzTableModule, NzPaginationModule],
template: `
<app-page-shell [config]="pageConfig()">
<!-- Search/Filters -->
<div search-filters>
<input
type="text"
placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏..."
[(ngModel)]="searchTerm"
(input)="onSearch()"
/>
</div>

      <!-- Table Content -->
      <nz-table
        [nzData]="users()"
        [nzLoading]="loading()"
        [nzShowPagination]="false"
      >
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–º—è</th>
            <th>Email</th>
            <th>–†–æ–ª—å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          @for (user of users(); track user.id) {
            <tr>
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.role }}</td>
              <td>
                <button nz-button nzType="link" (click)="editUser(user)">
                  –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                </button>
              </td>
            </tr>
          }
        </tbody>
      </nz-table>

      <!-- Pagination Footer -->
      <div page-footer class="page-footer-content">
        <div class="pagination-block">
          <nz-pagination
            [nzTotal]="totalUsers()"
            [nzPageSize]="pageSize()"
            [nzPageIndex]="currentPage()"
            [nzShowSizeChanger]="true"
            [nzPageSizeOptions]="[10, 20, 50, 100]"
            (nzPageIndexChange)="onPageChange($event)"
            (nzPageSizeChange)="onPageSizeChange($event)"
          ></nz-pagination>
        </div>

        <div class="actions-block">
          <button nz-button nzType="primary" (click)="createUser()">
            –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          </button>
        </div>
      </div>
    </app-page-shell>

`,
  styles: [`
.page-footer-content {
display: flex;
justify-content: space-between;
align-items: center;
}

    .pagination-block {
      flex: 1;
    }

    .actions-block {
      display: flex;
      gap: 8px;
    }

`]
})
export class UsersPageComponent implements OnInit {
private readonly userService = inject(UserService);
private readonly contextService = inject(ContextService);
private readonly commandService = inject(CommandService);

users = signal<User[]>([]);
loading = signal(false);
totalUsers = signal(0);
currentPage = signal(1);
pageSize = signal(20);
searchTerm = '';

pageConfig = computed<PageConfig>(() => ({
header: {
title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
subtitle: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã',
toolbarActions: [
{
id: 'refresh',
label: '–û–±–Ω–æ–≤–∏—Ç—å',
icon: 'icon-refresh',
handler: () => this.loadUsers()
},
{
id: 'export',
label: '–≠–∫—Å–ø–æ—Ä—Ç',
icon: 'icon-export',
handler: () => this.exportUsers()
}
]
},
contentType: 'table',
showFormStatusBar: true,
showSearchFilters: true,
showFooter: true
}));

ngOnInit() {
// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç
this.contextService.setActiveArea({
type: 'table',
entityId: 'users',
mode: 'view'
});

    this.loadUsers();

}

loadUsers() {
this.loading.set(true);
this.contextService.updateDataState({ loading: true });

    this.userService.getUsers({
      page: this.currentPage(),
      pageSize: this.pageSize(),
      search: this.searchTerm
    }).subscribe({
      next: (response) => {
        this.users.set(response.data);
        this.totalUsers.set(response.total);
        this.loading.set(false);
        this.contextService.updateDataState({ loading: false });
      },
      error: (error) => {
        this.loading.set(false);
        this.contextService.updateDataState({ loading: false });
        // –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è HttpErrorInterceptor
      }
    });

}

onPageChange(page: number) {
this.currentPage.set(page);
this.loadUsers();
}

onPageSizeChange(size: number) {
this.pageSize.set(size);
this.currentPage.set(1);
this.loadUsers();
}

onSearch() {
this.currentPage.set(1);
this.loadUsers();
}

createUser() {
// –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è
this.router.navigate(['/admin/users/create']);
}

editUser(user: User) {
this.router.navigate(['/admin/users', user.id, 'edit']);
}

exportUsers() {
this.commandService.execute('export', {
entityId: 'users',
format: 'xlsx'
}).subscribe({
next: (result) => {
if (result.success && result.data) {
// –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª
const blob = result.data as Blob;
const url = window.URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = `users_${new Date().getTime()}.xlsx`;
a.click();
}
}
});
}
}

–ß–ê–°–¢–¨ 5: BODY & FORMS (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
5.2 Error Handling System (–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (ErrorHandlingService, GlobalErrorHandler, HttpErrorInterceptor) —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (Error Registry, Context Model, Event Bus).
–¢—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –¢–†–Å–•–£–†–û–í–ù–ï–í–ê–Ø –°–ò–°–¢–ï–ú–ê –û–®–ò–ë–û–ö ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–£–†–û–í–ï–ù–¨ 1: TOAST (NzMessage)
‚îú‚îÄ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ë—ã—Å—Ç—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ –°—Ç–∞—Ç—É—Å—ã: 422, 502, 503, 0 (—Å–µ—Ç—å)
‚îú‚îÄ –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ê–≤—Ç–æ-—Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫
‚îî‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: ErrorHandlingService.showMessage()

–£–†–û–í–ï–ù–¨ 2: MODAL (NzModal)
‚îú‚îÄ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
‚îú‚îÄ –°—Ç–∞—Ç—É—Å—ã: 400, 401, 403, 404, 500
‚îú‚îÄ –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –¢—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
‚îú‚îÄ –ê–≤—Ç–æ-—Ä–µ–¥–∏—Ä–µ–∫—Ç: 401, 404, 500
‚îî‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: ErrorHandlingService.showModal()

–£–†–û–í–ï–ù–¨ 3: REGISTRY + STATUS BARS
‚îú‚îÄ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è
‚îú‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
‚îÇ ‚îú‚îÄ Error Registry (Core) - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ ‚îú‚îÄ Form Status Bar - –∞–≥—Ä–µ–≥–∞—Ç –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º—ã
‚îÇ ‚îú‚îÄ Error Block - –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö
‚îÇ ‚îú‚îÄ Right Panel "Errors" - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
‚îÇ ‚îî‚îÄ Global Status Bar - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
‚îî‚îÄ –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –†–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Event Bus

5.2.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ ErrorHandlingService
// ===== –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –° ERROR REGISTRY =====

@Injectable({ providedIn: 'root' })
export class ErrorHandlingService implements OnDestroy {
// –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
private readonly destroy$ = new Subject<void>();
private readonly message = inject(NzMessageService);
private readonly modalService = inject(NzModalService);
private readonly router = inject(Router);
private readonly logger = inject(LoggingService);

// === –ù–û–í–´–ï –ó–ê–í–ò–°–ò–ú–û–°–¢–ò ===
private readonly errorRegistry = inject(ErrorRegistry);
private readonly contextService = inject(ContextService);
private readonly eventBus = inject(EventBus);

private activeModals = new Map<string, NzModalRef>();
private readonly context = 'ErrorHandlingService';

// –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫
private readonly errorConfigs: Record<number, ErrorDisplayConfig> = {
400: {
showModal: true,
showMessage: false,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'error',
},
401: {
showModal: true,
showMessage: false,
autoRedirect: true,
showTechnicalInfo: false,
messageType: 'warning',
},
403: {
showModal: true,
showMessage: false,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'error',
},
404: {
showModal: true,
showMessage: false,
autoRedirect: true,
showTechnicalInfo: false,
messageType: 'error',
},
409: {
showModal: false,
showMessage: false, // –¢–æ–ª—å–∫–æ Registry
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'warning',
},
422: {
showModal: false,
showMessage: true,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'error',
},
500: {
showModal: true,
showMessage: false,
autoRedirect: true,
showTechnicalInfo: true,
messageType: 'error',
},
502: {
showModal: false,
showMessage: true,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'error',
},
503: {
showModal: false,
showMessage: true,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'warning',
},
0: {
showModal: false,
showMessage: true,
autoRedirect: false,
showTechnicalInfo: false,
messageType: 'error',
},
};

ngOnDestroy(): void {
this.destroy$.next();
    this.destroy$.complete();
this.closeAllModals();
}

/\*\*

- –ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (–†–ê–°–®–ò–†–ï–ù–ù–´–ô)
  \*/
  handleError(
  errorResponse: ErrorResponse,
  options?: Partial<ErrorDisplayConfig>
  ): void {
  try {
  this.validateErrorResponse(errorResponse);
  this.logError(errorResponse);

      // === –ù–û–í–û–ï: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Error Registry ===
      const registryId = this.registerInRegistry(errorResponse);

      const config = {
        ...this.getErrorConfig(errorResponse.status),
        ...options,
      };

      // === –°–£–©–ï–°–¢–í–£–Æ–©–ï–ï: Toast/Modal –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ ===
      this.displayError(errorResponse, config);

      // === –ù–û–í–û–ï: –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è –≤ Event Bus ===
      this.eventBus.publish({
        type: 'errorRegistered',
        payload: {
          registryId,
          errorResponse,
          level: this.determineErrorLevel(errorResponse),
          config
        },
        source: 'ErrorHandlingService'
      });

      // === –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Context –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö ===
      if (errorResponse.status >= 500 || errorResponse.status === 0) {
        this.updateContextForCriticalError(errorResponse);
      }


    } catch (error) {
      this.logger.error(this.context, '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–∫–∏', {
        originalError: errorResponse,
        processingError: error,
      });
      this.fallbackErrorHandling();
    }

}

/\*\*

- === –ù–û–í–´–ô –ú–ï–¢–û–î: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Error Registry ===
  \*/
  private registerInRegistry(errorResponse: ErrorResponse): string {
  const level = this.determineErrorLevel(errorResponse);
  const context = this.contextService.getContext();


    return this.errorRegistry.register({
      level,
      source: 'http',
      errorResponse,
      contextId: context.activeArea?.entityId,
      lifecycle: 'active',
      metadata: {
        url: errorResponse.requestUrl,
        timestamp: errorResponse.timestamp,
        retryable: errorResponse.retryable
      }
    });

}

/\*\*

- === –ù–û–í–´–ô –ú–ï–¢–û–î: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –æ—à–∏–±–∫–∏ ===
  \*/
  private determineErrorLevel(err: ErrorResponse): ErrorLevel {
  // Global: —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ —Å–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏
  if ([500, 502, 503, 504, 0].includes(err.status)) {
  return 'global';
  }


    // Contextual: –æ—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã/—Ç–∞–±–ª–∏—Ü—ã
    if ([422, 400, 409].includes(err.status)) {
      return 'contextual';
    }

    // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–æ–∂–µ contextual (401, 403, 404)
    return 'contextual';

}

/\*\*

- === –ù–û–í–´–ô –ú–ï–¢–û–î: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö ===
  \*/
  private updateContextForCriticalError(errorResponse: ErrorResponse): void {
  if (errorResponse.status === 0) {
  // –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ ‚Üí Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
  this.contextService.updateContext({
  operationalState: {
  ...this.contextService.getContext().operationalState,
  backendAvailable: false,
  healthy: false
  }
  });
  } else if (errorResponse.status >= 500) {
  // –°–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ ‚Üí –¥–æ–±–∞–≤–∏—Ç—å lock
  const lock: ContextLock = {
  id: `error-${errorResponse.correlationId}`,
  reason: `Server error: ${errorResponse.status}`,
  source: 'system',
  timestamp: new Date()
  };

      const context = this.contextService.getContext();
      this.contextService.updateContext({
        operationalState: {
          ...context.operationalState,
          locks: [...context.operationalState.locks, lock]
        }
      });

  }
  }

// === –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –ú–ï–¢–û–î–´ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ===

showErrorMessage(message: string, duration: number = 5000): void {
this.message.error(message, { nzDuration: duration });
}

closeAllModals(): void {
this.activeModals.forEach(modal => modal.close());
this.activeModals.clear();
this.modalService.closeAll();
}

private validateErrorResponse(errorResponse: ErrorResponse): void {
if (
!errorResponse ||
!errorResponse.title ||
!errorResponse.detail ||
!errorResponse.instance
) {
throw new Error(
'Invalid ErrorResponse: missing required fields (title, detail, instance)'
);
}
}

private logError(errorResponse: ErrorResponse): void {
this.logger.logErrorResponse(errorResponse);
}

private getErrorConfig(status: number): ErrorDisplayConfig {
return (
this.errorConfigs[status] || {
showModal: true,
showMessage: false,
autoRedirect: false,
showTechnicalInfo: true,
messageType: 'error',
}
);
}

private displayError(
errorResponse: ErrorResponse,
config: ErrorDisplayConfig
): void {
if (config.showMessage) {
const userMessage = this.getUserFriendlyMessage(errorResponse);
this.showErrorMessage(userMessage);
}
if (config.showModal) {
this.showErrorModal(errorResponse, config);
}
}

private showErrorModal(
errorResponse: ErrorResponse,
config: ErrorDisplayConfig
): void {
if (!errorResponse) {
this.fallbackErrorHandling();
return;
}
const modalKey = this.generateModalKey(errorResponse);
if (this.activeModals.has(modalKey)) {
return;
}
const modalTitle = this.buildModalTitle(errorResponse);
const modalData: ModalData = {
errorResponse,
config,
recommendation: this.getRecommendation(errorResponse),
};
const modalRef: NzModalRef = this.modalService.create({
nzTitle: modalTitle,
nzContent: ErrorModalContentComponent,
nzData: modalData,
nzClosable: true,
nzOkText: '–ü–æ–Ω—è—Ç–Ω–æ',
nzWidth: 600,
nzClassName: 'error-modal',
nzOnOk: () => {
this.closeModal(modalKey);
},
nzOnCancel: () => {
this.closeModal(modalKey);
},
});
this.activeModals.set(modalKey, modalRef);
if (config.autoRedirect) {
modalRef.afterClose.subscribe(() => {
this.handleAutoRedirect(errorResponse.status);
});
}
}

private generateModalKey(errorResponse: ErrorResponse): string {
return `${errorResponse.status}_${
      errorResponse.correlationId || Date.now()
    }`;
}

private closeModal(modalKey: string): void {
const modal = this.activeModals.get(modalKey);
if (modal) {
modal.close();
this.activeModals.delete(modalKey);
}
}

private buildModalTitle(errorResponse: ErrorResponse): string {
const humanReadableTitle = this.getHumanReadableTitle(errorResponse);
const statusText =
errorTitles[errorResponse.status] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞';
return `${humanReadableTitle} (${statusText}: ${errorResponse.status})`;
}

private getHumanReadableTitle(errorResponse: ErrorResponse): string {
return errorResponse.title &&
!['OK', 'error', 'Error'].includes(errorResponse.title)
? errorResponse.title
: errorTitles[errorResponse.status] || '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞';
}

private getUserFriendlyMessage(errorResponse: ErrorResponse): string {
if (errorResponse.userMessage && errorResponse.userMessage.trim() !== '') {
return errorResponse.userMessage;
}
if (
errorResponse.detail &&
!errorResponse.detail.includes('status') &&
!errorResponse.detail.includes('error code')
) {
return errorResponse.detail;
}
return (
errorMessages[errorResponse.status] || '–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞.'
);
}

private getRecommendation(errorResponse: ErrorResponse): string | null {
if (errorResponse.status === 409 && errorResponse.conflictField) {
return `–ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è "${errorResponse.conflictField}" –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.`;
}
return errorRecommendations[errorResponse.status] || null;
}

private handleAutoRedirect(status: number): void {
const redirects: Record<number, string> = {
401: '/login',
404: '/not-found',
500: '/',
};
const redirectPath = redirects[status];
if (redirectPath) {
this.router.navigate([redirectPath]);
}
}

private fallbackErrorHandling(): void {
this.message.error(
'–ü—Ä–æ–∏–∑–æ—à–ª–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É.'
);
}
}

5.2.2 Form State Machine
// ===== FORM STATE MACHINE =====

/\*\*

- –°–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º—ã
  \*/
  export type FormState =
  | 'idle' // –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–∞–ª–∏–¥–Ω–æ
  | 'loading' // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  | 'dirty' // –ù–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  | 'validating' // –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  | 'saving' // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  | 'valid' // –í–∞–ª–∏–¥–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
  | 'invalid' // –ï—Å—Ç—å –æ—à–∏–±–∫–∏
  | 'error'; // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏

/\*\*

- –ú–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–æ—Ä–º—ã
  \*/
  export interface FormStateModel {
  // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  state: FormState;

// –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å
valid: boolean;

// –ï—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
dirty: boolean;

// –°–≤–æ–¥–∫–∞ –æ—à–∏–±–æ–∫
errorSummary: FormErrorSummary;

// –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
metadata: {
lastSaved?: Date;
lastModified?: Date;
saveAttempts: number;
};
}

export interface FormErrorSummary {
total: number;
byLevel: {
field: number; // –û—à–∏–±–∫–∏ –ø–æ–ª–µ–π
form: number; // –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º—ã
server: number; // –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏
};
bySeverity: {
error: number;
warning: number;
};
highestSeverity: 'error' | 'warning' | null;
}

/\*\*

- –ü–µ—Ä–µ—Ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (State Transitions)
  \*/
  export const FORM_STATE_TRANSITIONS: Record<FormState, FormState[]> = {
  idle: ['loading', 'dirty'],
  loading: ['idle', 'error'],
  dirty: ['validating', 'saving', 'idle'],
  validating: ['valid', 'invalid'],
  saving: ['valid', 'error', 'invalid'],
  valid: ['idle', 'dirty'],
  invalid: ['dirty', 'validating'],
  error: ['idle', 'dirty']
  };

/\*\*

- –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º—ã
  \*/
  @Injectable()
  export class FormStateService {
  private readonly contextService = inject(ContextService);
  private readonly errorRegistry = inject(ErrorRegistry);
  private readonly eventBus = inject(EventBus);

private readonly stateSubject = new BehaviorSubject<FormStateModel>({
state: 'idle',
valid: true,
dirty: false,
errorSummary: {
total: 0,
byLevel: { field: 0, form: 0, server: 0 },
bySeverity: { error: 0, warning: 0 },
highestSeverity: null
},
metadata: {
saveAttempts: 0
}
});

readonly state$ = this.stateSubject.asObservable();

/\*\*

- –ü–µ—Ä–µ—Ö–æ–¥ –≤ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  \*/
  transition(newState: FormState): void {
  const currentState = this.stateSubject.value.state;
  const allowedTransitions = FORM_STATE_TRANSITIONS[currentState];


    if (!allowedTransitions.includes(newState)) {
      console.warn(
        `Invalid state transition: ${currentState} ‚Üí ${newState}`
      );
      return;
    }

    this.stateSubject.next({
      ...this.stateSubject.value,
      state: newState
    });

    // –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏—è
    this.eventBus.publish({
      type: 'formStateChanged',
      payload: {
        from: currentState,
        to: newState
      },
      source: 'FormStateService'
    });

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Context
    this.updateContext(newState);

}

/\*\*

- –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–¥–∫—É –æ—à–∏–±–æ–∫
  \*/
  updateErrorSummary(contextId: string): void {
  const errors = this.errorRegistry.getAll({
  contextId,
  lifecycle: 'active'
  });


    const summary: FormErrorSummary = {
      total: errors.length,
      byLevel: {
        field: errors.filter(e => e.fieldId).length,
        form: errors.filter(e => !e.fieldId && !e.rowId).length,
        server: errors.filter(e => e.source === 'http').length
      },
      bySeverity: {
        error: errors.filter(e =>
          e.errorResponse.status >= 400 && e.errorResponse.status < 500
        ).length,
        warning: errors.filter(e =>
          e.errorResponse.status === 409
        ).length
      },
      highestSeverity: this.getHighestSeverity(errors)
    };

    this.stateSubject.next({
      ...this.stateSubject.value,
      errorSummary: summary,
      valid: summary.total === 0
    });

}

/\*\*

- –ü–æ–º–µ—Ç–∏—Ç—å —Ñ–æ—Ä–º—É –∫–∞–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—É—é
  \*/
  markAsDirty(): void {
  this.stateSubject.next({
  ...this.stateSubject.value,
  dirty: true
  });


    if (this.stateSubject.value.state === 'idle') {
      this.transition('dirty');
    }

}

/\*\*

- –ü–æ–º–µ—Ç–∏—Ç—å —Ñ–æ—Ä–º—É –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é
  \*/
  markAsSaved(): void {
  this.stateSubject.next({
  ...this.stateSubject.value,
  dirty: false,
  metadata: {
  ...this.stateSubject.value.metadata,
  lastSaved: new Date()
  }
  });


    this.transition('idle');

}

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  \*/
  getState(): FormStateModel {
  return this.stateSubject.value;
  }

/\*\*

- –°–±—Ä–æ—Å–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  \*/
  reset(): void {
  this.stateSubject.next({
  state: 'idle',
  valid: true,
  dirty: false,
  errorSummary: {
  total: 0,
  byLevel: { field: 0, form: 0, server: 0 },
  bySeverity: { error: 0, warning: 0 },
  highestSeverity: null
  },
  metadata: {
  saveAttempts: 0
  }
  });
  }

private updateContext(newState: FormState): void {
const dataState: Partial<ContextDataState> = {};

    switch (newState) {
      case 'loading':
        dataState.loading = true;
        break;
      case 'saving':
        dataState.operation = 'saving';
        break;
      case 'dirty':
        dataState.dirty = true;
        break;
      case 'valid':
      case 'idle':
        dataState.loading = false;
        dataState.operation = undefined;
        dataState.dirty = false;
        break;
      case 'invalid':
      case 'error':
        dataState.valid = false;
        break;
    }

    this.contextService.updateDataState(dataState);

}

private getHighestSeverity(
errors: RegisteredError[]
): 'error' | 'warning' | null {
if (errors.length === 0) return null;

    const hasError = errors.some(e =>
      e.errorResponse.status >= 400 && e.errorResponse.status < 500
    );

    return hasError ? 'error' : 'warning';

}
}

5.2.3 Form Status Bar Component
// ===== FORM STATUS BAR COMPONENT =====

@Component({
selector: 'app-form-status-bar',
standalone: true,
imports: [CommonModule, NzIconModule],
template: `
@if (shouldShow()) {
<div
class="form-status-bar"
[class.is-idle]="state() === 'idle'"
[class.is-dirty]="state() === 'dirty'"
[class.is-loading]="state() === 'loading'"
[class.is-saving]="state() === 'saving'"
[class.is-error]="hasErrors()"
[class.is-warning]="hasWarnings()" >
<div class="status-content">
<!-- Icon -->
<span class="status-icon">
<app-icon [iconKey]="getIcon()"></app-icon>
</span>

          <!-- Message -->
          <span class="status-message">{{ getMessage() }}</span>

          <!-- Error Count (if errors) -->
          @if (hasErrors()) {
            <button
              class="error-count-btn"
              (click)="scrollToErrors()"
            >
              {{ errorSummary().total }}
              {{ getErrorText(errorSummary().total) }}
            </button>
          }

          <!-- Metadata -->
          @if (showMetadata()) {
            <span class="status-metadata">
              {{ getMetadataText() }}
            </span>
          }
        </div>
      </div>
    }

`,
  styles: [`
.form-status-bar {
height: 40px;
padding: 0 24px;
display: flex;
align-items: center;
border-bottom: 1px solid #f0f0f0;
transition: all 0.3s;

      &.is-idle {
        background: #f6ffed;
        border-color: #b7eb8f;
      }

      &.is-dirty {
        background: #fffbe6;
        border-color: #ffe58f;
      }

      &.is-loading,
      &.is-saving {
        background: #e6f7ff;
        border-color: #91d5ff;
      }

      &.is-error {
        background: #fff2f0;
        border-color: #ffccc7;
      }

      &.is-warning {
        background: #fffbe6;
        border-color: #ffe58f;
      }
    }

    .status-content {
      display: flex;
      align-items: center;
      gap: 12px;
      width: 100%;
    }

    .status-icon {
      font-size: 16px;
      display: flex;
      align-items: center;
    }

    .status-message {
      flex: 1;
      font-size: 14px;
      font-weight: 500;
    }

    .error-count-btn {
      padding: 4px 12px;
      border: 1px solid #ff4d4f;
      background: #fff;
      color: #ff4d4f;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.2s;

      &:hover {
        background: #ff4d4f;
        color: #fff;
      }
    }

    .status-metadata {
      font-size: 12px;
      color: #8c8c8c;
    }

`]
})
export class FormStatusBarComponent implements OnInit, OnDestroy {
private readonly formStateService = inject(FormStateService, { optional: true });
private readonly contextService = inject(ContextService);
private readonly errorRegistry = inject(ErrorRegistry);
private readonly destroy$ = new Subject<void>();

state = signal<FormState>('idle');
errorSummary = signal<FormErrorSummary>({
total: 0,
byLevel: { field: 0, form: 0, server: 0 },
bySeverity: { error: 0, warning: 0 },
highestSeverity: null
});

metadata = signal<{
lastSaved?: Date;
lastModified?: Date;
}>({});

ngOnInit() {
if (this.formStateService) {
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã
this.formStateService.state$
        .pipe(takeUntil(this.destroy$))
.subscribe(formState => {
this.state.set(formState.state);
this.errorSummary.set(formState.errorSummary);
this.metadata.set(formState.metadata);
});
} else {
// Fallback: –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Context –∏ Error Registry
this.subscribeToContextAndRegistry();
}
}

ngOnDestroy() {
this.destroy$.next();
    this.destroy$.complete();
}

shouldShow(): boolean {
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ
return this.state() !== 'idle' || this.hasErrors() || this.hasWarnings();
}

hasErrors(): boolean {
return this.errorSummary().bySeverity.error > 0;
}

hasWarnings(): boolean {
return this.errorSummary().bySeverity.warning > 0;
}

showMetadata(): boolean {
return this.state() === 'idle' && !!this.metadata().lastSaved;
}

getIcon(): string {
if (this.state() === 'loading' || this.state() === 'saving') {
return 'icon-loading';
}
if (this.hasErrors()) {
return 'icon-close-circle';
}
if (this.hasWarnings()) {
return 'icon-warning';
}
if (this.state() === 'dirty') {
return 'icon-edit';
}
return 'icon-check-circle';
}

getMessage(): string {
if (this.state() === 'loading') {
return '–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...';
}
if (this.state() === 'saving') {
return '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
}
if (this.hasErrors()) {
return '–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏';
}
if (this.hasWarnings()) {
return '–ï—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è';
}
if (this.state() === 'dirty') {
return '–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è';
}
return '–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ';
}

getErrorText(count: number): string {
if (count === 1) return '–æ—à–∏–±–∫–∞';
if (count < 5) return '–æ—à–∏–±–∫–∏';
return '–æ—à–∏–±–æ–∫';
}

getMetadataText(): string {
if (this.metadata().lastSaved) {
const saved = this.metadata().lastSaved!;
const diff = Date.now() - saved.getTime();
const minutes = Math.floor(diff / 60000);

      if (minutes < 1) return '–¢–æ–ª—å–∫–æ —á—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ';
      if (minutes === 1) return '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ 1 –º–∏–Ω—É—Ç—É –Ω–∞–∑–∞–¥';
      if (minutes < 60) return `–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ${minutes} –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥`;

      return `–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ ${saved.toLocaleTimeString()}`;
    }
    return '';

}

scrollToErrors() {
// –°–∫—Ä–æ–ª–ª –∫ Error Block
const errorBlock = document.querySelector('.error-block');
if (errorBlock) {
errorBlock.scrollIntoView({ behavior: 'smooth', block: 'start' });
}
}

private subscribeToContextAndRegistry() {
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Context
this.contextService.context$
      .pipe(takeUntil(this.destroy$))
.subscribe(context => {
if (context.dataState.loading) {
this.state.set('loading');
} else if (context.dataState.operation === 'saving') {
this.state.set('saving');
} else if (context.dataState.dirty) {
this.state.set('dirty');
} else {
this.state.set('idle');
}
});

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Error Registry
    this.errorRegistry.summary$
      .pipe(takeUntil(this.destroy$))
      .subscribe(summary => {
        // –§–∏–ª—å—Ç—Ä —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫
        const contextId = this.contextService.getContext().activeArea?.entityId;
        if (contextId) {
          const contextErrors = this.errorRegistry.getAll({
            contextId,
            lifecycle: 'active'
          });

          this.errorSummary.set({
            total: contextErrors.length,
            byLevel: {
              field: contextErrors.filter(e => e.fieldId).length,
              form: contextErrors.filter(e => !e.fieldId && !e.rowId).length,
              server: contextErrors.filter(e => e.source === 'http').length
            },
            bySeverity: {
              error: contextErrors.filter(e =>
                e.errorResponse.status >= 400 && e.errorResponse.status < 500
              ).length,
              warning: contextErrors.filter(e =>
                e.errorResponse.status === 409
              ).length
            },
            highestSeverity: contextErrors.length > 0 ? 'error' : null
          });
        }
      });

}
}

5.2.4 Error Block Component
// ===== ERROR BLOCK COMPONENT =====

@Component({
selector: 'app-error-block',
standalone: true,
imports: [CommonModule, NzCollapseModule, NzAlertModule, NzIconModule],
template: `
@if (visible() && errors().length > 0) {
<div
class="error-block"
[class.is-warning]="highestSeverity() === 'warning'"
[class.is-error]="highestSeverity() === 'error'"
[class.is-critical]="highestSeverity() === 'critical'"
[style.max-height.px]="maxHeight()" >
<!-- Header -->
<div class="error-block-header">
<span class="error-block-title">
<app-icon [iconKey]="getHeaderIcon()"></app-icon>
{{ getHeaderTitle() }}
</span>
<button
class="error-block-close"
(click)="dismissAll()"
title="–ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏" >
<app-icon iconKey="icon-close"></app-icon>
</button>
</div>

        <!-- Errors List -->
        <div class="error-block-content">
          <!-- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º -->
          @if (shouldGroupBySection()) {
            <nz-collapse [nzBordered]="false">
              @for (section of groupedErrors(); track section.title) {
                <nz-collapse-panel
                  [nzHeader]="section.title"
                  [nzActive]="true"
                >
                  @for (error of section.errors; track error.registryId) {
                    <app-error-item
                      [error]="error"
                      (click)="handleErrorClick(error)"
                      (dismiss)="dismissError(error.registryId)"
                    ></app-error-item>
                  }
                </nz-collapse-panel>
              }
            </nz-collapse>
          } @else {
            <!-- –ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ -->
            @for (error of errors(); track error.registryId) {
              <app-error-item
                [error]="error"
                (click)="handleErrorClick(error)"
                (dismiss)="dismissError(error.registryId)"
              ></app-error-item>
            }
          }
        </div>

        <!-- Footer (–µ—Å–ª–∏ –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫) -->
        @if (errors().length > 5) {
          <div class="error-block-footer">
            –ü–æ–∫–∞–∑–∞–Ω–æ {{ errors().length }}
            {{ getErrorText(errors().length) }}
          </div>
        }
      </div>
    }

`,
  styles: [`
.error-block {
margin: 0 24px 16px;
border-radius: 4px;
overflow: hidden;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

      &.is-warning {
        border: 1px solid #ffe58f;
        background: #fffbe6;
      }

      &.is-error {
        border: 1px solid #ffccc7;
        background: #fff2f0;
      }

      &.is-critical {
        border: 2px solid #ff4d4f;
        background: #fff2f0;
      }
    }

    .error-block-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      background: rgba(0, 0, 0, 0.02);
    }

    .error-block-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      font-size: 14px;
    }

    .error-block-close {
      border: none;
      background: transparent;
      cursor: pointer;
      padding: 4px;
      color: #8c8c8c;
      transition: color 0.2s;

      &:hover {
        color: #262626;
      }
    }

    .error-block-content {
      overflow-y: auto;
      padding: 8px;
    }

    .error-block-footer {
      padding: 8px 16px;
      border-top: 1px solid rgba(0, 0, 0, 0.06);
      background: rgba(0, 0, 0, 0.02);
      font-size: 12px;
      color: #8c8c8c;
      text-align: center;
    }

`]
})
export class ErrorBlockComponent implements OnInit, OnDestroy {
private readonly errorRegistry = inject(ErrorRegistry);
private readonly contextService = inject(ContextService);
private readonly eventBus = inject(EventBus);
private readonly destroy$ = new Subject<void>();

errors = signal<RegisteredError[]>([]);
visible = signal(false);
highestSeverity = signal<'warning' | 'error' | 'critical' | null>(null);
maxHeight = signal(300);

ngOnInit() {
this.subscribeToErrors();
}

ngOnDestroy() {
this.destroy$.next();
    this.destroy$.complete();
}

shouldGroupBySection(): boolean {
// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –µ—Å–ª–∏ > 5 –æ—à–∏–±–æ–∫
return this.errors().length > 5;
}

groupedErrors(): { title: string; errors: RegisteredError[] }[] {
const errors = this.errors();
const groups: Record<string, RegisteredError[]> = {
field: [],
form: [],
server: []
};

    errors.forEach(error => {
      if (error.fieldId) {
        groups.field.push(error);
      } else if (error.source === 'http') {
        groups.server.push(error);
      } else {
        groups.form.push(error);
      }
    });

    const result: { title: string; errors: RegisteredError[] }[] = [];

    if (groups.field.length > 0) {
      result.push({ title: '–û—à–∏–±–∫–∏ –ø–æ–ª–µ–π', errors: groups.field });
    }
    if (groups.server.length > 0) {
      result.push({ title: '–°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏', errors: groups.server });
    }
    if (groups.form.length > 0) {
      result.push({ title: '–û–±—â–∏–µ –æ—à–∏–±–∫–∏', errors: groups.form });
    }

    return result;

}

getHeaderIcon(): string {
const severity = this.highestSeverity();
if (severity === 'critical') return 'icon-close-circle';
if (severity === 'error') return 'icon-warning';
return 'icon-info-circle';
}

getHeaderTitle(): string {
const count = this.errors().length;
if (count === 1) return '1 –æ—à–∏–±–∫–∞';
if (count < 5) return `${count} –æ—à–∏–±–∫–∏`;
return `${count} –æ—à–∏–±–æ–∫`;
}

getErrorText(count: number): string {
if (count === 1) return '–æ—à–∏–±–∫–∞';
if (count < 5) return '–æ—à–∏–±–∫–∏';
return '–æ—à–∏–±–æ–∫';
}

handleErrorClick(error: RegisteredError) {
// –ï—Å–ª–∏ –µ—Å—Ç—å fieldId ‚Üí –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å –ø–æ–ª–µ
if (error.fieldId) {
this.highlightField(error.fieldId);
}

    // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –æ—Ç–∫—Ä—ã—Ç—å Right Panel —Å –¥–µ—Ç–∞–ª—è–º–∏
    this.eventBus.publish({
      type: 'rightPanelOpened',
      payload: {
        panelId: 'errors',
        errorId: error.registryId
      }
    });

}

dismissError(registryId: string) {
this.errorRegistry.dismiss(registryId);
}

dismissAll() {
const contextId = this.contextService.getContext().activeArea?.entityId;
if (contextId) {
this.errorRegistry.clearContext(contextId);
}
}

private subscribeToErrors() {
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Error Registry
this.errorRegistry.errors$
      .pipe(takeUntil(this.destroy$))
.subscribe(() => {
const contextId = this.contextService.getContext().activeArea?.entityId;
if (contextId) {
const contextErrors = this.errorRegistry.getAll({
contextId,
lifecycle: 'active',
level: ['contextual', 'local']
});

          this.errors.set(contextErrors);
          this.visible.set(contextErrors.length > 0);

          // –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å severity
          if (contextErrors.length > 0) {
            const hasCritical = contextErrors.some(e =>
              e.errorResponse.status >= 500
            );
            const hasError = contextErrors.some(e =>
              e.errorResponse.status >= 400 && e.errorResponse.status < 500
            );

            if (hasCritical) {
              this.highestSeverity.set('critical');
              this.maxHeight.set(400); // –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö
            } else if (hasError) {
              this.highestSeverity.set('error');
              this.maxHeight.set(300);
            } else {
              this.highestSeverity.set('warning');
              this.maxHeight.set(200);
            }
          } else {
            this.highestSeverity.set(null);
          }
        }
      });

}

private highlightField(fieldId: string) {
// –ù–∞–π—Ç–∏ –ø–æ–ª–µ –≤ DOM –∏ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å
const field = document.querySelector(`[data-field-id="${fieldId}"]`);
if (field) {
field.scrollIntoView({ behavior: 'smooth', block: 'center' });
field.classList.add('is-highlighted');

      // –£–±—Ä–∞—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
      setTimeout(() => {
        field.classList.remove('is-highlighted');
      }, 2000);
    }

}
}

// ===== ERROR ITEM COMPONENT =====

@Component({
selector: 'app-error-item',
standalone: true,
imports: [CommonModule, NzAlertModule, NzIconModule],
template: `    <nz-alert
      [nzType]="getAlertType()"
      [nzMessage]="getMessage()"
      [nzDescription]="getDescription()"
      [nzCloseable]="true"
      (nzOnClose)="dismiss.emit()"
      class="error-item"
      [class.is-clickable]="error().fieldId"
      (click)="handleClick()"
    >
      <ng-template #nzDescription>
        <div class="error-details">
          @if (error().fieldId) {
            <div class="error-field">
              <strong>–ü–æ–ª–µ:</strong> {{ error().fieldId }}
            </div>
          }
          @if (error().errorResponse.recommendation) {
            <div class="error-recommendation">
              üí° {{ error().errorResponse.recommendation }}
            </div>
          }
        </div>
      </ng-template>
    </nz-alert>
 `,
styles: [`
.error-item {
margin-bottom: 8px;

      &.is-clickable {
        cursor: pointer;

        &:hover {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }
      }
    }

    .error-details {
      margin-top: 8px;
      font-size: 13px;
    }

    .error-field {
      margin-bottom: 4px;
      color: #595959;
    }

    .error-recommendation {
      padding: 8px;
      background: #f6ffed;
      border-left: 3px solid #52c41a;
      border-radius: 2px;
      margin-top: 8px;
    }

`]
})
export class ErrorItemComponent {
error = input.required<RegisteredError>();
dismiss = output<void>();

getAlertType(): 'error' | 'warning' | 'info' {
const status = this.error().errorResponse.status;
if (status >= 500) return 'error';
if (status === 409) return 'warning';
if (status >= 400) return 'error';
return 'info';
}

getMessage(): string {
return this.error().errorResponse.getUserMessage();
}

getDescription(): string | undefined {
const details = this.error().errorResponse.details;
if (details && details.length > 0) {
return details.join(', ');
}
return undefined;
}

handleClick() {
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
}
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 5.2.5 –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫?
–ß–ê–°–¢–¨ 5: BODY & FORMS (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
5.2.5 –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
–°—Ü–µ–Ω–∞—Ä–∏–π 1: –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –æ—à–∏–±–∫–∞ (Field-level)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–¶–ï–ù–ê–†–ò–ô 1: –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª—è (Client-side) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–†–ò–ì–ì–ï–†:
User –≤–≤–æ–¥–∏—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π email –≤ –ø–æ–ª–µ —Ñ–æ—Ä–º—ã

–®–ê–ì 1: Angular FormControl Validation
‚îú‚îÄ FormControl.setErrors({ email: true })
‚îú‚îÄ FormControl.markAsTouched()
‚îî‚îÄ FormControl.updateValueAndValidity()

–®–ê–ì 2: FormStateService —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É
‚îú‚îÄ –ù–ï —á–µ—Ä–µ–∑ ErrorHandlingService (—ç—Ç–æ –Ω–µ HTTP)
‚îú‚îÄ –ù–ï —á–µ—Ä–µ–∑ HttpErrorInterceptor
‚îî‚îÄ –ù–∞–ø—Ä—è–º—É—é –≤ Error Registry:
errorRegistry.registerValidationError(
fieldId: 'email',
message: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email',
contextId: 'users-form'
)

–®–ê–ì 3: Error Registry
‚îú‚îÄ –°–æ–∑–¥–∞—ë—Ç RegisteredError:
‚îÇ ‚îú‚îÄ level: 'local'
‚îÇ ‚îú‚îÄ source: 'validation'
‚îÇ ‚îú‚îÄ fieldId: 'email'
‚îÇ ‚îú‚îÄ contextId: 'users-form'
‚îÇ ‚îî‚îÄ lifecycle: 'active'
‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ Event Bus:
type: 'errorRegistered'

–®–ê–ì 4: Form Status Bar —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
‚îú‚îÄ –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ errorRegistry.summary$
‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é —Å–≤–æ–¥–∫—É:
‚îÇ total: 1
‚îÇ byLevel: { field: 1, form: 0, server: 0 }
‚îÇ bySeverity: { error: 1, warning: 0 }
‚îú‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç UI:
‚îÇ [‚ö†Ô∏è] "1 –æ—à–∏–±–∫–∞"
‚îÇ background: #fff2f0
‚îî‚îÄ –ö–Ω–æ–ø–∫–∞ "1 –æ—à–∏–±–∫–∞" ‚Üí –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞

–®–ê–ì 5: Error Block —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
‚îú‚îÄ –ü–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ errorRegistry.errors$
‚îú‚îÄ –§–∏–ª—å—Ç—Ä—É–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ contextId: 'users-form'
‚îú‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ [‚ö†Ô∏è] 1 –æ—à–∏–±–∫–∞ [√ó] ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ Email ‚îÇ
‚îÇ ‚îÇ –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email ‚îÇ
‚îÇ ‚îÇ –ü–æ–ª–µ: email ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ –ù–ï –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç (—Ç–æ–ª—å–∫–æ 1 –æ—à–∏–±–∫–∞)

–®–ê–ì 6: –ü–æ–ª–µ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è
‚îú‚îÄ CSS –∫–ª–∞—Å—Å: .is-invalid –¥–æ–±–∞–≤–ª–µ–Ω –∫ form-control
‚îú‚îÄ –ò–Ω–ª–∞–π–Ω —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥ –ø–æ–ª–µ–º:
‚îÇ <span class="form-error">
‚îÇ –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email
‚îÇ </span>
‚îî‚îÄ –ù–ï —Ç—Ä–µ–±—É–µ—Ç –∫–ª–∏–∫–∞ –Ω–∞ Error Block

–®–ê–ì 7: Right Panel
‚îú‚îÄ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îú‚îÄ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç—É –æ—à–∏–±–∫—É
‚îî‚îÄ –õ–æ–∫–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ Form

–®–ê–ì 8: Toast/Modal
‚îú‚îÄ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
‚îî‚îÄ –¢–æ–ª—å–∫–æ –¥–ª—è HTTP –æ—à–∏–±–æ–∫

–®–ê–ì 9: Global Status Bar
‚îú‚îÄ –ù–ï —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
‚îî‚îÄ –¢–æ–ª—å–∫–æ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
User –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç email ‚Üí –≤–≤–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

–®–ê–ì 1: FormControl
‚îú‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç
‚îú‚îÄ FormControl.setErrors(null)
‚îî‚îÄ FormControl.updateValueAndValidity()

–®–ê–ì 2: FormStateService
‚îú‚îÄ errorRegistry.resolve(registryId)
‚îî‚îÄ –ò–ª–∏ errorRegistry.clearField('email', 'users-form')

–®–ê–ì 3: Error Registry
‚îú‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç lifecycle: 'resolved'
‚îú‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ: 'errorResolved'
‚îî‚îÄ –£–¥–∞–ª—è–µ—Ç –∏–∑ active errors

–®–ê–ì 4: UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚îú‚îÄ Form Status Bar: [‚úì] "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ"
‚îú‚îÄ Error Block: —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
‚îú‚îÄ –ü–æ–ª–µ: —É–±–∏—Ä–∞–µ—Ç—Å—è .is-invalid
‚îî‚îÄ FormStateService: transition('valid')

–°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (422)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–¶–ï–ù–ê–†–ò–ô 2: –°–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (422) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–†–ò–ì–ì–ï–†:
User –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 422 + –º–∞—Å—Å–∏–≤ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ü–†–ï–î–£–°–õ–û–í–ò–ï:
‚îú‚îÄ –§–æ—Ä–º–∞ –ø—Ä–æ—à–ª–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
‚îú‚îÄ FormStateService.state = 'valid'
‚îî‚îÄ User –∫–ª–∏–∫–Ω—É–ª Save

–®–ê–ì 1: Command Service
‚îú‚îÄ commandService.execute('save', formData)
‚îú‚îÄ FormStateService.transition('saving')
‚îú‚îÄ Context.dataState.operation = 'saving'
‚îî‚îÄ Form Status Bar: [‚è≥] "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..."

–®–ê–ì 2: HTTP Request
‚îú‚îÄ POST /api/users
‚îú‚îÄ Body: { name: "John", email: "john@", age: 15 }
‚îî‚îÄ Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è:
‚îú‚îÄ email: "Invalid format"
‚îú‚îÄ age: "Must be 18+"
‚îú‚îÄ phone: "Required field"
‚îî‚îÄ status: 422

–®–ê–ì 3: HttpErrorInterceptor –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç
‚îú‚îÄ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å: 422
‚îú‚îÄ –°–æ–∑–¥–∞—ë—Ç ErrorResponse:
‚îÇ {
‚îÇ status: 422,
‚îÇ title: "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
‚îÇ detail: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π",
‚îÇ details: [
‚îÇ "Email: Invalid format",
‚îÇ "Age: Must be 18+",
‚îÇ "Phone: Required field"
‚îÇ ]
‚îÇ }
‚îî‚îÄ –í—ã–∑—ã–≤–∞–µ—Ç: errorHandlingService.handleError()

–®–ê–ì 4: ErrorHandlingService –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è 422:
‚îÇ showModal: false
‚îÇ showMessage: true ‚Üê TOAST
‚îÇ showTechnicalInfo: false
‚îÇ
‚îú‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤ Error Registry:
‚îÇ level: 'contextual' (form-level)
‚îÇ source: 'http'
‚îÇ contextId: 'users-form'
‚îÇ errorResponse: {...}
‚îÇ
‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç TOAST:
‚îÇ [‚ö†Ô∏è] "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π"
‚îÇ duration: 5000ms
‚îÇ auto-close: true
‚îÇ
‚îú‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ:
‚îÇ type: 'errorRegistered'
‚îÇ payload: { registryId, errorResponse, level }
‚îÇ
‚îî‚îÄ FormStateService.transition('invalid')

–®–ê–ì 5: Form Status Bar –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ 'errorRegistered'
‚îú‚îÄ errorRegistry.summary$ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
‚îÇ total: 3
‚îÇ byLevel: { field: 0, form: 0, server: 3 }
‚îÇ bySeverity: { error: 3, warning: 0 }
‚îÇ
‚îú‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
‚îÇ [‚ö†Ô∏è] "5 –æ—à–∏–±–æ–∫" [–ö–ª–∏–∫]
‚îÇ background: #fff2f0
‚îÇ border: #ffccc7
‚îÇ
‚îî‚îÄ state: 'invalid'

–®–ê–ì 6: Error Block –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
‚îú‚îÄ visible: true
‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫–∏ –∏–∑ Registry:
‚îÇ contextId: 'users-form'
‚îÇ lifecycle: 'active'
‚îÇ
‚îú‚îÄ –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç (>5 –æ—à–∏–±–æ–∫):
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ [‚ö†Ô∏è] 5 –æ—à–∏–±–æ–∫ [√ó] ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ ‚ñº –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ (3) ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Email: Invalid format ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Age: Must be 18+ ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Phone: Required field ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚ñº –û—à–∏–±–∫–∏ –ø–æ–ª–µ–π (2) ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Username: Already exists ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Password: Too weak ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ
‚îú‚îÄ maxHeight: 300px
‚îú‚îÄ overflow-y: auto
‚îî‚îÄ –ö–ª–∏–∫ –Ω–∞ –æ—à–∏–±–∫—É ‚Üí scroll –∫ –ø–æ–ª—é + focus

–®–ê–ì 7: –ü–æ–ª—è –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—é—Ç—Å—è
‚îú‚îÄ –î–ª—è –∫–∞–∂–¥–æ–π –æ—à–∏–±–∫–∏ —Å fieldId:
‚îÇ ‚îú‚îÄ –î–æ–±–∞–≤–∏—Ç—å .is-invalid –∫ –ø–æ–ª—é
‚îÇ ‚îú‚îÄ –ü–æ–∫–∞–∑–∞—Ç—å inline —Å–æ–æ–±—â–µ–Ω–∏–µ
‚îÇ ‚îî‚îÄ FormControl.setErrors()
‚îÇ
‚îî‚îÄ –î–ª—è –æ—à–∏–±–æ–∫ –±–µ–∑ fieldId:
‚îî‚îÄ –¢–æ–ª—å–∫–æ –≤ Error Block

–®–ê–ì 8: Right Panel (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ –ö–ª–∏–∫ –Ω–∞ –æ—à–∏–±–∫—É –≤ Error Block
‚îú‚îÄ eventBus.publish('rightPanelOpened', { panelId: 'errors' })
‚îú‚îÄ Right Panel –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø–∞–Ω–µ–ª—å—é "Errors"
‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ √ó Errors Panel ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ Correlation ID: ‚îÇ
‚îÇ ‚îÇ err_1234567890_abc123 ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Timestamp: ‚îÇ
‚îÇ ‚îÇ 2024-12-17 15:30:45 ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Request URL: ‚îÇ
‚îÇ ‚îÇ POST /api/users ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚îÇ
‚îÇ ‚îÇ –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–µ ‚îÇ
‚îÇ ‚îÇ (–≤—ã–¥–µ–ª–µ–Ω—ã –∫—Ä–∞—Å–Ω—ã–º) –∏ ‚îÇ
‚îÇ ‚îÇ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–Ω–æ–≤–æ. ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–®–ê–ì 9: Global Status Bar
‚îú‚îÄ –ù–ï —Ä–µ–∞–≥–∏—Ä—É–µ—Ç (—ç—Ç–æ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞)
‚îî‚îÄ –û—Å—Ç–∞—ë—Ç—Å—è: [‚úì] "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"

–®–ê–ì 10: Context –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚îú‚îÄ dataState.operation = null
‚îú‚îÄ dataState.valid = false
‚îú‚îÄ mode –æ—Å—Ç–∞—ë—Ç—Å—è 'edit'
‚îî‚îÄ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ (–º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
User –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ –ø–æ–ª—è –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ –Ω–∞–∂–∏–º–∞–µ—Ç Save

–®–ê–ì 1: –§–æ—Ä–º–∞ –≤–∞–ª–∏–¥–Ω–∞
‚îú‚îÄ –í—Å–µ FormControl.valid = true
‚îú‚îÄ Error Registry –æ—á–∏—â–µ–Ω –æ—Ç —Å—Ç–∞—Ä—ã—Ö –æ—à–∏–±–æ–∫
‚îî‚îÄ FormStateService.state = 'valid'

–®–ê–ì 2: Command Service
‚îú‚îÄ commandService.execute('save', formData)
‚îú‚îÄ FormStateService.transition('saving')
‚îî‚îÄ Form Status Bar: [‚è≥] "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..."

–®–ê–ì 3: Backend Success (200)
‚îú‚îÄ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
‚îî‚îÄ Response: { id: 123, name: "John", ... }

–®–ê–ì 4: Command Service Success
‚îú‚îÄ FormStateService.transition('valid')
‚îú‚îÄ FormStateService.markAsSaved()
‚îú‚îÄ Context.dataState.dirty = false
‚îú‚îÄ Context.dataState.operation = null
‚îî‚îÄ metadata.lastSaved = new Date()

–®–ê–ì 5: Form Status Bar
‚îú‚îÄ [‚úì] "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ"
‚îú‚îÄ background: #f6ffed
‚îî‚îÄ "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ 15:31"

–®–ê–ì 6: Error Block
‚îú‚îÄ visible: false
‚îî‚îÄ –°–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–Ω–µ—Ç –æ—à–∏–±–æ–∫)

–®–ê–ì 7: Toast Success (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îú‚îÄ message.success("–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
‚îî‚îÄ duration: 3000ms

–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö (409)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–¶–ï–ù–ê–†–ò–ô 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–∞–Ω–Ω—ã—Ö (409) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–†–ò–ì–ì–ï–†:
User –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å email,
–∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ

–®–ê–ì 1: Command Service
‚îú‚îÄ commandService.execute('save', { email: "admin@example.com" })
‚îú‚îÄ FormStateService.transition('saving')
‚îî‚îÄ POST /api/users

–®–ê–ì 2: Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 409
‚îú‚îÄ Status: 409 Conflict
‚îú‚îÄ Response:
‚îÇ {
‚îÇ title: "–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
‚îÇ status: 409,
‚îÇ detail: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
‚îÇ conflictField: "email",
‚îÇ entityName: "User"
‚îÇ }
‚îî‚îÄ HttpErrorInterceptor –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç

–®–ê–ì 3: ErrorHandlingService
‚îú‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 409:
‚îÇ showModal: false ‚Üê –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Modal
‚îÇ showMessage: false ‚Üê –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å Toast
‚îÇ ‚Üí –¢–æ–ª—å–∫–æ Registry!
‚îÇ
‚îú‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤ Error Registry:
‚îÇ level: 'contextual'
‚îÇ source: 'http'
‚îÇ contextId: 'users-form'
‚îÇ fieldId: 'email' ‚Üê –í–ê–ñ–ù–û
‚îÇ errorResponse: {...}
‚îÇ
‚îî‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ

–®–ê–ì 4: Form Status Bar
‚îú‚îÄ [‚ö†Ô∏è] "1 –æ—à–∏–±–∫–∞"
‚îú‚îÄ background: #fffbe6 (warning)
‚îî‚îÄ border: #ffe58f

–®–ê–ì 5: Error Block
‚îú‚îÄ visible: true
‚îú‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ [‚ö†Ô∏è] 1 –æ—à–∏–±–∫–∞ [√ó] ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚îÇ
‚îÇ ‚îÇ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email ‚îÇ
‚îÇ ‚îÇ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ –ü–æ–ª–µ: email ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è "email" ‚îÇ
‚îÇ ‚îÇ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ
‚îî‚îÄ level: 'warning' (–Ω–µ 'error')

–®–ê–ì 6: –ü–æ–ª–µ email –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è
‚îú‚îÄ .is-invalid –∫–ª–∞—Å—Å
‚îú‚îÄ border: orange (warning)
‚îú‚îÄ inline —Å–æ–æ–±—â–µ–Ω–∏–µ:
‚îÇ "Email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è"
‚îî‚îÄ Focus –Ω–∞ –ø–æ–ª–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –æ—à–∏–±–∫—É

–®–ê–ì 7: Right Panel (–ø—Ä–∏ –∫–ª–∏–∫–µ)
‚îú‚îÄ User –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ –æ—à–∏–±–∫—É –≤ Error Block
‚îú‚îÄ Right Panel "Errors" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ √ó Errors Panel ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –ö–æ–Ω—Ñ–ª–∏–∫—Ç–Ω–æ–µ –ø–æ–ª–µ: ‚îÇ
‚îÇ ‚îÇ email ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ –°—É—â–Ω–æ—Å—Ç—å: ‚îÇ
‚îÇ ‚îÇ User ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚îÇ
‚îÇ ‚îÇ –ò–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è "email" ‚îÇ
‚îÇ ‚îÇ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Correlation ID: ‚îÇ
‚îÇ ‚îÇ err_1234567890_xyz789 ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–®–ê–ì 8: Toast/Modal
‚îú‚îÄ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
‚îî‚îÄ –ü–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ 409: —Ç–æ–ª—å–∫–æ Registry

–®–ê–ì 9: Global Status Bar
‚îú‚îÄ –ù–ï —Ä–µ–∞–≥–∏—Ä—É–µ—Ç
‚îî‚îÄ [‚úì] "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"

–®–ê–ì 10: FormStateService
‚îú‚îÄ state: 'invalid'
‚îú‚îÄ valid: false
‚îú‚îÄ dirty: true (–º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
‚îî‚îÄ Context.mode –æ—Å—Ç–∞—ë—Ç—Å—è 'edit'

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
User –∏–∑–º–µ–Ω—è–µ—Ç email –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π

–®–ê–ì 1: FormControl
‚îú‚îÄ User –≤–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π email
‚îú‚îÄ FormControl.markAsDirty()
‚îú‚îÄ FormStateService.markAsDirty()
‚îî‚îÄ Error Registry: –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞—ë—Ç—Å—è (–¥–æ Save)

–®–ê–ì 2: User –Ω–∞–∂–∏–º–∞–µ—Ç Save
‚îú‚îÄ FormStateService.transition('saving')
‚îî‚îÄ POST /api/users —Å –Ω–æ–≤—ã–º email

–®–ê–ì 3: Backend Success (201)
‚îú‚îÄ User —Å–æ–∑–¥–∞–Ω
‚îî‚îÄ Response: { id: 124, email: "new@example.com" }

–®–ê–ì 4: –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ errorRegistry.resolve(registryId)
‚îú‚îÄ FormStateService.transition('valid')
‚îú‚îÄ FormStateService.markAsSaved()
‚îî‚îÄ Error Block: visible = false

–®–ê–ì 5: Form Status Bar
‚îú‚îÄ [‚úì] "–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ"
‚îî‚îÄ "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ 15:35"

–°—Ü–µ–Ω–∞—Ä–∏–π 4: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ (500)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–¶–ï–ù–ê–†–ò–ô 4: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ (500) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–†–ò–ì–ì–ï–†:
User –Ω–∞–∂–∏–º–∞–µ—Ç Save, Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500

–®–ê–ì 1: Command Service
‚îú‚îÄ commandService.execute('save', formData)
‚îú‚îÄ FormStateService.transition('saving')
‚îî‚îÄ POST /api/users

–®–ê–ì 2: Backend 500 Internal Server Error
‚îú‚îÄ Status: 500
‚îú‚îÄ Response:
‚îÇ {
‚îÇ title: "–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞",
‚îÇ status: 500,
‚îÇ detail: "Internal server error",
‚îÇ type: "https://httpstatuses.com/500",
‚îÇ correlationId: "err_1234567890_abc"
‚îÇ }
‚îî‚îÄ HttpErrorInterceptor –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç

–®–ê–ì 3: ErrorHandlingService
‚îú‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 500:
‚îÇ showModal: true ‚Üê MODAL!
‚îÇ showMessage: false
‚îÇ autoRedirect: true ‚Üê –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
‚îÇ showTechnicalInfo: true ‚Üê Correlation ID
‚îÇ
‚îú‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤ Error Registry:
‚îÇ level: 'global' ‚Üê –í–ê–ñ–ù–û!
‚îÇ source: 'http'
‚îÇ contextId: 'users-form'
‚îÇ errorResponse: {...}
‚îÇ
‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç MODAL:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ ‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (500) ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –û–ø–∏—Å–∞–Ω–∏–µ: ‚îÇ
‚îÇ ‚îÇ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. ‚îÇ
‚îÇ ‚îÇ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ. ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å: ‚îÇ
‚îÇ ‚îÇ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é ‚îÇ
‚îÇ ‚îÇ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ ‚îÇ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: ‚îÇ
‚îÇ ‚îÇ ID –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏: ‚îÇ
‚îÇ ‚îÇ err_1234567890_abc ‚îÇ
‚îÇ ‚îÇ Endpoint: POST /api/users ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ [–ü–æ–Ω—è—Ç–Ω–æ] ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ width: 600px
‚îÇ closable: true
‚îÇ
‚îú‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ: 'errorRegistered'
‚îÇ
‚îî‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç Context:
operationalState.locks.push({
id: 'error-err_1234567890_abc',
reason: 'Server error: 500',
source: 'system'
})

–®–ê–ì 4: Form Status Bar
‚îú‚îÄ [‚ùå] "–°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞"
‚îú‚îÄ background: #fff2f0
‚îú‚îÄ border: #ffccc7
‚îî‚îÄ state: 'error'

–®–ê–ì 5: Error Block
‚îú‚îÄ visible: true
‚îú‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ [‚ùå] 1 –æ—à–∏–±–∫–∞ [√ó] ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ ‚îÇ
‚îÇ ‚îÇ –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞. ‚îÇ
‚îÇ ‚îÇ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ. ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é ‚îÇ
‚îÇ ‚îÇ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç. ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ
‚îî‚îÄ maxHeight: 400px (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è)

–®–ê–ì 6: Global Status Bar (–í–ê–ñ–ù–û!)
‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ 'errorRegistered'
‚îú‚îÄ level: 'global' ‚Üí —Ä–µ–∞–≥–∏—Ä—É–µ—Ç!
‚îú‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
‚îÇ [‚ùå] "–°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞" [–ö–ª–∏–∫]
‚îÇ background: #ff4d4f
‚îÇ color: #fff
‚îÇ animation: pulse
‚îÇ
‚îî‚îÄ –ö–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Modal (—Ç–æ—Ç –∂–µ, —á—Ç–æ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç)

–®–ê–ì 7: Context –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚îú‚îÄ Context.operationalState.locks: [...]
‚îú‚îÄ commandService.isAvailable('save') ‚Üí false
‚îú‚îÄ commandService.isAvailable('delete') ‚Üí false
‚îî‚îÄ –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã

–®–ê–ì 8: Form UI –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚îú‚îÄ –í—Å–µ inputs: disabled (—á–µ—Ä–µ–∑ Context)
‚îú‚îÄ –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π: disabled
‚îú‚îÄ Form Status Bar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç lock icon: üîí
‚îî‚îÄ Tooltip: "–§–æ—Ä–º–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑-–∑–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–π –æ—à–∏–±–∫–∏"

–®–ê–ì 9: Right Panel
‚îú‚îÄ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îú‚îÄ –ö–ª–∏–∫ –Ω–∞ –æ—à–∏–±–∫—É ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ √ó Debug Panel ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ Status: 500 ‚îÇ
‚îÇ ‚îÇ Correlation ID: ‚îÇ
‚îÇ ‚îÇ err_1234567890_abc ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Timestamp: ‚îÇ
‚îÇ ‚îÇ 2024-12-17 15:40:12 ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Request: ‚îÇ
‚îÇ ‚îÇ POST /api/users ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ Retryable: false ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ visible —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ debug mode

–®–ê–ì 10: Auto-redirect
‚îú‚îÄ User –∑–∞–∫—Ä—ã–≤–∞–µ—Ç Modal
‚îú‚îÄ modalRef.afterClose.subscribe()
‚îú‚îÄ autoRedirect: true
‚îú‚îÄ router.navigate(['/'])
‚îî‚îÄ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

–®–ê–ì 11: FormStateService
‚îú‚îÄ state: 'error'
‚îú‚îÄ valid: false
‚îú‚îÄ dirty: true
‚îî‚îÄ metadata.saveAttempts++

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï:
Backend —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω (–ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω)

–®–ê–ì 1: Health Check (—Ñ–æ–Ω–æ–≤—ã–π)
‚îú‚îÄ setInterval(() => ping('/api/health'), 30000)
‚îú‚îÄ GET /api/health ‚Üí 200 OK
‚îî‚îÄ Backend —Å–Ω–æ–≤–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

–®–ê–ì 2: Context –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚îú‚îÄ operationalState.backendAvailable = true
‚îú‚îÄ operationalState.locks = [] (–æ—á–∏—Å—Ç–∫–∞)
‚îî‚îÄ eventBus.publish('backendAvailable')

–®–ê–ì 3: Global Status Bar
‚îú‚îÄ [‚úì] "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"
‚îú‚îÄ background: #f6ffed
‚îî‚îÄ –£–±—Ä–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—à–∏–±–∫–∏

–®–ê–ì 4: Error Registry
‚îú‚îÄ –°—Ç–∞—Ä—ã–µ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ lifecycle: 'active'
‚îú‚îÄ User –º–æ–∂–µ—Ç –æ—á–∏—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é
‚îî‚îÄ –ò–ª–∏ auto-clear –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

–®–ê–ì 5: Form —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚îú‚îÄ Inputs: enabled
‚îú‚îÄ Buttons: enabled
‚îî‚îÄ User –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å Save

–°—Ü–µ–Ω–∞—Ä–∏–π 5: –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ (0)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–¶–ï–ù–ê–†–ò–ô 5: –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ (Network Error) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–¢–†–ò–ì–ì–ï–†:
User –Ω–∞–∂–∏–º–∞–µ—Ç Save, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

–®–ê–ì 1: Command Service
‚îú‚îÄ commandService.execute('save', formData)
‚îú‚îÄ FormStateService.transition('saving')
‚îî‚îÄ POST /api/users (timeout)

–®–ê–ì 2: HttpErrorResponse (status: 0)
‚îú‚îÄ HttpErrorResponse.status = 0
‚îú‚îÄ HttpErrorResponse.statusText = "Unknown Error"
‚îú‚îÄ HttpErrorResponse.error = null
‚îî‚îÄ HttpErrorInterceptor –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç

–®–ê–ì 3: ErrorHandlingService
‚îú‚îÄ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç status: 0
‚îú‚îÄ –°–æ–∑–¥–∞—ë—Ç ErrorResponse.createNetworkError()
‚îÇ {
‚îÇ title: "–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º",
‚îÇ status: 0,
‚îÇ detail: "–ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É",
‚îÇ userMessage: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ",
‚îÇ retryable: true
‚îÇ }
‚îÇ
‚îú‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è 0:
‚îÇ showModal: false
‚îÇ showMessage: true ‚Üê TOAST
‚îÇ autoRedirect: false
‚îÇ
‚îú‚îÄ –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤ Error Registry:
‚îÇ level: 'global' ‚Üê –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ = –≥–ª–æ–±–∞–ª—å–Ω–∞—è
‚îÇ source: 'http'
‚îÇ errorResponse: {...}
‚îÇ
‚îú‚îÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç TOAST:
‚îÇ [üì°] "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
‚îÇ duration: 5000ms
‚îÇ type: 'error'
‚îÇ
‚îú‚îÄ –ü—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ
‚îÇ
‚îî‚îÄ –û–±–Ω–æ–≤–ª—è–µ—Ç Context:
operationalState.backendAvailable = false

–®–ê–ì 4: Global Status Bar (–í–ê–ñ–ù–û!)
‚îú‚îÄ level: 'global' ‚Üí —Ä–µ–∞–≥–∏—Ä—É–µ—Ç!
‚îú‚îÄ –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:
‚îÇ [üì°] "Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" [–ö–ª–∏–∫]
‚îÇ background: #ff4d4f
‚îÇ color: #fff
‚îÇ
‚îú‚îÄ –ö–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Modal:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ üì° Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –ù–µ —É–¥–∞—ë—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É. ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ‚îÇ
‚îÇ ‚îÇ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É ‚îÇ
‚îÇ ‚îÇ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É. ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ [–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É] ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ
‚îî‚îÄ nzOnOk: () => window.location.reload()

–®–ê–ì 5: Form Status Bar
‚îú‚îÄ [‚ö†Ô∏è] "–°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞"
‚îú‚îÄ background: #fff2f0
‚îî‚îÄ state: 'error'

–®–ê–ì 6: Error Block
‚îú‚îÄ visible: true
‚îú‚îÄ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚îÇ [üì°] 1 –æ—à–∏–±–∫–∞ [√ó] ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ‚îÇ –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º ‚îÇ
‚îÇ ‚îÇ –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É ‚îÇ
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ üí° –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ‚îÇ
‚îÇ ‚îÇ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞. ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π

–®–ê–ì 7: Context –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚îú‚îÄ operationalState.backendAvailable = false
‚îú‚îÄ commandService.isAvailable() ‚Üí false (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã)
‚îî‚îÄ –§–æ—Ä–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ read-only

–®–ê–ì 8: Form UI
‚îú‚îÄ Inputs: –ù–ï disabled (–º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å)
‚îú‚îÄ –ö–Ω–æ–ø–∫–∞ Save: disabled
‚îú‚îÄ Tooltip: "Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
‚îî‚îÄ User –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö

–®–ê–ì 9: FormStateService
‚îú‚îÄ state: 'error'
‚îú‚îÄ dirty: true (–¥–∞–Ω–Ω—ã–µ –ù–ï –ø–æ—Ç–µ—Ä—è–Ω—ã)
‚îî‚îÄ –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–®–ê–ì 10: Right Panel
‚îú‚îÄ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
‚îî‚îÄ –ù–µ—Ç —Å–º—ã—Å–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —Å–µ—Ç–µ–≤–æ–π –æ—à–∏–±–∫–∏

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

–í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï:
–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –ø–æ—è–≤–∏–ª—Å—è

–®–ê–ì 1: Retry –º–µ—Ö–∞–Ω–∏–∑–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)
‚îú‚îÄ HttpClient: retry(3)
‚îú‚îÄ –ò–ª–∏ User –Ω–∞–∂–∏–º–∞–µ—Ç "–û–±–Ω–æ–≤–∏—Ç—å"
‚îî‚îÄ Backend —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–µ–Ω

–®–ê–ì 2: Context –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚îú‚îÄ operationalState.backendAvailable = true
‚îú‚îÄ eventBus.publish('backendAvailable')
‚îî‚îÄ –û—á–∏—Å—Ç–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

–®–ê–ì 3: Global Status Bar
‚îú‚îÄ –£–±–∏—Ä–∞–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä üì°
‚îî‚îÄ [‚úì] "–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ"

–®–ê–ì 4: Error Block
‚îú‚îÄ visible: false (–µ—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—á–∏—â–µ–Ω—ã)
‚îî‚îÄ –ò–ª–∏ –æ—Å—Ç–∞—ë—Ç—Å—è, –ø–æ–∫–∞ User –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç

–®–ê–ì 5: Form —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
‚îú‚îÄ –ö–Ω–æ–ø–∫–∞ Save: enabled
‚îú‚îÄ FormStateService: state = 'dirty'
‚îî‚îÄ User –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å Save

5.2.6 UX-–ø—Ä–∞–≤–∏–ª–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø–æ–ª–µ–π –∏ —Å—Ç—Ä–æ–∫
// ===== UX –ü–†–ê–í–ò–õ–ê –ü–û–î–°–í–ï–¢–ö–ò =====

/\*\*

- –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
  \*/
  export const FIELD_HIGHLIGHT_RULES = {
  // 1. INVALID FIELD (–∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è)
  clientValidation: {
  trigger: 'FormControl.invalid && FormControl.touched',
  cssClass: 'is-invalid',
  borderColor: '#ff4d4f',
  backgroundColor: '#fff2f0',
  showInlineError: true,
  errorPosition: 'below', // –ø–æ–¥ –ø–æ–ª–µ–º
  errorStyle: {
  color: '#ff4d4f',
  fontSize: '12px',
  marginTop: '4px'
  }
  },

// 2. SERVER ERROR (422 —Å fieldId)
serverValidation: {
trigger: 'ErrorRegistry contains error with fieldId',
cssClass: 'is-invalid is-server-error',
borderColor: '#ff4d4f',
backgroundColor: '#fff2f0',
showInlineError: true,
errorPosition: 'below',
icon: 'icon-warning',
errorStyle: {
color: '#ff4d4f',
fontSize: '12px',
marginTop: '4px',
fontWeight: '500'
}
},

// 3. CONFLICT (409 —Å conflictField)
conflict: {
trigger: 'ErrorRegistry contains 409 error',
cssClass: 'is-invalid is-conflict',
borderColor: '#faad14',
backgroundColor: '#fffbe6',
showInlineError: true,
showRecommendation: true,
errorStyle: {
color: '#d48806',
fontSize: '12px',
marginTop: '4px'
}
},

// 4. FOCUSED ON ERROR (–∫–ª–∏–∫ –∏–∑ Error Block)
highlighted: {
trigger: 'User clicked error in Error Block',
cssClass: 'is-highlighted',
animation: 'highlight-pulse 2s ease-out',
scrollBehavior: 'smooth',
scrollBlock: 'center',
focusField: true,
removeDuration: 2000 // ms
},

// 5. READONLY
readonly: {
trigger: 'Context.mode === "readonly"',
cssClass: 'is-readonly',
disabled: true,
backgroundColor: '#f5f5f5',
cursor: 'not-allowed'
}
};

/\*\*

- –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã
  \*/
  export const ROW_HIGHLIGHT_RULES = {
  // 1. INVALID ROW (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è –æ—à–∏–±–∫–∞ —Å rowId)
  invalid: {
  trigger: 'ErrorRegistry contains error with rowId',
  cssClass: 'is-invalid',
  backgroundColor: '#fff2f0',
  borderLeft: '3px solid #ff4d4f',
  icon: {
  position: 'first-column',
  iconKey: 'icon-warning',
  color: '#ff4d4f',
  tooltip: '–ï—Å—Ç—å –æ—à–∏–±–∫–∏ –≤ —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–µ'
  },
  showInErrorBlock: true
  },

// 2. WARNING ROW (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)
warning: {
trigger: 'ErrorRegistry contains warning with rowId',
cssClass: 'is-warning',
backgroundColor: '#fffbe6',
borderLeft: '3px solid #faad14',
icon: {
position: 'first-column',
iconKey: 'icon-info-circle',
color: '#faad14',
tooltip: '–ï—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è'
}
},

// 3. SELECTED ROW
selected: {
trigger: 'Context.selection.selectedIds includes rowId',
cssClass: 'is-selected',
backgroundColor: '#e6f7ff',
borderLeft: '3px solid #1890ff',
checkbox: {
checked: true
}
},

// 4. HIGHLIGHTED ROW (–∫–ª–∏–∫ –∏–∑ Error Block)
highlighted: {
trigger: 'User clicked row error in Error Block',
cssClass: 'is-highlighted',
animation: 'highlight-pulse 2s ease-out',
scrollBehavior: 'smooth',
scrollBlock: 'center',
removeDuration: 2000
}
};

CSS –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏:
// ===== FIELD STYLES =====

.form-control {
transition: all 0.3s;
border: 1px solid #d9d9d9;

&.is-invalid {
border-color: #ff4d4f;
background-color: #fff2f0;

    &:focus {
      border-color: #ff4d4f;
      box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
    }

}

&.is-conflict {
border-color: #faad14;
background-color: #fffbe6;

    &:focus {
      border-color: #faad14;
      box-shadow: 0 0 0 2px rgba(250, 173, 20, 0.2);
    }

}

&.is-highlighted {
animation: highlight-pulse 2s ease-out;
}

&.is-readonly {
background-color: #f5f5f5;
cursor: not-allowed;
pointer-events: none;
}
}

.form-error {
display: block;
color: #ff4d4f;
font-size: 12px;
margin-top: 4px;
animation: slide-down 0.3s ease-out;
}

@keyframes highlight-pulse {
0%, 100% {
box-shadow: 0 0 0 0 rgba(24, 144, 255, 0);
}
50% {
box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.4);
}
}

@keyframes slide-down {
from {
opacity: 0;
transform: translateY(-4px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

// ===== TABLE ROW STYLES =====

.table-row {
transition: all 0.3s;

&.is-invalid {
background-color: #fff2f0;
border-left: 3px solid #ff4d4f;

    &:hover {
      background-color: #ffe7e5;
    }

}

&.is-warning {
background-color: #fffbe6;
border-left: 3px solid #faad14;

    &:hover {
      background-color: #fff7d1;
    }

}

&.is-selected {
background-color: #e6f7ff;
border-left: 3px solid #1890ff;

    &:hover {
      background-color: #d1edff;
    }

}

&.is-highlighted {
animation: highlight-pulse 2s ease-out;
}
}

.row-error-icon {
display: inline-flex;
align-items: center;
justify-content: center;
width: 20px;
height: 20px;
border-radius: 50%;

&.is-error {
color: #ff4d4f;
background-color: #fff2f0;
}

}

&.is-warning {
color: #faad14;
background-color: #fffbe6;
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 5.3 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–±—ë—Ä—Ç–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)?

–ß–ê–°–¢–¨ 5: BODY & FORMS (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
5.3 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
ng-zorro –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (Grid, Table, Pagination, Modal, Input/Select). –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ng-zorro –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –æ–±—ë—Ä—Ç—ã–≤–∞—é—Ç—Å—è —Å–≤–æ–∏–º–∏ –∫–ª–∞—Å—Å–∞–º–∏. –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .ant-\* –∫–ª–∞—Å—Å–æ–≤ –ó–ê–ü–†–ï–©–ï–ù–û.
–ü—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–†–ò–ù–¶–ò–ü–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò NG-ZORRO ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. ng-zorro = UI-–ò–ù–§–†–ê–°–¢–†–£–ö–¢–£–†–ê
   ‚úÖ Grid (nz-row, nz-col)
   ‚úÖ Table (nz-table)
   ‚úÖ Pagination (nz-pagination)
   ‚úÖ Modal (nz-modal)
   ‚úÖ Message (nz-message)
   ‚úÖ Input/Select (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚úÖ Icons (nz-icon —á–µ—Ä–µ–∑ Icon Provider)

2. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –û–ë–Å–†–¢–ö–ê
   ‚ùå <nz-table> –Ω–∞–ø—Ä—è–º—É—é
   ‚úÖ <div class="table-panel"><nz-table></nz-table></div>

3. –ó–ê–ü–†–ï–¢ –ù–ê .ant-\* –ö–õ–ê–°–°–´
   ‚ùå .ant-table { color: red }
   ‚úÖ .table-panel { color: red }

4. –°–ï–ú–ê–ù–¢–ò–ö–ê ‚Äî –ù–ê–®–ê
   ng-zorro –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ ‚Äî –Ω–∞—à–∏ –∫–ª–∞—Å—Å—ã

5. –ó–ê–ú–ï–ù–ê –í –ë–£–î–£–©–ï–ú
   –û–±—ë—Ä—Ç–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–º–µ–Ω–∏—Ç—å ng-zorro
   –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è HTML/–ª–æ–≥–∏–∫–∏

5.3.1 Grid System (nz-row / nz-col)
// ===== GRID WRAPPER COMPONENT =====

@Component({
selector: 'app-grid-row',
standalone: true,
imports: [CommonModule, NzGridModule],
template: `    <nz-row
      [nzGutter]="gutter()"
      [nzAlign]="align()"
      [nzJustify]="justify()"
      class="grid-row"
    >
      <ng-content></ng-content>
    </nz-row>
 `,
styles: [`
.grid-row {
/* –ù–∞—à–∏ —Å—Ç–∏–ª–∏ –¥–ª—è grid-row */
/* –ù–ï —Å—Ç–∏–ª–∏–∑—É–µ–º .ant-row –Ω–∞–ø—Ä—è–º—É—é */
}
`]
})
export class GridRowComponent {
gutter = input<number | [number, number]>(16);
align = input<'top' | 'middle' | 'bottom'>('top');
justify = input<'start' | 'end' | 'center' | 'space-around' | 'space-between'>('start');
}

@Component({
selector: 'app-grid-col',
standalone: true,
imports: [CommonModule, NzGridModule],
template: `    <nz-col
      [nzSpan]="span()"
      [nzOffset]="offset()"
      [nzPush]="push()"
      [nzPull]="pull()"
      [nzXs]="xs()"
      [nzSm]="sm()"
      [nzMd]="md()"
      [nzLg]="lg()"
      [nzXl]="xl()"
      [nzXXl]="xxl()"
      class="grid-col"
    >
      <ng-content></ng-content>
    </nz-col>
 `,
styles: [`
.grid-col {
/* –ù–∞—à–∏ —Å—Ç–∏–ª–∏ –¥–ª—è grid-col */
}
`]
})
export class GridColComponent {
span = input<number>(24);
offset = input<number>(0);
push = input<number>(0);
pull = input<number>(0);

// Responsive
xs = input<number | { span: number; offset?: number }>();
sm = input<number | { span: number; offset?: number }>();
md = input<number | { span: number; offset?: number }>();
lg = input<number | { span: number; offset?: number }>();
xl = input<number | { span: number; offset?: number }>();
xxl = input<number | { span: number; offset?: number }>();
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Grid:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø GRID =====

@Component({
selector: 'app-user-form',
template: `
<app-page-shell [config]="pageConfig()">
<app-grid-row [gutter]="16">
<!-- Left Column -->
<app-grid-col [span]="16">
<section class="page-body">
<h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
<!-- Form fields -->
</section>
</app-grid-col>

        <!-- Right Column -->
        <app-grid-col [span]="8">
          <aside class="page-sidebar">
            <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h3>
            <!-- Metadata -->
          </aside>
        </app-grid-col>
      </app-grid-row>
    </app-page-shell>

`,
  styles: [`
.page-body {
/_ –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ _/
background: #fff;
padding: 24px;
border-radius: 4px;
}

    .page-sidebar {
      /* –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∏–ª–∏ –¥–ª—è sidebar */
      background: #fafafa;
      padding: 16px;
      border-radius: 4px;
    }

`]
})
export class UserFormComponent {
// ...
}

5.3.2 Table Wrapper
// ===== TABLE WRAPPER INTERFACES =====

export interface TableConfig<T = any> {
// –î–∞–Ω–Ω—ã–µ
data: T[];

// –ö–æ–ª–æ–Ω–∫–∏
columns: TableColumn<T>[];

// –°–æ—Å—Ç–æ—è–Ω–∏—è
loading?: boolean;
bordered?: boolean;
size?: 'default' | 'middle' | 'small';

// –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ wrapper - —á–µ—Ä–µ–∑ page-footer)
showPagination?: false;

// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
sortable?: boolean;

// Selection
selectable?: boolean;
selectedRows?: T[];

// –°–æ–±—ã—Ç–∏—è
onRowClick?: (row: T) => void;
onSelectionChange?: (selected: T[]) => void;
}

export interface TableColumn<T = any> {
key: string;
title: string;
width?: string;
align?: 'left' | 'center' | 'right';
sortable?: boolean;
render?: (value: any, row: T) => string | TemplateRef<any>;
cellClass?: (row: T) => string;
}

// ===== TABLE WRAPPER COMPONENT =====

@Component({
selector: 'app-table',
standalone: true,
imports: [CommonModule, NzTableModule, NzCheckboxModule],
template: `
<div
class="table-panel"
[class.is-loading]="config().loading"
[class.is-bordered]="config().bordered" >
<!-- Table Header (optional toolbar) -->
<div class="table-header">
<ng-content select="[table-header]"></ng-content>
</div>

      <!-- Table Body -->
      <nz-table
        #basicTable
        [nzData]="config().data"
        [nzLoading]="config().loading || false"
        [nzBordered]="config().bordered || false"
        [nzSize]="config().size || 'default'"
        [nzShowPagination]="false"
        class="table-body"
      >
        <thead>
          <tr>
            <!-- Selection Column -->
            @if (config().selectable) {
              <th
                nzWidth="50px"
                [nzChecked]="isAllSelected()"
                (nzCheckedChange)="onSelectAll($event)"
              ></th>
            }

            <!-- Data Columns -->
            @for (col of config().columns; track col.key) {
              <th
                [nzWidth]="col.width"
                [nzAlign]="col.align"
                [nzSortFn]="col.sortable ? getSortFn(col.key) : null"
              >
                {{ col.title }}
              </th>
            }
          </tr>
        </thead>

        <tbody>
          @for (row of config().data; track row; let i = $index) {
            <tr
              class="table-row"
              [class]="getRowClass(row)"
              (click)="handleRowClick(row)"
            >
              <!-- Selection Cell -->
              @if (config().selectable) {
                <td>
                  <label
                    nz-checkbox
                    [ngModel]="isRowSelected(row)"
                    (ngModelChange)="onRowSelect(row, $event)"
                    (click)="$event.stopPropagation()"
                  ></label>
                </td>
              }

              <!-- Data Cells -->
              @for (col of config().columns; track col.key) {
                <td
                  [align]="col.align"
                  [class]="col.cellClass ? col.cellClass(row) : ''"
                >
                  @if (col.render) {
                    <ng-container
                      *ngTemplateOutlet="col.render(getCellValue(row, col.key), row)"
                    ></ng-container>
                  } @else {
                    {{ getCellValue(row, col.key) }}
                  }
                </td>
              }
            </tr>
          }

          <!-- Empty State -->
          @if (config().data.length === 0 && !config().loading) {
            <tr>
              <td [attr.colspan]="getColspan()" class="table-empty">
                <div class="empty-state">
                  <app-icon iconKey="icon-inbox"></app-icon>
                  <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</p>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </nz-table>

      <!-- Table Footer (optional) -->
      <div class="table-footer">
        <ng-content select="[table-footer]"></ng-content>
      </div>
    </div>

`,
  styles: [`
.table-panel {
background: #fff;
border-radius: 4px;
overflow: hidden;

      &.is-loading {
        opacity: 0.6;
        pointer-events: none;
      }

      &.is-bordered {
        border: 1px solid #f0f0f0;
      }
    }

    .table-header,
    .table-footer {
      padding: 12px 16px;
      background: #fafafa;
      border-bottom: 1px solid #f0f0f0;
    }

    .table-footer {
      border-bottom: none;
      border-top: 1px solid #f0f0f0;
    }

    .table-body {
      /* –°—Ç–∏–ª–∏–∑—É–µ–º wrapper, –ù–ï .ant-table */
    }

    .table-row {
      cursor: pointer;
      transition: background-color 0.2s;

      &:hover {
        background-color: #fafafa;
      }

      &.is-selected {
        background-color: #e6f7ff;

        &:hover {
          background-color: #d1edff;
        }
      }

      &.is-invalid {
        background-color: #fff2f0;
        border-left: 3px solid #ff4d4f;
      }

      &.is-warning {
        background-color: #fffbe6;
        border-left: 3px solid #faad14;
      }
    }

    .table-empty {
      text-align: center;
      padding: 48px 16px;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      color: #8c8c8c;

      app-icon {
        font-size: 48px;
        opacity: 0.3;
      }

      p {
        margin: 0;
        font-size: 14px;
      }
    }

`]
})
export class TableComponent<T = any> {
config = input.required<TableConfig<T>>();

private selectedRows = signal<T[]>([]);

ngOnInit() {
if (this.config().selectedRows) {
this.selectedRows.set(this.config().selectedRows);
}
}

isAllSelected(): boolean {
const data = this.config().data;
if (data.length === 0) return false;

    return data.every(row => this.isRowSelected(row));

}

isRowSelected(row: T): boolean {
return this.selectedRows().includes(row);
}

onSelectAll(checked: boolean) {
if (checked) {
this.selectedRows.set([...this.config().data]);
} else {
this.selectedRows.set([]);
}

    this.emitSelectionChange();

}

onRowSelect(row: T, checked: boolean) {
if (checked) {
this.selectedRows.update(rows => [...rows, row]);
} else {
this.selectedRows.update(rows => rows.filter(r => r !== row));
}

    this.emitSelectionChange();

}

handleRowClick(row: T) {
if (this.config().onRowClick) {
this.config().onRowClick(row);
}
}

getRowClass(row: T): string {
const classes: string[] = [];

    if (this.isRowSelected(row)) {
      classes.push('is-selected');
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –∏–∑ Error Registry
    // (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ ErrorRegistry.getRowErrors)

    return classes.join(' ');

}

getCellValue(row: T, key: string): any {
return (row as any)[key];
}

getColspan(): number {
let count = this.config().columns.length;
if (this.config().selectable) count++;
return count;
}

getSortFn(key: string) {
return (a: T, b: T) => {
const aVal = this.getCellValue(a, key);
const bVal = this.getCellValue(b, key);

      if (typeof aVal === 'string') {
        return aVal.localeCompare(bVal);
      }

      return aVal - bVal;
    };

}

private emitSelectionChange() {
if (this.config().onSelectionChange) {
this.config().onSelectionChange(this.selectedRows());
}
}
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Table:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø TABLE =====

@Component({
selector: 'app-users-list',
template: `
<app-page-shell [config]="pageConfig()">
<!-- Search/Filters -->
<div search-filters>
<input
type="text"
placeholder="–ü–æ–∏—Å–∫..."
[(ngModel)]="searchTerm"
/>
</div>

      <!-- Table -->
      <app-table
        [config]="tableConfig()"
      >
        <!-- Table Header Toolbar -->
        <div table-header>
          <span>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {{ totalUsers() }}</span>
          <button
            nz-button
            nzType="primary"
            (click)="exportSelected()"
            [disabled]="selectedUsers().length === 0"
          >
            –≠–∫—Å–ø–æ—Ä—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö ({{ selectedUsers().length }})
          </button>
        </div>

        <!-- Table Footer (if needed) -->
        <div table-footer>
          <small>–ü–æ–∫–∞–∑–∞–Ω–æ {{ users().length }} –∏–∑ {{ totalUsers() }}</small>
        </div>
      </app-table>

      <!-- Pagination -->
      <div page-footer class="page-footer-content">
        <app-pagination [config]="paginationConfig()"></app-pagination>

        <div class="actions-block">
          <button nz-button nzType="primary" (click)="createUser()">
            –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
          </button>
        </div>
      </div>
    </app-page-shell>

`
})
export class UsersListComponent {
users = signal<User[]>([]);
totalUsers = signal(0);
selectedUsers = signal<User[]>([]);
searchTerm = '';

tableConfig = computed<TableConfig<User>>(() => ({
data: this.users(),
loading: this.loading(),
bordered: true,
selectable: true,
selectedRows: this.selectedUsers(),
columns: [
{
key: 'id',
title: 'ID',
width: '80px',
sortable: true
},
{
key: 'name',
title: '–ò–º—è',
sortable: true,
render: (value, row) => this.nameTemplate
},
{
key: 'email',
title: 'Email',
sortable: true
},
{
key: 'role',
title: '–†–æ–ª—å',
width: '120px',
render: (value) => this.roleTemplate
},
{
key: 'status',
title: '–°—Ç–∞—Ç—É—Å',
width: '100px',
cellClass: (row) => this.getStatusClass(row.status),
render: (value) => this.statusTemplate
},
{
key: 'actions',
title: '–î–µ–π—Å—Ç–≤–∏—è',
width: '120px',
align: 'center',
render: () => this.actionsTemplate
}
],
onRowClick: (user) => this.editUser(user),
onSelectionChange: (selected) => this.selectedUsers.set(selected)
}));

// Templates
@ViewChild('nameTemplate', { static: true }) nameTemplate!: TemplateRef<any>;
@ViewChild('roleTemplate', { static: true }) roleTemplate!: TemplateRef<any>;
@ViewChild('statusTemplate', { static: true }) statusTemplate!: TemplateRef<any>;
@ViewChild('actionsTemplate', { static: true }) actionsTemplate!: TemplateRef<any>;

getStatusClass(status: string): string {
const classes: Record<string, string> = {
active: 'status-success',
inactive: 'status-warning',
banned: 'status-error'
};
return classes[status] || '';
}
}

// ===== TEMPLATES –í HTML =====
/\*
<ng-template #nameTemplate let-value let-row="row">

  <div class="user-name-cell">
    <nz-avatar [nzSrc]="row.avatarUrl" [nzText]="row.name[0]"></nz-avatar>
    <span>{{ value }}</span>
  </div>
</ng-template>

<ng-template #roleTemplate let-value>
<nz-tag [nzColor]="getRoleColor(value)">
{{ value }}
</nz-tag>
</ng-template>

<ng-template #statusTemplate let-value>
<span class="status-badge" [class]="getStatusClass(value)">
{{ getStatusLabel(value) }}
</span>
</ng-template>

<ng-template #actionsTemplate let-row="row">
<button
nz-button
nzType="link"
nzSize="small"
(click)="editUser(row); $event.stopPropagation()"

>

    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

  </button>
</ng-template>
*/

5.3.3 Pagination Wrapper
// ===== PAGINATION WRAPPER =====

export interface PaginationConfig {
total: number;
pageSize: number;
currentPage: number;
pageSizeOptions?: number[];
showSizeChanger?: boolean;
showTotal?: boolean;
showQuickJumper?: boolean;
onPageChange: (page: number) => void;
onPageSizeChange: (size: number) => void;
}

@Component({
selector: 'app-pagination',
standalone: true,
imports: [CommonModule, NzPaginationModule],
template: `
<div class="pagination-panel">
<nz-pagination
[nzTotal]="config().total"
[nzPageSize]="config().pageSize"
[nzPageIndex]="config().currentPage"
[nzPageSizeOptions]="config().pageSizeOptions || [10, 20, 50, 100]"
[nzShowSizeChanger]="config().showSizeChanger !== false"
[nzShowTotal]="totalTemplate"
[nzShowQuickJumper]="config().showQuickJumper"
(nzPageIndexChange)="config().onPageChange($event)"
        (nzPageSizeChange)="config().onPageSizeChange($event)"
class="pagination-control" ></nz-pagination>

      <ng-template #totalTemplate let-total let-range="range">
        <span class="pagination-total">
          –ü–æ–∫–∞–∑–∞–Ω–æ {{ range[0] }}‚Äì{{ range[1] }} –∏–∑ {{ total }}
        </span>
      </ng-template>
    </div>

`,
  styles: [`
.pagination-panel {
display: flex;
justify-content: space-between;
align-items: center;
}

    .pagination-control {
      /* –°—Ç–∏–ª–∏–∑—É–µ–º wrapper, –ù–ï .ant-pagination */
    }

    .pagination-total {
      color: #8c8c8c;
      font-size: 14px;
    }

`]
})
export class PaginationComponent {
config = input.required<PaginationConfig>();
}

5.3.4 Modal Wrapper
// ===== MODAL WRAPPER =====

export interface ModalConfig {
title: string;
content?: string | TemplateRef<any>;
width?: number | string;
closable?: boolean;
maskClosable?: boolean;
footer?: ModalFooter;
onOk?: () => void | Promise<void>;
onCancel?: () => void;
}

export interface ModalFooter {
showOk?: boolean;
showCancel?: boolean;
okText?: string;
cancelText?: string;
okLoading?: boolean;
okDisabled?: boolean;
}

@Injectable({ providedIn: 'root' })
export class ModalService {
private readonly nzModalService = inject(NzModalService);

/\*\*

- –û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –º–æ–¥–∞–ª
  \*/
  info(config: ModalConfig): NzModalRef {
  return this.nzModalService.info({
  nzTitle: config.title,
  nzContent: config.content,
  nzWidth: config.width || 520,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzOkText: config.footer?.okText || '–ü–æ–Ω—è—Ç–Ω–æ',
  nzClassName: 'modal-panel modal-info',
  nzOnOk: config.onOk
  });
  }

/\*\*

- –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
  \*/
  confirm(config: ModalConfig): NzModalRef {
  return this.nzModalService.confirm({
  nzTitle: config.title,
  nzContent: config.content,
  nzWidth: config.width || 520,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzOkText: config.footer?.okText || '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å',
  nzCancelText: config.footer?.cancelText || '–û—Ç–º–µ–Ω–∞',
  nzOkDanger: false,
  nzClassName: 'modal-panel modal-confirm',
  nzOnOk: config.onOk,
  nzOnCancel: config.onCancel
  });
  }

/\*\*

- –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª –æ—à–∏–±–∫–∏
  \*/
  error(config: ModalConfig): NzModalRef {
  return this.nzModalService.error({
  nzTitle: config.title,
  nzContent: config.content,
  nzWidth: config.width || 520,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzOkText: config.footer?.okText || '–ü–æ–Ω—è—Ç–Ω–æ',
  nzClassName: 'modal-panel modal-error',
  nzOnOk: config.onOk
  });
  }

/\*\*

- –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–π –º–æ–¥–∞–ª
  \*/
  warning(config: ModalConfig): NzModalRef {
  return this.nzModalService.warning({
  nzTitle: config.title,
  nzContent: config.content,
  nzWidth: config.width || 520,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzOkText: config.footer?.okText || '–ü–æ–Ω—è—Ç–Ω–æ',
  nzClassName: 'modal-panel modal-warning',
  nzOnOk: config.onOk
  });
  }

/\*\*

- –û—Ç–∫—Ä—ã—Ç—å —É—Å–ø–µ—à–Ω—ã–π –º–æ–¥–∞–ª
  \*/
  success(config: ModalConfig): NzModalRef {
  return this.nzModalService.success({
  nzTitle: config.title,
  nzContent: config.content,
  nzWidth: config.width || 520,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzOkText: config.footer?.okText || '–û—Ç–ª–∏—á–Ω–æ',
  nzClassName: 'modal-panel modal-success',
  nzOnOk: config.onOk
  });
  }

/\*\*

- –°–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –º–æ–¥–∞–ª —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
  \*/
  create<T = any>(component: Type<T>, config: ModalConfig & { data?: any }): NzModalRef<T> {
  return this.nzModalService.create({
  nzTitle: config.title,
  nzContent: component,
  nzData: config.data,
  nzWidth: config.width || 720,
  nzClosable: config.closable !== false,
  nzMaskClosable: config.maskClosable,
  nzFooter: this.buildFooter(config.footer),
  nzClassName: 'modal-panel modal-custom',
  nzOnOk: config.onOk,
  nzOnCancel: config.onCancel
  });
  }

private buildFooter(footer?: ModalFooter): TemplateRef<any> | null {
if (!footer || (footer.showOk === false && footer.showCancel === false)) {
return null;
}

    // –í–µ—Ä–Ω—É—Ç—å default footer ng-zorro
    return null as any;

}
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Modal:
// ===== –ü–†–ò–ú–ï–† –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø MODAL =====

@Component({
selector: 'app-user-form'
})
export class UserFormComponent {
private readonly modalService = inject(ModalService);
private readonly commandService = inject(CommandService);

onDelete() {
this.modalService.confirm({
title: '–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?',
content: '–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.',
footer: {
okText: '–£–¥–∞–ª–∏—Ç—å',
cancelText: '–û—Ç–º–µ–Ω–∞'
},
onOk: async () => {
return this.commandService.execute('delete', {
id: this.userId
}).toPromise();
}
});
}

onSaveError(error: ErrorResponse) {
this.modalService.error({
title: '–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è',
content: `        <p>${error.getUserMessage()}</p>
        ${error.recommendation ?`<p><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> ${error.recommendation}</p>`: ''}
     `,
footer: {
okText: '–ü–æ–Ω—è—Ç–Ω–æ'
}
});
}

onSaveSuccess() {
this.modalService.success({
title: '–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã',
content: '–ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã',
footer: {
okText: '–û—Ç–ª–∏—á–Ω–æ'
},
onOk: () => {
this.router.navigate(['/admin/users']);
}
});
}
}

5.3.5 Form Controls Wrappers
// ===== INPUT WRAPPER =====

@Component({
selector: 'app-input',
standalone: true,
imports: [CommonModule, FormsModule, ReactiveFormsModule, NzInputModule],
template: `
<div
class="form-control-wrapper"
[class.is-invalid]="invalid()"
[class.is-disabled]="disabled()"
[class.is-readonly]="readonly()" >
<input
nz-input
[type]="type()"
[placeholder]="placeholder()"
[disabled]="disabled()"
[readonly]="readonly()"
[ngModel]="value()"
(ngModelChange)="valueChange.emit($event)"
(blur)="onBlur()"
class="form-control"
/>

      @if (invalid() && errorMessage()) {
        <span class="form-error">
          <app-icon iconKey="icon-warning"></app-icon>
          {{ errorMessage() }}
        </span>
      }
    </div>

`,
  styles: [`
.form-control-wrapper {
display: flex;
flex-direction: column;
gap: 4px;
}

    .form-control {
      /* –°—Ç–∏–ª–∏–∑—É–µ–º wrapper, –ù–ï .ant-input */
      transition: all 0.3s;

      &:focus {
        border-color: #1890ff;
        box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
      }
    }

    .form-control-wrapper.is-invalid .form-control {
      border-color: #ff4d4f;
      background-color: #fff2f0;

      &:focus {
        border-color: #ff4d4f;
        box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
      }
    }

    .form-control-wrapper.is-disabled .form-control {
      background-color: #f5f5f5;
      cursor: not-allowed;
    }

    .form-control-wrapper.is-readonly .form-control {
      background-color: #fafafa;
      border-color: #d9d9d9;
    }

    .form-error {
      display: flex;
      align-items: center;
      gap: 4px;
      color: #ff4d4f;
      font-size: 12px;
      animation: slide-down 0.3s ease-out;
    }

`]
})
export class InputComponent {
type = input<string>('text');
placeholder = input<string>('');
value = input<string>('');
disabled = input<boolean>(false);
readonly = input<boolean>(false);
invalid = input<boolean>(false);
errorMessage = input<string>('');

valueChange = output<string>();
blur = output<void>();

onBlur() {
this.blur.emit();
}
}

// ===== SELECT WRAPPER =====

@Component({
selector: 'app-select',
standalone: true,
imports: [CommonModule, FormsModule, NzSelectModule],
template: `
<div
class="form-control-wrapper"
[class.is-invalid]="invalid()"
[class.is-disabled]="disabled()" >
<nz-select
[nzPlaceHolder]="placeholder()"
[nzDisabled]="disabled()"
[ngModel]="value()"
(ngModelChange)="valueChange.emit($event)"
[nzShowSearch]="searchable()"
[nzAllowClear]="clearable()"
class="form-control" >
@for (option of options(); track option.value) {
<nz-option
[nzValue]="option.value"
[nzLabel]="option.label"
[nzDisabled]="option.disabled" ></nz-option>
}
</nz-select>

      @if (invalid() && errorMessage()) {
        <span class="form-error">
          <app-icon iconKey="icon-warning"></app-icon>
          {{ errorMessage() }}
        </span>
      }
    </div>

`,
  styles: [`
.form-control-wrapper {
display: flex;
flex-direction: column;
gap: 4px;
}

    .form-control {
      width: 100%;
    }

    .form-error {
      display: flex;
      align-items: center;
      gap: 4px;
      color: #ff4d4f;
      font-size: 12px;
    }

`]
})
export class SelectComponent {
placeholder = input<string>('–í—ã–±–µ—Ä–∏—Ç–µ...');
value = input<any>();
options = input.required<SelectOption[]>();
disabled = input<boolean>(false);
searchable = input<boolean>(false);
clearable = input<boolean>(false);
invalid = input<boolean>(false);
errorMessage = input<string>('');

valueChange = output<any>();
}

export interface SelectOption {
value: any;
label: string;
disabled?: boolean;
}

5.3.6 Alert/Message Wrapper
// ===== MESSAGE SERVICE WRAPPER =====

@Injectable({ providedIn: 'root' })
export class MessageService {
private readonly nzMessage = inject(NzMessageService);

success(message: string, duration: number = 3000) {
return this.nzMessage.success(message, {
nzDuration: duration,
nzAnimate: true
});
}

error(message: string, duration: number = 5000) {
return this.nzMessage.error(message, {
nzDuration: duration,
nzAnimate: true
});
}

warning(message: string, duration: number = 4000) {
return this.nzMessage.warning(message, {
nzDuration: duration,
nzAnimate: true
});
}

info(message: string, duration: number = 3000) {
return this.nzMessage.info(message, {
nzDuration: duration,
nzAnimate: true
});
}

loading(message: string) {
return this.nzMessage.loading(message, {
nzDuration: 0 // –ù–µ —Å–∫—Ä—ã–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
});
}
}

// ===== ALERT COMPONENT WRAPPER =====

@Component({
selector: 'app-alert',
standalone: true,
imports: [CommonModule, NzAlertModule],
template: `    <nz-alert
      [nzType]="type()"
      [nzMessage]="message()"
      [nzDescription]="description()"
      [nzShowIcon]="showIcon() !== false"
      [nzCloseable]="closeable()"
      [nzBanner]="banner()"
      (nzOnClose)="close.emit()"
      class="alert-panel"
      [class.is-banner]="banner()"
    ></nz-alert>
 `,
styles: [`
.alert-panel {
/_ –°—Ç–∏–ª–∏–∑—É–µ–º wrapper, –ù–ï .ant-alert _/
margin-bottom: 16px;

      &.is-banner {
        border-radius: 0;
        border: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }
    }

`]
})
export class AlertComponent {
type = input<'success' | 'info' | 'warning' | 'error'>('info');
message = input.required<string>();
description = input<string>();
showIcon = input<boolean>(true);
closeable = input<boolean>(false);
banner = input<boolean>(false);

close = output<void>();
}

5.3.7 CSS –¥–ª—è ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
// ===== styles/ng-zorro-overrides.scss =====

/\*\*

- –ö–†–ò–¢–ò–ß–ù–û: –≠—Ç–æ—Ç —Ñ–∞–π–ª –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¢–û–õ–¨–ö–û CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ng-zorro
- –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º .ant-_ –∫–ª–∞—Å—Å—ã –Ω–∞–ø—Ä—è–º—É—é!
  _/

:root {
// Primary Color
--ant-primary-color: #1890ff;
--ant-primary-color-hover: #40a9ff;
--ant-primary-color-active: #096dd9;

// Success
--ant-success-color: #52c41a;

// Warning
--ant-warning-color: #faad14;

// Error
--ant-error-color: #ff4d4f;

// Info
--ant-info-color: #1890ff;

// Text
--ant-text-color: #262626;
--ant-text-color-secondary: #8c8c8c;

// Border
--ant-border-color-base: #d9d9d9;
--ant-border-radius-base: 4px;

// Background
--ant-background-color-base: #f0f0f0;

// Font
--ant-font-size-base: 14px;
--ant-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/\*\*

- –ó–ê–ü–†–ï–©–ï–ù–û:
- .ant-table { ... }
- .ant-input { ... }
- .ant-modal { ... }
-
- –†–ê–ó–†–ï–®–ï–ù–û:
- .table-panel { ... }
- .form-control { ... }
- .modal-panel { ... }
  \*/

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ß–ê–°–¢–¨ 6: UI COMPONENTS LIBRARY?
–ß–ê–°–¢–¨ 6: UI COMPONENTS LIBRARY
6.1 Buttons
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, ng-zorro –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–Ω–æ–ø–æ–∫ (–∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ö —á–µ—Ä–µ–∑ nz-button –¥–∏—Ä–µ–∫—Ç–∏–≤—É).
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== BUTTON INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
  \*/
  export interface ButtonConfig {
  // –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
  label: string;

// –¢–∏–ø –∫–Ω–æ–ø–∫–∏
type?: ButtonType;

// –†–∞–∑–º–µ—Ä
size?: ButtonSize;

// –ò–∫–æ–Ω–∫–∞ (—á–µ—Ä–µ–∑ Icon Provider)
icon?: string;

// –ü–æ–∑–∏—Ü–∏—è –∏–∫–æ–Ω–∫–∏
iconPosition?: 'left' | 'right';

// –°–æ—Å—Ç–æ—è–Ω–∏—è
disabled?: boolean;
loading?: boolean;

// –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
block?: boolean; // –ù–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É
ghost?: boolean; // –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Å —Ä–∞–º–∫–æ–π

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
onClick?: () => void | Promise<void>;
}

export type ButtonType =
| 'primary' // –û—Å–Ω–æ–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
| 'secondary' // –í—Ç–æ—Ä–∏—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
| 'success' // –£—Å–ø–µ—à–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (Save, Confirm)
| 'warning' // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
| 'danger' // –û–ø–∞—Å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (Delete)
| 'link'; // –°—Å—ã–ª–∫–∞-–∫–Ω–æ–ø–∫–∞

export type ButtonSize =
| 'sm' // –ú–∞–ª–µ–Ω—å–∫–∞—è (28px)
| 'md' // –°—Ä–µ–¥–Ω—è—è (32px) - default
| 'lg'; // –ë–æ–ª—å—à–∞—è (40px)

/\*\*

- –ì—Ä—É–ø–ø–∞ –∫–Ω–æ–ø–æ–∫
  \*/
  export interface ButtonGroupConfig {
  buttons: ButtonConfig[];
  direction?: 'horizontal' | 'vertical';
  gap?: number; // px
  }

Button Component:
// ===== BUTTON COMPONENT =====

@Component({
selector: 'app-button',
standalone: true,
imports: [CommonModule],
template: `
<button
class="btn"
[class.btn-primary]="type() === 'primary'"
[class.btn-secondary]="type() === 'secondary'"
[class.btn-success]="type() === 'success'"
[class.btn-warning]="type() === 'warning'"
[class.btn-danger]="type() === 'danger'"
[class.btn-link]="type() === 'link'"
[class.btn-sm]="size() === 'sm'"
[class.btn-md]="size() === 'md'"
[class.btn-lg]="size() === 'lg'"
[class.btn-block]="block()"
[class.btn-ghost]="ghost()"
[class.is-loading]="loading()"
[class.is-disabled]="disabled()"
[disabled]="disabled() || loading()"
(click)="handleClick()" >
@if (loading()) {
<span class="btn-spinner">
<app-icon iconKey="icon-loading"></app-icon>
</span>
}

      @if (icon() && iconPosition() === 'left' && !loading()) {
        <app-icon [iconKey]="icon()!" class="btn-icon btn-icon-left"></app-icon>
      }

      <span class="btn-text">
        <ng-content></ng-content>
      </span>

      @if (icon() && iconPosition() === 'right' && !loading()) {
        <app-icon [iconKey]="icon()!" class="btn-icon btn-icon-right"></app-icon>
      }
    </button>

`,
  styles: [`
.btn {
display: inline-flex;
align-items: center;
justify-content: center;
gap: 8px;
padding: 6px 16px;
border: 1px solid transparent;
border-radius: 4px;
font-size: 14px;
font-weight: 500;
line-height: 1.5;
cursor: pointer;
transition: all 0.3s;
white-space: nowrap;
user-select: none;

      &:focus {
        outline: none;
      }

      &:active:not(:disabled) {
        transform: scale(0.98);
      }
    }

    /* TYPES */
    .btn-primary {
      color: #fff;
      background: #1890ff;
      border-color: #1890ff;

      &:hover:not(:disabled) {
        background: #40a9ff;
        border-color: #40a9ff;
      }

      &:active:not(:disabled) {
        background: #096dd9;
        border-color: #096dd9;
      }

      &:focus {
        box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
      }
    }

    .btn-secondary {
      color: #262626;
      background: #fff;
      border-color: #d9d9d9;

      &:hover:not(:disabled) {
        color: #1890ff;
        border-color: #1890ff;
      }

      &:active:not(:disabled) {
        color: #096dd9;
        border-color: #096dd9;
      }

      &:focus {
        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.05);
      }
    }

    .btn-success {
      color: #fff;
      background: #52c41a;
      border-color: #52c41a;

      &:hover:not(:disabled) {
        background: #73d13d;
        border-color: #73d13d;
      }

      &:active:not(:disabled) {
        background: #389e0d;
        border-color: #389e0d;
      }

      &:focus {
        box-shadow: 0 0 0 2px rgba(82, 196, 26, 0.2);
      }
    }

    .btn-warning {
      color: #fff;
      background: #faad14;
      border-color: #faad14;

      &:hover:not(:disabled) {
        background: #ffc53d;
        border-color: #ffc53d;
      }

      &:active:not(:disabled) {
        background: #d48806;
        border-color: #d48806;
      }

      &:focus {
        box-shadow: 0 0 0 2px rgba(250, 173, 20, 0.2);
      }
    }

    .btn-danger {
      color: #fff;
      background: #ff4d4f;
      border-color: #ff4d4f;

      &:hover:not(:disabled) {
        background: #ff7875;
        border-color: #ff7875;
      }

      &:active:not(:disabled) {
        background: #d9363e;
        border-color: #d9363e;
      }

      &:focus {
        box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
      }
    }

    .btn-link {
      color: #1890ff;
      background: transparent;
      border-color: transparent;
      padding: 0;

      &:hover:not(:disabled) {
        color: #40a9ff;
      }

      &:active:not(:disabled) {
        color: #096dd9;
      }
    }

    /* SIZES */
    .btn-sm {
      height: 28px;
      padding: 2px 12px;
      font-size: 12px;
    }

    .btn-md {
      height: 32px;
      padding: 4px 16px;
      font-size: 14px;
    }

    .btn-lg {
      height: 40px;
      padding: 8px 24px;
      font-size: 16px;
    }

    /* VARIANTS */
    .btn-block {
      width: 100%;
    }

    .btn-ghost {
      background: transparent;

      &.btn-primary {
        color: #1890ff;
        border-color: #1890ff;

        &:hover:not(:disabled) {
          background: rgba(24, 144, 255, 0.1);
        }
      }

      &.btn-danger {
        color: #ff4d4f;
        border-color: #ff4d4f;

        &:hover:not(:disabled) {
          background: rgba(255, 77, 79, 0.1);
        }
      }
    }

    /* STATES */
    .is-loading {
      pointer-events: none;
      opacity: 0.7;
    }

    .is-disabled,
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
    }

    .btn-spinner {
      display: inline-flex;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .btn-icon {
      display: inline-flex;
      font-size: 16px;

      &.btn-icon-left {
        margin-right: -4px;
      }

      &.btn-icon-right {
        margin-left: -4px;
      }
    }

    .btn-sm .btn-icon {
      font-size: 14px;
    }

    .btn-lg .btn-icon {
      font-size: 18px;
    }

`]
})
export class ButtonComponent {
type = input<ButtonType>('secondary');
size = input<ButtonSize>('md');
icon = input<string>();
iconPosition = input<'left' | 'right'>('left');
disabled = input<boolean>(false);
loading = input<boolean>(false);
block = input<boolean>(false);
ghost = input<boolean>(false);

click = output<void>();

async handleClick() {
if (this.disabled() || this.loading()) return;
this.click.emit();
}
}

Button Group Component:
// ===== BUTTON GROUP COMPONENT =====

@Component({
selector: 'app-button-group',
standalone: true,
imports: [CommonModule],
template: `    <div
      class="btn-group"
      [class.btn-group-vertical]="direction() === 'vertical'"
      [class.btn-group-horizontal]="direction() === 'horizontal'"
      [style.gap.px]="gap()"
    >
      <ng-content></ng-content>
    </div>
 `,
styles: [`
.btn-group {
display: flex;

      &.btn-group-horizontal {
        flex-direction: row;
        align-items: center;
      }

      &.btn-group-vertical {
        flex-direction: column;
        align-items: stretch;
      }
    }

`]
})
export class ButtonGroupComponent {
direction = input<'horizontal' | 'vertical'>('horizontal');
gap = input<number>(8);
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Buttons:
// ===== –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø =====

@Component({
selector: 'app-user-form',
template: `
<app-page-shell [config]="pageConfig()">
<!-- Form content -->

      <div page-footer class="page-footer-content">
        <!-- Actions Group -->
        <app-button-group [gap]="12">
          <!-- Primary Action -->
          <app-button
            type="primary"
            [loading]="saving()"
            [disabled]="!canSave()"
            icon="icon-save"
            (click)="onSave()"
          >
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </app-button>

          <!-- Secondary Action -->
          <app-button
            type="secondary"
            (click)="onCancel()"
          >
            –û—Ç–º–µ–Ω–∞
          </app-button>

          <!-- Danger Action -->
          <app-button
            type="danger"
            icon="icon-delete"
            [ghost]="true"
            (click)="onDelete()"
          >
            –£–¥–∞–ª–∏—Ç—å
          </app-button>
        </app-button-group>

        <!-- Additional Actions -->
        <app-button-group>
          <app-button
            type="link"
            icon="icon-history"
            (click)="showHistory()"
          >
            –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
          </app-button>

          <app-button
            type="link"
            icon="icon-export"
            (click)="exportData()"
          >
            –≠–∫—Å–ø–æ—Ä—Ç
          </app-button>
        </app-button-group>
      </div>
    </app-page-shell>

`
})
export class UserFormComponent {
saving = signal(false);

canSave = computed(() => {
return !this.saving() && this.form.valid && this.form.dirty;
});

async onSave() {
this.saving.set(true);

    try {
      await this.commandService.execute('save', this.form.value).toPromise();
      this.messageService.success('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
    } catch (error) {
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ ErrorHandlingService
    } finally {
      this.saving.set(false);
    }

}
}

6.2 Forms
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ä–º —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Context Model.
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
// ===== FORM INTERFACES =====

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º—ã
  \*/
  export interface FormConfig {
  // ID —Ñ–æ—Ä–º—ã (–¥–ª—è Error Registry)
  id: string;

// Layout
layout?: 'vertical' | 'horizontal' | 'inline';

// Label width (–¥–ª—è horizontal)
labelWidth?: string;

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FormStateService
useFormState?: boolean;
}

/\*\*

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª—è —Ñ–æ—Ä–º—ã
  \*/
  export interface FormFieldConfig {
  // ID –ø–æ–ª—è (–¥–ª—è Error Registry)
  id: string;

// Label
label: string;

// –¢–∏–ø –ø–æ–ª—è
type: FormFieldType;

// Placeholder
placeholder?: string;

// –í–∞–ª–∏–¥–∞—Ü–∏—è
required?: boolean;
validators?: any[];

// –°–æ—Å—Ç–æ—è–Ω–∏—è
disabled?: boolean;
readonly?: boolean;

// –ü–æ–º–æ—â—å
hint?: string;

// –î–ª—è select/radio/checkbox
options?: FormFieldOption[];
}

export type FormFieldType =
| 'text'
| 'email'
| 'password'
| 'number'
| 'tel'
| 'url'
| 'textarea'
| 'select'
| 'checkbox'
| 'radio'
| 'date'
| 'datetime';

export interface FormFieldOption {
value: any;
label: string;
disabled?: boolean;
}

Form Components:
// ===== FORM GROUP COMPONENT =====

@Component({
selector: 'app-form-group',
standalone: true,
imports: [CommonModule],
template: `
<div
class="form-group"
[class.is-invalid]="invalid()"
[class.is-required]="required()" >
@if (label()) {
<label class="form-label" [for]="fieldId()">
{{ label() }}
@if (required()) {
<span class="required-mark">\*</span>
}
</label>
}

      <div class="form-control-container">
        <ng-content></ng-content>
      </div>

      @if (hint() && !invalid()) {
        <span class="form-hint">
          {{ hint() }}
        </span>
      }

      @if (invalid() && errorMessage()) {
        <span class="form-error">
          <app-icon iconKey="icon-warning"></app-icon>
          {{ errorMessage() }}
        </span>
      }
    </div>

`,
  styles: [`
.form-group {
display: flex;
flex-direction: column;
gap: 8px;
margin-bottom: 24px;
}

    .form-label {
      font-size: 14px;
      font-weight: 500;
      color: #262626;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .required-mark {
      color: #ff4d4f;
      font-weight: 600;
    }

    .form-control-container {
      position: relative;
    }

    .form-hint {
      font-size: 12px;
      color: #8c8c8c;
      line-height: 1.5;
    }

    .form-error {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      color: #ff4d4f;
      animation: slide-down 0.3s ease-out;
    }

    @keyframes slide-down {
      from {
        opacity: 0;
        transform: translateY(-4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

`]
})
export class FormGroupComponent {
label = input<string>();
fieldId = input<string>();
required = input<boolean>(false);
invalid = input<boolean>(false);
errorMessage = input<string>();
hint = input<string>();
}

// ===== FORM FIELD COMPONENT =====

@Component({
selector: 'app-form-field',
standalone: true,
imports: [CommonModule, FormsModule, ReactiveFormsModule],
template: `    <div
      class="form-field"
      [class.is-invalid]="isInvalid()"
      [class.is-disabled]="disabled()"
      [class.is-readonly]="readonly()"
      [class.is-highlighted]="highlighted()"
      [attr.data-field-id]="fieldId()"
    >
      @switch (type()) {
        @case ('textarea') {
          <textarea
            [id]="fieldId()"
            [placeholder]="placeholder()"
            [disabled]="disabled()"
            [readonly]="readonly()"
            [formControl]="control()"
            (blur)="onBlur()"
            class="form-control form-textarea"
            rows="4"
          ></textarea>
        }
        @case ('select') {
          <select
            [id]="fieldId()"
            [disabled]="disabled()"
            [formControl]="control()"
            (blur)="onBlur()"
            class="form-control form-select"
          >
            <option value="" disabled selected>
              {{ placeholder() || '–í—ã–±–µ—Ä–∏—Ç–µ...' }}
            </option>
            @for (option of options(); track option.value) {
              <option
                [value]="option.value"
                [disabled]="option.disabled"
              >
                {{ option.label }}
              </option>
            }
          </select>
        }
        @case ('checkbox') {
          <label class="form-checkbox">
            <input
              type="checkbox"
              [id]="fieldId()"
              [disabled]="disabled()"
              [formControl]="control()"
              (blur)="onBlur()"
            />
            <span class="checkbox-label">{{ label() }}</span>
          </label>
        }
        @default {
          <input
            [type]="type()"
            [id]="fieldId()"
            [placeholder]="placeholder()"
            [disabled]="disabled()"
            [readonly]="readonly()"
            [formControl]="control()"
            (blur)="onBlur()"
            class="form-control"
          />
        }
      }
    </div>
 `,
styles: [`
.form-field {
width: 100%;
}

    .form-control {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #d9d9d9;
      border-radius: 4px;
      font-size: 14px;
      line-height: 1.5;
      transition: all 0.3s;
      background: #fff;

      &:hover:not(:disabled):not(:readonly) {
        border-color: #40a9ff;
      }

      &:focus {
        border-color: #1890ff;
        box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        outline: none;
      }

      &::placeholder {
        color: #bfbfbf;
      }
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    .form-select {
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23262626' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 32px;
    }

    .form-checkbox {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      user-select: none;

      input[type="checkbox"] {
        width: 16px;
        height: 16px;
        cursor: pointer;
      }

      .checkbox-label {
        font-size: 14px;
      }
    }

    .is-invalid .form-control {
      border-color: #ff4d4f;
      background-color: #fff2f0;

      &:focus {
        border-color: #ff4d4f;
        box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
      }
    }

    .is-disabled .form-control {
      background-color: #f5f5f5;
      cursor: not-allowed;
      opacity: 0.7;
    }

    .is-readonly .form-control {
      background-color: #fafafa;
      cursor: default;
    }

    .is-highlighted {
      animation: highlight-pulse 2s ease-out;
    }

    @keyframes highlight-pulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(24, 144, 255, 0);
      }
      50% {
        box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.4);
      }
    }

`]
})
export class FormFieldComponent implements OnInit, OnDestroy {
private readonly errorRegistry = inject(ErrorRegistry);
private readonly destroy$ = new Subject<void>();

type = input<FormFieldType>('text');
fieldId = input.required<string>();
placeholder = input<string>('');
disabled = input<boolean>(false);
readonly = input<boolean>(false);
control = input.required<FormControl>();
options = input<FormFieldOption[]>([]);
label = input<string>(''); // –î–ª—è checkbox

blur = output<void>();

highlighted = signal(false);

ngOnInit() {
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –∏–∑ Error Registry
this.errorRegistry.errors$
      .pipe(takeUntil(this.destroy$))
.subscribe(() => {
this.checkFieldErrors();
});

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è FormControl
    this.control().statusChanges
      .pipe(takeUntil(this.destroy$))
      .subscribe(() => {
        this.updateErrorState();
      });

}

ngOnDestroy() {
this.destroy$.next();
    this.destroy$.complete();
}

isInvalid(): boolean {
const ctrl = this.control();
return (ctrl.invalid && ctrl.touched) || this.hasRegistryError();
}

onBlur() {
this.control().markAsTouched();
this.blur.emit();
}

private hasRegistryError(): boolean {
const errors = this.errorRegistry.getFieldErrors(
this.fieldId(),
this.getContextId()
);
return errors.length > 0;
}

private checkFieldErrors() {
const errors = this.errorRegistry.getFieldErrors(
this.fieldId(),
this.getContextId()
);

    if (errors.length > 0) {
      // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ FormControl
      const error = errors[0];
      this.control().setErrors({
        server: error.errorResponse.getUserMessage()
      });
      this.control().markAsTouched();
    }

}

private updateErrorState() {
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å Error Registry
}

private getContextId(): string {
// –ü–æ–ª—É—á–∏—Ç—å –∏–∑ Context Service
const contextService = inject(ContextService);
return contextService.getContext().activeArea?.entityId || '';
}

highlight() {
this.highlighted.set(true);
setTimeout(() => {
this.highlighted.set(false);
}, 2000);
}
}

Form Integration Example:
// ===== –ü–†–ò–ú–ï–† –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –§–û–†–ú–´ =====

@Component({
selector: 'app-user-form',
standalone: true,
imports: [
CommonModule,
ReactiveFormsModule,
PageShellComponent,
FormGroupComponent,
FormFieldComponent,
ButtonComponent,
ButtonGroupComponent
],
template: `
<app-page-shell [config]="pageConfig()">
<form [formGroup]="form" (ngSubmit)="onSubmit()">
<!-- Name Field -->
<app-form-group
label="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
fieldId="name"
[required]="true"
[invalid]="isFieldInvalid('name')"
[errorMessage]="getFieldError('name')"
hint="–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" >
<app-form-field
type="text"
fieldId="name"
placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è..."
[control]="form.controls.name" ></app-form-field>
</app-form-group>

        <!-- Email Field -->
        <app-form-group
          label="Email"
          fieldId="email"
          [required]="true"
          [invalid]="isFieldInvalid('email')"
          [errorMessage]="getFieldError('email')"
        >
          <app-form-field
            type="email"
            fieldId="email"
            placeholder="user@example.com"
            [control]="form.controls.email"
          ></app-form-field>
        </app-form-group>

        <!-- Role Field -->
        <app-form-group
          label="–†–æ–ª—å"
          fieldId="role"
          [required]="true"
          [invalid]="isFieldInvalid('role')"
          [errorMessage]="getFieldError('role')"
        >
          <app-form-field
            type="select"
            fieldId="role"
            placeholder="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å..."
            [control]="form.controls.role"
            [options]="roleOptions()"
          ></app-form-field>
        </app-form-group>

        <!-- Bio Field -->
        <app-form-group
          label="–û —Å–µ–±–µ"
          fieldId="bio"
          [invalid]="isFieldInvalid('bio')"
          [errorMessage]="getFieldError('bio')"
          hint="–ö—Ä–∞—Ç–∫–∞—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)"
        >
          <app-form-field
            type="textarea"
            fieldId="bio"
            placeholder="–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ..."
            [control]="form.controls.bio"
          ></app-form-field>
        </app-form-group>

        <!-- Active Checkbox -->
        <app-form-group fieldId="active">
          <app-form-field
            type="checkbox"
            fieldId="active"
            label="–ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
            [control]="form.controls.active"
          ></app-form-field>
        </app-form-group>
      </form>

      <!-- Actions -->
      <div page-footer class="page-footer-content">
        <app-button-group>
          <app-button
            type="primary"
            icon="icon-save"
            [loading]="saving()"
            [disabled]="!canSave()"
            (click)="onSubmit()"
          >
            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
          </app-button>

          <app-button
            type="secondary"
            (click)="onCancel()"
          >
            –û—Ç–º–µ–Ω–∞
          </app-button>
        </app-button-group>
      </div>
    </app-page-shell>

`,
  styles: [`
.page-footer-content {
display: flex;
justify-content: space-between;
align-items: center;
padding: 16px 24px;
border-top: 1px solid #f0f0f0;
background: #fafafa;
}
`],
providers: [FormStateService]
})
export class UserFormComponent implements OnInit {
private readonly fb = inject(FormBuilder);
private readonly contextService = inject(ContextService);
private readonly formStateService = inject(FormStateService);
private readonly commandService = inject(CommandService);
private readonly router = inject(Router);

@Input() userId?: string;

form!: FormGroup;
saving = signal(false);

roleOptions = signal<FormFieldOption[]>([
{ value: 'admin', label: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' },
{ value: 'editor', label: '–†–µ–¥–∞–∫—Ç–æ—Ä' },
{ value: 'viewer', label: '–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å' }
]);

pageConfig = computed<PageConfig>(() => ({
header: {
title: this.userId ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è' : '–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
subtitle: this.userId ? `ID: ${this.userId}` : undefined
},
contentType: 'form',
showFormStatusBar: true,
showFooter: true
}));

canSave = computed(() => {
return this.form.valid && this.form.dirty && !this.saving();
});

ngOnInit() {
this.initForm();
this.setupContext();
this.subscribeToFormChanges();

    if (this.userId) {
      this.loadUser();
    }

}

private initForm() {
this.form = this.fb.group({
name: ['', [Validators.required, Validators.minLength(2)]],
email: ['', [Validators.required, Validators.email]],
role: ['', Validators.required],
bio: ['', Validators.maxLength(500)],
active: [true]
});
}

private setupContext() {
this.contextService.setActiveArea({
type: 'form',
entityId: 'users',
mode: this.userId ? 'edit' : 'create',
recordId: this.userId
});
}

private subscribeToFormChanges() {
// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
this.form.valueChanges
.pipe(takeUntilDestroyed())
.subscribe(() => {
this.formStateService.markAsDirty();
this.contextService.updateDataState({ dirty: true });
});

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
    this.form.statusChanges
      .pipe(takeUntilDestroyed())
      .subscribe(status => {
        this.contextService.updateDataState({
          valid: status === 'VALID'
        });
      });

}

private async loadUser() {
this.formStateService.transition('loading');

    try {
      const user = await this.userService.getUser(this.userId!).toPromise();
      this.form.patchValue(user);
      this.formStateService.transition('idle');
    } catch (error) {
      this.formStateService.transition('error');
      // –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ HttpErrorInterceptor
    }

}

async onSubmit() {
if (!this.canSave()) return;

    this.saving.set(true);
    this.formStateService.transition('saving');

    try {
      const command = this.userId ? 'update' : 'create';
      const result = await this.commandService.execute(command, {
        id: this.userId,
        data: this.form.value
      }).toPromise();

      if (result.success) {
        this.formStateService.markAsSaved();
        this.messageService.success('–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        this.router.navigate(['/admin/users']);
      }
    } catch (error) {
      this.formStateService.transition('error');
      // –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ ErrorHandlingService
    } finally {
      this.saving.set(false);
    }

}

onCancel() {
if (this.form.dirty) {
this.modalService.confirm({
title: '–û—Ç–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è?',
content: '–í—Å–µ –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.',
footer: {
okText: '–î–∞, –æ—Ç–º–µ–Ω–∏—Ç—å',
cancelText: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ'
},
onOk: () => {
this.router.navigate(['/admin/users']);
}
});
} else {
this.router.navigate(['/admin/users']);
}
}

isFieldInvalid(fieldName: string): boolean {
const field = this.form.get(fieldName);
return !!(field && field.invalid && field.touched);
}

getFieldError(fieldName: string): string {
const field = this.form.get(fieldName);
if (!field || !field.errors || !field.touched) return '';

    const errors = field.errors;

    if (errors['required']) return '–≠—Ç–æ –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ';
    if (errors['email']) return '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email';
    if (errors['minlength']) {
      return `–ú–∏–Ω–∏–º—É–º ${errors['minlength'].requiredLength} —Å–∏–º–≤–æ–ª–æ–≤`;
    }
    if (errors['maxlength']) {
      return `–ú–∞–∫—Å–∏–º—É–º ${errors['maxlength'].requiredLength} —Å–∏–º–≤–æ–ª–æ–≤`;
    }
    if (errors['server']) return errors['server'];

    return '–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏';

}
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 6.3 Status/Feedback –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã?
–ß–ê–°–¢–¨ 6: UI COMPONENTS LIBRARY (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
6.3 Status/Feedback –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

6.3.1 Badge Component
// ===== BADGE INTERFACES =====

export interface BadgeConfig {
// –ó–Ω–∞—á–µ–Ω–∏–µ badge
value: number | string;

// –¢–∏–ø badge
type?: BadgeType;

// –†–∞–∑–º–µ—Ä
size?: BadgeSize;

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
dot?: boolean; // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫—É
showZero?: boolean; // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å 0
max?: number; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (99+)
}

export type BadgeType =
| 'default'
| 'primary'
| 'success'
| 'warning'
| 'error'
| 'info';

export type BadgeSize = 'sm' | 'md' | 'lg';

// ===== BADGE COMPONENT =====

@Component({
selector: 'app-badge',
standalone: true,
imports: [CommonModule],
template: `    <span
      class="badge"
      [class.badge-default]="type() === 'default'"
      [class.badge-primary]="type() === 'primary'"
      [class.badge-success]="type() === 'success'"
      [class.badge-warning]="type() === 'warning'"
      [class.badge-error]="type() === 'error'"
      [class.badge-info]="type() === 'info'"
      [class.badge-sm]="size() === 'sm'"
      [class.badge-md]="size() === 'md'"
      [class.badge-lg]="size() === 'lg'"
      [class.badge-dot]="dot()"
    >
      @if (!dot()) {
        {{ displayValue() }}
      }
    </span>
 `,
styles: [`
.badge {
display: inline-flex;
align-items: center;
justify-content: center;
min-width: 20px;
height: 20px;
padding: 0 6px;
border-radius: 10px;
font-size: 12px;
font-weight: 600;
line-height: 1;
white-space: nowrap;

      &.badge-sm {
        min-width: 16px;
        height: 16px;
        padding: 0 4px;
        font-size: 10px;
        border-radius: 8px;
      }

      &.badge-lg {
        min-width: 24px;
        height: 24px;
        padding: 0 8px;
        font-size: 14px;
        border-radius: 12px;
      }

      &.badge-dot {
        min-width: 6px;
        width: 6px;
        height: 6px;
        padding: 0;
        border-radius: 50%;
      }
    }

    /* TYPES */
    .badge-default {
      color: #262626;
      background: #d9d9d9;
    }

    .badge-primary {
      color: #fff;
      background: #1890ff;
    }

    .badge-success {
      color: #fff;
      background: #52c41a;
    }

    .badge-warning {
      color: #fff;
      background: #faad14;
    }

    .badge-error {
      color: #fff;
      background: #ff4d4f;
    }

    .badge-info {
      color: #fff;
      background: #1890ff;
    }

`]
})
export class BadgeComponent {
value = input.required<number | string>();
type = input<BadgeType>('default');
size = input<BadgeSize>('md');
dot = input<boolean>(false);
showZero = input<boolean>(false);
max = input<number>(99);

displayValue = computed(() => {
const val = this.value();

    // –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 0
    if (val === 0 && !this.showZero()) return '';

    // –ß–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    if (typeof val === 'number') {
      const max = this.max();
      return val > max ? `${max}+` : val.toString();
    }

    return val;

});
}

6.3.2 Status Indicator Component
// ===== STATUS INDICATOR INTERFACES =====

export interface StatusConfig {
// –¢–∏–ø —Å—Ç–∞—Ç—É—Å–∞
type: StatusType;

// –¢–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞
label: string;

// –ò–∫–æ–Ω–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
icon?: string;

// –†–∞–∑–º–µ—Ä
size?: 'sm' | 'md' | 'lg';

// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ—á–∫—É
showDot?: boolean;

// –ê–Ω–∏–º–∞—Ü–∏—è —Ç–æ—á–∫–∏ (–ø—É–ª—å—Å–∞—Ü–∏—è)
pulse?: boolean;
}

export type StatusType =
| 'success'
| 'warning'
| 'error'
| 'info'
| 'processing'
| 'default';

// ===== STATUS INDICATOR COMPONENT =====

@Component({
selector: 'app-status',
standalone: true,
imports: [CommonModule],
template: `
<span
class="status"
[class.status-success]="type() === 'success'"
[class.status-warning]="type() === 'warning'"
[class.status-error]="type() === 'error'"
[class.status-info]="type() === 'info'"
[class.status-processing]="type() === 'processing'"
[class.status-default]="type() === 'default'"
[class.status-sm]="size() === 'sm'"
[class.status-md]="size() === 'md'"
[class.status-lg]="size() === 'lg'" >
@if (showDot()) {
<span
class="status-dot"
[class.status-dot-pulse]="pulse()" ></span>
}

      @if (icon()) {
        <app-icon [iconKey]="icon()!" class="status-icon"></app-icon>
      }

      <span class="status-text">{{ label() }}</span>
    </span>

`,
  styles: [`
.status {
display: inline-flex;
align-items: center;
gap: 6px;
padding: 4px 12px;
border-radius: 12px;
font-size: 14px;
font-weight: 500;

      &.status-sm {
        padding: 2px 8px;
        font-size: 12px;
        gap: 4px;
      }

      &.status-lg {
        padding: 6px 16px;
        font-size: 16px;
        gap: 8px;
      }
    }

    .status-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      flex-shrink: 0;

      &.status-dot-pulse {
        animation: status-pulse 1.5s ease-in-out infinite;
      }
    }

    @keyframes status-pulse {
      0%, 100% {
        opacity: 1;
        transform: scale(1);
      }
      50% {
        opacity: 0.5;
        transform: scale(1.2);
      }
    }

    .status-icon {
      font-size: 16px;
      flex-shrink: 0;
    }

    .status-text {
      line-height: 1;
    }

    /* TYPES */
    .status-success {
      color: #52c41a;
      background: #f6ffed;
      border: 1px solid #b7eb8f;

      .status-dot {
        background: #52c41a;
      }
    }

    .status-warning {
      color: #faad14;
      background: #fffbe6;
      border: 1px solid #ffe58f;

      .status-dot {
        background: #faad14;
      }
    }

    .status-error {
      color: #ff4d4f;
      background: #fff2f0;
      border: 1px solid #ffccc7;

      .status-dot {
        background: #ff4d4f;
      }
    }

    .status-info {
      color: #1890ff;
      background: #e6f7ff;
      border: 1px solid #91d5ff;

      .status-dot {
        background: #1890ff;
      }
    }

    .status-processing {
      color: #1890ff;
      background: #e6f7ff;
      border: 1px solid #91d5ff;

      .status-dot {
        background: #1890ff;
        animation: status-pulse 1.5s ease-in-out infinite;
      }
    }

    .status-default {
      color: #262626;
      background: #fafafa;
      border: 1px solid #d9d9d9;

      .status-dot {
        background: #d9d9d9;
      }
    }

`]
})
export class StatusComponent {
type = input.required<StatusType>();
label = input.required<string>();
icon = input<string>();
size = input<'sm' | 'md' | 'lg'>('md');
showDot = input<boolean>(true);
pulse = input<boolean>(false);
}

6.3.3 Progress Component
// ===== PROGRESS INTERFACES =====

export interface ProgressConfig {
// –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (0-100)
percent: number;

// –¢–∏–ø progress bar
type?: ProgressType;

// –†–∞–∑–º–µ—Ä
size?: ProgressSize;

// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç
showText?: boolean;

// –§–æ—Ä–º–∞—Ç —Ç–µ–∫—Å—Ç–∞
format?: (percent: number) => string;

// –°—Ç–∞—Ç—É—Å
status?: ProgressStatus;
}

export type ProgressType = 'line' | 'circle';
export type ProgressSize = 'sm' | 'md' | 'lg';
export type ProgressStatus = 'normal' | 'success' | 'exception' | 'active';

// ===== PROGRESS COMPONENT =====

@Component({
selector: 'app-progress',
standalone: true,
imports: [CommonModule],
template: `
@if (type() === 'line') {
<div
class="progress-line"
[class.progress-sm]="size() === 'sm'"
[class.progress-md]="size() === 'md'"
[class.progress-lg]="size() === 'lg'" >
<div class="progress-outer">
<div class="progress-inner">
<div
class="progress-bg"
[class.progress-success]="getStatus() === 'success'"
[class.progress-exception]="getStatus() === 'exception'"
[class.progress-active]="getStatus() === 'active'"
[style.width.%]="percent()" ></div>
</div>
</div>

        @if (showText()) {
          <span class="progress-text">
            {{ getFormattedText() }}
          </span>
        }
      </div>
    } @else {
      <div
        class="progress-circle"
        [class.progress-sm]="size() === 'sm'"
        [class.progress-md]="size() === 'md'"
        [class.progress-lg]="size() === 'lg'"
      >
        <svg
          [attr.width]="getCircleSize()"
          [attr.height]="getCircleSize()"
          viewBox="0 0 100 100"
        >
          <!-- Background circle -->
          <circle
            cx="50"
            cy="50"
            r="45"
            fill="none"
            stroke="#f0f0f0"
            stroke-width="8"
          />

          <!-- Progress circle -->
          <circle
            cx="50"
            cy="50"
            r="45"
            fill="none"
            [attr.stroke]="getStrokeColor()"
            stroke-width="8"
            stroke-linecap="round"
            [attr.stroke-dasharray]="getCircumference()"
            [attr.stroke-dashoffset]="getStrokeDashoffset()"
            transform="rotate(-90 50 50)"
            class="progress-circle-path"
          />
        </svg>

        <div class="progress-circle-text">
          {{ getFormattedText() }}
        </div>
      </div>
    }

`,
  styles: [`
/_ LINE PROGRESS _/
.progress-line {
display: flex;
align-items: center;
gap: 8px;
}

    .progress-outer {
      flex: 1;
      background: #f5f5f5;
      border-radius: 100px;
      overflow: hidden;
    }

    .progress-inner {
      position: relative;
    }

    .progress-bg {
      height: 8px;
      background: #1890ff;
      border-radius: 100px;
      transition: width 0.3s ease;

      &.progress-success {
        background: #52c41a;
      }

      &.progress-exception {
        background: #ff4d4f;
      }

      &.progress-active {
        animation: progress-active 2s ease infinite;
      }
    }

    .progress-sm .progress-bg {
      height: 6px;
    }

    .progress-lg .progress-bg {
      height: 10px;
    }

    @keyframes progress-active {
      0% {
        opacity: 0.3;
        width: 0;
      }
      100% {
        opacity: 0;
        width: 100%;
      }
    }

    .progress-text {
      min-width: 40px;
      font-size: 14px;
      color: #262626;
      text-align: right;
    }

    /* CIRCLE PROGRESS */
    .progress-circle {
      position: relative;
      display: inline-block;
    }

    .progress-circle-path {
      transition: stroke-dashoffset 0.3s ease;
    }

    .progress-circle-text {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 24px;
      font-weight: 600;
      color: #262626;
    }

    .progress-sm .progress-circle-text {
      font-size: 16px;
    }

    .progress-lg .progress-circle-text {
      font-size: 32px;
    }

`]
})
export class ProgressComponent {
percent = input.required<number>();
type = input<ProgressType>('line');
size = input<ProgressSize>('md');
showText = input<boolean>(true);
format = input<(percent: number) => string>();
status = input<ProgressStatus>('normal');

getStatus(): ProgressStatus {
const percent = this.percent();

    if (this.status() !== 'normal') {
      return this.status();
    }

    if (percent === 100) {
      return 'success';
    }

    return 'normal';

}

getFormattedText(): string {
const format = this.format();

    if (format) {
      return format(this.percent());
    }

    return `${Math.round(this.percent())}%`;

}

getCircleSize(): number {
const sizes = { sm: 80, md: 120, lg: 160 };
return sizes[this.size()];
}

getCircumference(): number {
return 2 _ Math.PI _ 45; // r = 45
}

getStrokeDashoffset(): number {
const circumference = this.getCircumference();
const offset = circumference - (this.percent() / 100) \* circumference;
return offset;
}

getStrokeColor(): string {
const status = this.getStatus();
const colors = {
normal: '#1890ff',
success: '#52c41a',
exception: '#ff4d4f',
active: '#1890ff'
};
return colors[status];
}
}

6.3.4 Skeleton Component
// ===== SKELETON INTERFACES =====

export interface SkeletonConfig {
// –ê–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
active?: boolean;

// –ü–æ–∫–∞–∑–∞—Ç—å –∞–≤–∞—Ç–∞—Ä
avatar?: boolean;

// –†–∞–∑–º–µ—Ä –∞–≤–∞—Ç–∞—Ä–∞
avatarSize?: SkeletonAvatarSize;

// –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
rows?: number;

// –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫
title?: boolean;
}

export type SkeletonAvatarSize = 'sm' | 'md' | 'lg';

// ===== SKELETON COMPONENT =====

@Component({
selector: 'app-skeleton',
standalone: true,
imports: [CommonModule],
template: `
<div
class="skeleton"
[class.skeleton-active]="active()" >
@if (avatar()) {
<div
class="skeleton-avatar"
[class.skeleton-avatar-sm]="avatarSize() === 'sm'"
[class.skeleton-avatar-md]="avatarSize() === 'md'"
[class.skeleton-avatar-lg]="avatarSize() === 'lg'" ></div>
}

      <div class="skeleton-content">
        @if (title()) {
          <div class="skeleton-title"></div>
        }

        @for (row of rowsArray(); track $index) {
          <div
            class="skeleton-row"
            [style.width]="getRowWidth($index)"
          ></div>
        }
      </div>
    </div>

`,
  styles: [`
.skeleton {
display: flex;
gap: 16px;
}

    .skeleton-avatar {
      flex-shrink: 0;
      background: #f0f0f0;
      border-radius: 50%;

      &.skeleton-avatar-sm {
        width: 32px;
        height: 32px;
      }

      &.skeleton-avatar-md {
        width: 40px;
        height: 40px;
      }

      &.skeleton-avatar-lg {
        width: 48px;
        height: 48px;
      }
    }

    .skeleton-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .skeleton-title,
    .skeleton-row {
      height: 16px;
      background: #f0f0f0;
      border-radius: 4px;
    }

    .skeleton-title {
      width: 40%;
      height: 18px;
    }

    .skeleton-active {
      .skeleton-avatar,
      .skeleton-title,
      .skeleton-row {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e0e0e0 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s ease infinite;
      }
    }

    @keyframes skeleton-loading {
      0% {
        background-position: 200% 0;
      }
      100% {
        background-position: -200% 0;
      }
    }

`]
})
export class SkeletonComponent {
active = input<boolean>(true);
avatar = input<boolean>(false);
avatarSize = input<SkeletonAvatarSize>('md');
rows = input<number>(3);
title = input<boolean>(true);

rowsArray = computed(() => {
return Array.from({ length: this.rows() }, (\_, i) => i);
});

getRowWidth(index: number): string {
const total = this.rows();

    // –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ä–æ—á–µ
    if (index === total - 1) {
      return '60%';
    }

    return '100%';

}
}

6.3.5 Empty State Component
// ===== EMPTY STATE INTERFACES =====

export interface EmptyStateConfig {
// –ò–∫–æ–Ω–∫–∞
icon?: string;

// –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (URL)
image?: string;

// –ó–∞–≥–æ–ª–æ–≤–æ–∫
title?: string;

// –û–ø–∏—Å–∞–Ω–∏–µ
description?: string;

// –î–µ–π—Å—Ç–≤–∏—è
actions?: EmptyStateAction[];
}

export interface EmptyStateAction {
label: string;
type?: ButtonType;
icon?: string;
handler: () => void;
}

// ===== EMPTY STATE COMPONENT =====

@Component({
selector: 'app-empty-state',
standalone: true,
imports: [CommonModule, ButtonComponent],
template: `
<div class="empty-state">
@if (image()) {
<img
[src]="image()!"
alt="Empty"
class="empty-state-image"
/>
} @else if (icon()) {
<div class="empty-state-icon">
<app-icon [iconKey]="icon()!"></app-icon>
</div>
} @else {
<div class="empty-state-icon">
<app-icon iconKey="icon-inbox"></app-icon>
</div>
}

      @if (title()) {
        <h3 class="empty-state-title">{{ title() }}</h3>
      }

      @if (description()) {
        <p class="empty-state-description">{{ description() }}</p>
      }

      @if (actions() && actions()!.length > 0) {
        <div class="empty-state-actions">
          @for (action of actions(); track action.label) {
            <app-button
              [type]="action.type || 'primary'"
              [icon]="action.icon"
              (click)="action.handler()"
            >
              {{ action.label }}
            </app-button>
          }
        </div>
      }
    </div>

`,
  styles: [`
.empty-state {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
padding: 64px 24px;
text-align: center;
}

    .empty-state-image {
      max-width: 200px;
      height: auto;
      margin-bottom: 24px;
      opacity: 0.8;
    }

    .empty-state-icon {
      font-size: 64px;
      color: #d9d9d9;
      margin-bottom: 24px;
      opacity: 0.5;
    }

    .empty-state-title {
      margin: 0 0 8px;
      font-size: 18px;
      font-weight: 600;
      color: #262626;
    }

    .empty-state-description {
      margin: 0 0 24px;
      font-size: 14px;
      color: #8c8c8c;
      max-width: 400px;
    }

    .empty-state-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
    }

`]
})
export class EmptyStateComponent {
icon = input<string>();
image = input<string>();
title = input<string>('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö');
description = input<string>();
actions = input<EmptyStateAction[]>();
}

6.3.6 Spinner Component
// ===== SPINNER COMPONENT =====

@Component({
selector: 'app-spinner',
standalone: true,
imports: [CommonModule],
template: `
<div
class="spinner"
[class.spinner-sm]="size() === 'sm'"
[class.spinner-md]="size() === 'md'"
[class.spinner-lg]="size() === 'lg'"
[style.color]="color()" >
<div class="spinner-circle"></div>

      @if (text()) {
        <span class="spinner-text">{{ text() }}</span>
      }
    </div>

`,
  styles: [`
.spinner {
display: inline-flex;
flex-direction: column;
align-items: center;
gap: 12px;
}

    .spinner-circle {
      border: 3px solid rgba(0, 0, 0, 0.1);
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spinner-rotate 0.8s linear infinite;
    }

    .spinner-sm .spinner-circle {
      width: 16px;
      height: 16px;
      border-width: 2px;
    }

    .spinner-md .spinner-circle {
      width: 32px;
      height: 32px;
      border-width: 3px;
    }

    .spinner-lg .spinner-circle {
      width: 48px;
      height: 48px;
      border-width: 4px;
    }

    @keyframes spinner-rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    .spinner-text {
      font-size: 14px;
      color: #8c8c8c;
    }

`]
})
export class SpinnerComponent {
size = input<'sm' | 'md' | 'lg'>('md');
color = input<string>('#1890ff');
text = input<string>();
}

6.3.7 Tooltip Component
// ===== TOOLTIP DIRECTIVE =====

@Directive({
selector: '[appTooltip]',
standalone: true,
host: {
'(mouseenter)': 'show()',
'(mouseleave)': 'hide()',
'(focus)': 'show()',
'(blur)': 'hide()'
}
})
export class TooltipDirective implements OnDestroy {
private readonly overlay = inject(Overlay);
private readonly viewContainerRef = inject(ViewContainerRef);

appTooltip = input.required<string>();
tooltipPosition = input<'top' | 'bottom' | 'left' | 'right'>('top');

private overlayRef?: OverlayRef;
private hideTimeout?: any;

ngOnDestroy() {
this.destroyTooltip();
}

show() {
if (this.hideTimeout) {
clearTimeout(this.hideTimeout);
}

    if (!this.overlayRef) {
      this.createTooltip();
    }

}

hide() {
this.hideTimeout = setTimeout(() => {
this.destroyTooltip();
}, 100);
}

private createTooltip() {
const positionStrategy = this.overlay
.position()
.flexibleConnectedTo(this.viewContainerRef.element)
.withPositions([
{
originX: 'center',
originY: 'top',
overlayX: 'center',
overlayY: 'bottom',
offsetY: -8
}
]);

    this.overlayRef = this.overlay.create({
      positionStrategy,
      scrollStrategy: this.overlay.scrollStrategies.close()
    });

    const tooltipPortal = new ComponentPortal(
      TooltipComponent,
      this.viewContainerRef
    );

    const componentRef = this.overlayRef.attach(tooltipPortal);
    componentRef.setInput('text', this.appTooltip());

}

private destroyTooltip() {
if (this.overlayRef) {
this.overlayRef.dispose();
this.overlayRef = undefined;
}
}
}

// ===== TOOLTIP COMPONENT =====

@Component({
selector: 'app-tooltip',
standalone: true,
imports: [CommonModule],
template: `    <div class="tooltip">
      <div class="tooltip-arrow"></div>
      <div class="tooltip-inner">{{ text() }}</div>
    </div>
 `,
styles: [`
.tooltip {
position: relative;
z-index: 1060;
animation: tooltip-fade-in 0.2s ease-out;
}

    @keyframes tooltip-fade-in {
      from {
        opacity: 0;
        transform: translateY(4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .tooltip-arrow {
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 8px;
      height: 8px;
      background: #262626;
      transform: translateX(-50%) rotate(45deg);
    }

    .tooltip-inner {
      padding: 6px 12px;
      background: #262626;
      color: #fff;
      font-size: 12px;
      border-radius: 4px;
      white-space: nowrap;
      max-width: 250px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

`]
})
export class TooltipComponent {
text = input.required<string>();
}

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Status/Feedback –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
// ===== –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø =====

@Component({
selector: 'app-dashboard',
template: `
<app-page-shell [config]="pageConfig()">
<!-- Status Indicators -->
<div class="dashboard-stats">
<div class="stat-card">
<app-status
type="success"
label="–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"
icon="icon-user"
[showDot]="true" ></app-status>
<span class="stat-value">1,234</span>
</div>

        <div class="stat-card">
          <app-status
            type="processing"
            label="–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤"
            [showDot]="true"
            [pulse]="true"
          ></app-status>
          <span class="stat-value">56</span>
        </div>

        <div class="stat-card">
          <app-status
            type="error"
            label="–û—à–∏–±–∫–∏"
            icon="icon-warning"
            [showDot]="true"
          ></app-status>
          <app-badge
            [value]="errorCount()"
            type="error"
          ></app-badge>
        </div>
      </div>

      <!-- Progress -->
      <div class="progress-section">
        <h3>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
        <app-progress
          [percent]="uploadProgress()"
          [status]="uploadStatus()"
          [showText]="true"
        ></app-progress>
      </div>

      <!-- Loading State -->
      @if (loading()) {
        <app-skeleton
          [active]="true"
          [avatar]="true"
          [rows]="4"
          [title]="true"
        ></app-skeleton>
      } @else if (data().length === 0) {
        <!-- Empty State -->
        <app-empty-state
          icon="icon-inbox"
          title="–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
          description="–î–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å."
          [actions]="emptyActions()"
        ></app-empty-state>
      } @else {
        <!-- Data -->
        <app-table [config]="tableConfig()"></app-table>
      }

      <!-- Spinner Overlay -->
      @if (globalLoading()) {
        <div class="loading-overlay">
          <app-spinner
            size="lg"
            text="–ó–∞–≥—Ä—É–∑–∫–∞..."
          ></app-spinner>
        </div>
      }
    </app-page-shell>

`,
  styles: [`
.dashboard-stats {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 16px;
margin-bottom: 24px;
}

    .stat-card {
      padding: 16px;
      background: #fff;
      border: 1px solid #f0f0f0;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: 600;
      color: #262626;
    }

    .progress-section {
      margin-bottom: 24px;

      h3 {
        margin: 0 0 12px;
        font-size: 16px;
        font-weight: 600;
      }
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

`]
})
export class DashboardComponent {
loading = signal(false);
globalLoading = signal(false);
uploadProgress = signal(0);
uploadStatus = signal<ProgressStatus>('normal');
errorCount = signal(3);
data = signal<any[]>([]);

emptyActions = signal<EmptyStateAction[]>([
{
label: '–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å',
type: 'primary',
icon: 'icon-plus',
handler: () => this.createRecord()
},
{
label: '–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',
type: 'secondary',
icon: 'icon-upload',
handler: () => this.importData()
}
]);

createRecord() {
this.router.navigate(['/create']);
}

importData() {
// Import logic
}
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ß–ê–°–¢–¨ 7: STYLING SYSTEM?
–ß–ê–°–¢–¨ 7: STYLING SYSTEM
7.1 CSS Architecture (BEM + is-\* —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ï–¥–∏–Ω–∞—è –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å —Å—Ç–∏–ª–µ–π.

7.1.1 BEM Methodology
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ BEM (Block Element Modifier) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–°–¢–†–£–ö–¢–£–†–ê:
block\_\_element--modifier

–û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø:
Block (–ë–ª–æ–∫) - –ù–µ–∑–∞–≤–∏—Å–∏–º–∞—è —Å—É—â–Ω–æ—Å—Ç—å
Element (–≠–ª–µ–º–µ–Ω—Ç) - –ß–∞—Å—Ç—å –±–ª–æ–∫–∞
Modifier (–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä) - –í–∞—Ä–∏–∞–Ω—Ç –±–ª–æ–∫–∞/—ç–ª–µ–º–µ–Ω—Ç–∞

–ü–†–ê–í–ò–õ–ê:

1. –ë–ª–æ–∫ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –°–£–©–ù–û–°–¢–¨, –Ω–µ –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
2. –≠–ª–µ–º–µ–Ω—Ç —Å–≤—è–∑–∞–Ω —Å –±–ª–æ–∫–æ–º —á–µ—Ä–µ–∑ \_\_
3. –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —á–µ—Ä–µ–∑ --
4. –°–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ—Ä–µ–∑ is-\* (–ù–ï BEM, –Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
5. –ù–∏–∫–∞–∫–∏—Ö –∫–∞—Å–∫–∞–¥–æ–≤ (.block .element ‚ùå)

7.1.2 Naming Conventions
// ===== NAMING CONVENTIONS =====

/\*\*

- –ë–õ–û–ö–ò (Block)
- –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  \*/

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
.page-header { }
.user-card { }
.navigation-menu { }
.data-table { }

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
.header { } // –°–ª–∏—à–∫–æ–º –æ–±—â–µ–µ
.red-button { } // –û–ø–∏—Å—ã–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
.left-sidebar { } // –û–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é

/\*\*

- –≠–õ–ï–ú–ï–ù–¢–´ (Element)
- –ß–∞—Å—Ç–∏ –±–ª–æ–∫–∞, –Ω–µ –∏–º–µ—é—â–∏–µ —Å–º—ã—Å–ª–∞ –≤–Ω–µ –±–ª–æ–∫–∞
  \*/

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
.page-header**title { }
.page-header**subtitle { }
.user-card**avatar { }
.user-card**name { }
.user-card\_\_email { }

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
.page-header .title { } // –ö–∞—Å–∫–∞–¥
.page-header-title { } // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
.page-header**user**name { } // –í–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤

/\*\*

- –ú–û–î–ò–§–ò–ö–ê–¢–û–†–´ (Modifier)
- –í–∞—Ä–∏–∞–Ω—Ç—ã –±–ª–æ–∫–∞ –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
  \*/

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
.button--primary { }
.button--secondary { }
.button--large { }
.user-card--compact { }
.page-header--dark { }

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
.button-primary { } // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
.button.primary { } // –ù–µ BEM
.large-button { } // –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ –±–ª–æ–∫

/\*\*

- –°–û–°–¢–û–Ø–ù–ò–Ø (State) - is-\* —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  \*/

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
.is-active { }
.is-disabled { }
.is-loading { }
.is-open { }
.is-collapsed { }
.is-invalid { }
.is-selected { }
.is-highlighted { }

// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
.active { } // –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å
.button-disabled { } // –°–º–µ—à–∏–≤–∞–Ω–∏–µ —Å BEM
.open-menu { } // –ù–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

7.1.3 State Classes (is-\* —Ñ–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
// ===== STATE CLASSES TAXONOMY =====

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 1: Layout States
- –°–æ—Å—Ç–æ—è–Ω–∏—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ/–≤–∏–¥–∏–º–æ—Å—Ç—å
  \*/
  .is-open { } // –≠–ª–µ–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç (–º–æ–¥–∞–ª, –º–µ–Ω—é, –ø–∞–Ω–µ–ª—å)
  .is-closed { } // –≠–ª–µ–º–µ–Ω—Ç –∑–∞–∫—Ä—ã—Ç
  .is-collapsed { } // –≠–ª–µ–º–µ–Ω—Ç —Å–≤—ë—Ä–Ω—É—Ç (sidebar, —Å–µ–∫—Ü–∏—è)
  .is-expanded { } // –≠–ª–µ–º–µ–Ω—Ç —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç
  .is-hidden { } // –≠–ª–µ–º–µ–Ω—Ç —Å–∫—Ä—ã—Ç (display: none)
  .is-visible { } // –≠–ª–µ–º–µ–Ω—Ç –≤–∏–¥–∏–º
  .is-fixed { } // –≠–ª–µ–º–µ–Ω—Ç –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω (sticky header)
  .is-floating { } // –≠–ª–µ–º–µ–Ω—Ç –ø–ª–∞–≤–∞—é—â–∏–π (dropdown)

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 2: Data States
- –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–≥—Ä—É–∑–∫–∏
  \*/
  .is-loading { } // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  .is-saving { } // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
  .is-empty { } // –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö
  .is-dirty { } // –ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  .is-pristine { } // –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å dirty)
  .is-valid { } // –î–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–Ω—ã
  .is-invalid { } // –î–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã
  .is-pending { } // –û–∂–∏–¥–∞–Ω–∏–µ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è)

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 3: Interaction States
- –°–æ—Å—Ç–æ—è–Ω–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  \*/
  .is-active { } // –≠–ª–µ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–µ–Ω (—Ç–µ–∫—É—â–∞—è –≤–∫–ª–∞–¥–∫–∞, –º–∞—Ä—à—Ä—É—Ç)
  .is-selected { } // –≠–ª–µ–º–µ–Ω—Ç –≤—ã–±—Ä–∞–Ω (—Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã, checkbox)
  .is-disabled { } // –≠–ª–µ–º–µ–Ω—Ç –æ—Ç–∫–ª—é—á—ë–Ω
  .is-readonly { } // –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ
  .is-focused { } // –≠–ª–µ–º–µ–Ω—Ç –≤ —Ñ–æ–∫—É—Å–µ
  .is-hovered { } // –ù–∞–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏ (JS-driven)
  .is-pressed { } // –≠–ª–µ–º–µ–Ω—Ç –Ω–∞–∂–∞—Ç
  .is-dragging { } // –≠–ª–µ–º–µ–Ω—Ç –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ—Ç—Å—è
  .is-clickable { } // –≠–ª–µ–º–µ–Ω—Ç –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π (–∫—É—Ä—Å–æ—Ä pointer)

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 4: Validation States
- –°–æ—Å—Ç–æ—è–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  \*/
  .is-error { } // –ï—Å—Ç—å –æ—à–∏–±–∫–∞
  .is-warning { } // –ï—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
  .is-success { } // –£—Å–ø–µ—à–Ω–æ
  .is-info { } // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  .is-critical { } // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 5: Visual States
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  \*/
  .is-highlighted { } // –≠–ª–µ–º–µ–Ω—Ç –ø–æ–¥—Å–≤–µ—á–µ–Ω (scroll to, search result)
  .is-blinking { } // –ú–∏–≥–∞—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
  .is-animated { } // –ê–Ω–∏–º–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞
  .is-transparent { } // –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–π
  .is-bordered { } // –° —Ä–∞–º–∫–æ–π

/\*\*

- –ö–ê–¢–ï–ì–û–†–ò–Ø 6: Responsive States
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ media queries)
  \*/
  .is-mobile { } // –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
  .is-tablet { } // –ü–ª–∞–Ω—à–µ—Ç
  .is-desktop { } // –î–µ—Å–∫—Ç–æ–ø
  .is-fullscreen { } // –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º

7.1.4 SCSS Structure
// ===== FILE STRUCTURE =====

/\*\*

- styles/
- ‚îú‚îÄ‚îÄ abstracts/
- ‚îÇ ‚îú‚îÄ‚îÄ \_variables.scss // CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- ‚îÇ ‚îú‚îÄ‚îÄ \_mixins.scss // SCSS mixins
- ‚îÇ ‚îî‚îÄ‚îÄ \_functions.scss // SCSS —Ñ—É–Ω–∫—Ü–∏–∏
- ‚îú‚îÄ‚îÄ base/
- ‚îÇ ‚îú‚îÄ‚îÄ \_reset.scss // CSS Reset
- ‚îÇ ‚îú‚îÄ‚îÄ \_typography.scss // –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- ‚îÇ ‚îî‚îÄ‚îÄ \_global.scss // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
- ‚îú‚îÄ‚îÄ components/
- ‚îÇ ‚îú‚îÄ‚îÄ \_buttons.scss // –ö–Ω–æ–ø–∫–∏
- ‚îÇ ‚îú‚îÄ‚îÄ \_forms.scss // –§–æ—Ä–º—ã
- ‚îÇ ‚îú‚îÄ‚îÄ \_tables.scss // –¢–∞–±–ª–∏—Ü—ã
- ‚îÇ ‚îî‚îÄ‚îÄ ... // –î—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚îú‚îÄ‚îÄ layout/
- ‚îÇ ‚îú‚îÄ‚îÄ \_header.scss // Header
- ‚îÇ ‚îú‚îÄ‚îÄ \_sidebar.scss // Sidebar
- ‚îÇ ‚îú‚îÄ‚îÄ \_footer.scss // Footer
- ‚îÇ ‚îî‚îÄ‚îÄ \_grid.scss // Grid —Å–∏—Å—Ç–µ–º–∞
- ‚îú‚îÄ‚îÄ states/
- ‚îÇ ‚îî‚îÄ‚îÄ \_states.scss // is-\* –∫–ª–∞—Å—Å—ã
- ‚îú‚îÄ‚îÄ utilities/
- ‚îÇ ‚îî‚îÄ‚îÄ \_helpers.scss // –£—Ç–∏–ª–∏—Ç—ã
- ‚îú‚îÄ‚îÄ vendors/
- ‚îÇ ‚îî‚îÄ‚îÄ \_ng-zorro.scss // ng-zorro overrides
- ‚îî‚îÄ‚îÄ main.scss // –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
  \*/

// ===== abstracts/\_variables.scss =====

:root {
// Colors
--color-primary: #1890ff;
--color-primary-hover: #40a9ff;
--color-primary-active: #096dd9;

--color-success: #52c41a;
--color-warning: #faad14;
--color-error: #ff4d4f;
--color-info: #1890ff;

// Text
--color-text-primary: #262626;
--color-text-secondary: #8c8c8c;
--color-text-disabled: #bfbfbf;

// Background
--color-bg-base: #fff;
--color-bg-light: #fafafa;
--color-bg-dark: #f0f0f0;

// Border
--color-border-base: #d9d9d9;
--color-border-light: #f0f0f0;

// Spacing
--spacing-xs: 4px;
--spacing-sm: 8px;
--spacing-md: 16px;
--spacing-lg: 24px;
--spacing-xl: 32px;
--spacing-xxl: 48px;

// Border Radius
--radius-sm: 2px;
--radius-md: 4px;
--radius-lg: 8px;
--radius-round: 50%;

// Font
--font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
--font-family-code: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;

--font-size-xs: 12px;
--font-size-sm: 14px;
--font-size-md: 16px;
--font-size-lg: 18px;
--font-size-xl: 24px;

--font-weight-normal: 400;
--font-weight-medium: 500;
--font-weight-semibold: 600;
--font-weight-bold: 700;

// Line Height
--line-height-tight: 1.2;
--line-height-base: 1.5;
--line-height-loose: 1.8;

// Shadows
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
--shadow-md: 0 2px 8px rgba(0, 0, 0, 0.1);
--shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.15);

// Transitions
--transition-fast: 0.15s;
--transition-base: 0.3s;
--transition-slow: 0.5s;

// Z-index
--z-dropdown: 1000;
--z-sticky: 1020;
--z-fixed: 1030;
--z-modal-backdrop: 1040;
--z-modal: 1050;
--z-popover: 1060;
--z-tooltip: 1070;
}

// ===== abstracts/\_mixins.scss =====

// Responsive breakpoints
@mixin respond-to($breakpoint) {
@if $breakpoint == 'mobile' {
@media (max-width: 767px) { @content; }
}
@else if $breakpoint == 'tablet' {
@media (min-width: 768px) and (max-width: 1023px) { @content; }
}
@else if $breakpoint == 'desktop' {
@media (min-width: 1024px) { @content; }
}
}

// Flexbox center
@mixin flex-center {
display: flex;
align-items: center;
justify-content: center;
}

// Truncate text
@mixin truncate {
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}

// Multi-line truncate
@mixin line-clamp($lines: 2) {
display: -webkit-box;
-webkit-line-clamp: $lines;
-webkit-box-orient: vertical;
overflow: hidden;
}

// Focus outline
@mixin focus-outline($color: var(--color-primary)) {
  outline: none;
  box-shadow: 0 0 0 2px rgba($color, 0.2);
}

// Hover lift effect
@mixin hover-lift {
transition: transform var(--transition-base), box-shadow var(--transition-base);

&:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-md);
}
}

// ===== base/\_reset.scss =====

_,
_::before,
\*::after {
box-sizing: border-box;
margin: 0;
padding: 0;
}

html {
font-size: 16px;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
}

body {
font-family: var(--font-family-base);
font-size: var(--font-size-sm);
line-height: var(--line-height-base);
color: var(--color-text-primary);
background: var(--color-bg-base);
}

a {
color: var(--color-primary);
text-decoration: none;
transition: color var(--transition-base);

&:hover {
color: var(--color-primary-hover);
}
}

button {
font-family: inherit;
cursor: pointer;
}

img {
max-width: 100%;
height: auto;
display: block;
}

// ===== base/\_typography.scss =====

h1, h2, h3, h4, h5, h6 {
margin: 0 0 var(--spacing-md);
font-weight: var(--font-weight-semibold);
line-height: var(--line-height-tight);
color: var(--color-text-primary);
}

h1 { font-size: 32px; }
h2 { font-size: 24px; }
h3 { font-size: 20px; }
h4 { font-size: 18px; }
h5 { font-size: 16px; }
h6 { font-size: 14px; }

p {
margin: 0 0 var(--spacing-md);
line-height: var(--line-height-base);
}

code {
font-family: var(--font-family-code);
font-size: 0.9em;
padding: 2px 6px;
background: var(--color-bg-light);
border-radius: var(--radius-sm);
}

pre {
font-family: var(--font-family-code);
padding: var(--spacing-md);
background: var(--color-bg-light);
border-radius: var(--radius-md);
overflow-x: auto;

code {
padding: 0;
background: none;
}
}

// ===== states/\_states.scss =====

/\*\*

- CRITICAL: State –∫–ª–∞—Å—Å—ã –í–°–ï–ì–î–ê –∏–º–µ—é—Ç –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ–º !important –¢–û–õ–¨–ö–û –¥–ª—è is-_ –∫–ª–∞—Å—Å–æ–≤
  _/

// Layout States
.is-hidden {
display: none !important;
}

.is-visible {
display: block !important;
}

.is-collapsed {
// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
}

.is-expanded {
// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
}

// Data States
.is-loading {
pointer-events: none !important;
opacity: 0.6 !important;
cursor: wait !important;
}

.is-dirty {
// –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
position: relative;

&::after {
content: '';
position: absolute;
top: 0;
right: 0;
width: 8px;
height: 8px;
background: var(--color-warning);
border-radius: var(--radius-round);
}
}

.is-valid {
border-color: var(--color-success) !important;

&:focus {
box-shadow: 0 0 0 2px rgba(82, 196, 26, 0.2) !important;
}
}

.is-invalid {
border-color: var(--color-error) !important;
background-color: #fff2f0 !important;

&:focus {
box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2) !important;
}
}

// Interaction States
.is-disabled {
opacity: 0.5 !important;
cursor: not-allowed !important;
pointer-events: none !important;
}

.is-readonly {
background-color: var(--color-bg-light) !important;
cursor: default !important;
}

.is-active {
// –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
// –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞, –∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
}

.is-selected {
background-color: #e6f7ff !important;
border-left: 3px solid var(--color-primary) !important;
}

.is-highlighted {
animation: highlight-pulse 2s ease-out !important;
}

@keyframes highlight-pulse {
0%, 100% {
box-shadow: 0 0 0 0 rgba(24, 144, 255, 0);
}
50% {
box-shadow: 0 0 0 4px rgba(24, 144, 255, 0.4);
}
}

.is-clickable {
cursor: pointer !important;
}

// Validation States
.is-error {
color: var(--color-error) !important;

&.is-bordered {
border-color: var(--color-error) !important;
}
}

.is-warning {
color: var(--color-warning) !important;

&.is-bordered {
border-color: var(--color-warning) !important;
}
}

.is-success {
color: var(--color-success) !important;

&.is-bordered {
border-color: var(--color-success) !important;
}
}

.is-info {
color: var(--color-info) !important;

&.is-bordered {
border-color: var(--color-info) !important;
}
}

// ===== utilities/\_helpers.scss =====

// Spacing utilities
.mt-0 { margin-top: 0 !important; }
.mt-xs { margin-top: var(--spacing-xs) !important; }
.mt-sm { margin-top: var(--spacing-sm) !important; }
.mt-md { margin-top: var(--spacing-md) !important; }
.mt-lg { margin-top: var(--spacing-lg) !important; }
.mt-xl { margin-top: var(--spacing-xl) !important; }

.mb-0 { margin-bottom: 0 !important; }
.mb-xs { margin-bottom: var(--spacing-xs) !important; }
.mb-sm { margin-bottom: var(--spacing-sm) !important; }
.mb-md { margin-bottom: var(--spacing-md) !important; }
.mb-lg { margin-bottom: var(--spacing-lg) !important; }
.mb-xl { margin-bottom: var(--spacing-xl) !important; }

.p-0 { padding: 0 !important; }
.p-xs { padding: var(--spacing-xs) !important; }
.p-sm { padding: var(--spacing-sm) !important; }
.p-md { padding: var(--spacing-md) !important; }
.p-lg { padding: var(--spacing-lg) !important; }
.p-xl { padding: var(--spacing-xl) !important; }

// Text utilities
.text-left { text-align: left !important; }
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }

.text-truncate {
@include truncate;
}

.text-line-clamp-2 {
@include line-clamp(2);
}

.text-line-clamp-3 {
@include line-clamp(3);
}

// Display utilities
.d-none { display: none !important; }
.d-block { display: block !important; }
.d-inline { display: inline !important; }
.d-inline-block { display: inline-block !important; }
.d-flex { display: flex !important; }
.d-inline-flex { display: inline-flex !important; }

// Flex utilities
.flex-row { flex-direction: row !important; }
.flex-column { flex-direction: column !important; }
.flex-wrap { flex-wrap: wrap !important; }
.flex-nowrap { flex-wrap: nowrap !important; }

.justify-start { justify-content: flex-start !important; }
.justify-center { justify-content: center !important; }
.justify-end { justify-content: flex-end !important; }
.justify-between { justify-content: space-between !important; }
.justify-around { justify-content: space-around !important; }

.align-start { align-items: flex-start !important; }
.align-center { align-items: center !important; }
.align-end { align-items: flex-end !important; }
.align-stretch { align-items: stretch !important; }

.gap-xs { gap: var(--spacing-xs) !important; }
.gap-sm { gap: var(--spacing-sm) !important; }
.gap-md { gap: var(--spacing-md) !important; }
.gap-lg { gap: var(--spacing-lg) !important; }
.gap-xl { gap: var(--spacing-xl) !important; }

7.1.5 Component Example (–ø–æ–ª–Ω—ã–π —Å—Ç–∏–ª—å)
// ===== components/\_button.scss =====

/\*\*

- Button Component
-
- –°–¢–†–£–ö–¢–£–†–ê:
- .btn - –ë–ª–æ–∫
- .btn\_\_icon - –≠–ª–µ–º–µ–Ω—Ç (–∏–∫–æ–Ω–∫–∞)
- .btn\_\_text - –≠–ª–µ–º–µ–Ω—Ç (—Ç–µ–∫—Å—Ç)
- .btn--primary - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—Ç–∏–ø)
- .btn--sm - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—Ä–∞–∑–º–µ—Ä)
- .is-loading - –°–æ—Å—Ç–æ—è–Ω–∏–µ
- .is-disabled - –°–æ—Å—Ç–æ—è–Ω–∏–µ
  \*/

// –ë–ª–æ–∫
.btn {
// –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏
display: inline-flex;
align-items: center;
justify-content: center;
gap: var(--spacing-sm);
padding: 6px 16px;
border: 1px solid transparent;
border-radius: var(--radius-md);
font-size: var(--font-size-sm);
font-weight: var(--font-weight-medium);
line-height: var(--line-height-base);
cursor: pointer;
user-select: none;
white-space: nowrap;
transition: all var(--transition-base);

&:focus {
outline: none;
}

&:active:not(:disabled):not(.is-disabled) {
transform: scale(0.98);
}

// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ç–∏–ø–∞
&--primary {
color: #fff;
background: var(--color-primary);
border-color: var(--color-primary);

    &:hover:not(:disabled):not(.is-disabled) {
      background: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    &:active:not(:disabled):not(.is-disabled) {
      background: var(--color-primary-active);
      border-color: var(--color-primary-active);
    }

    &:focus {
      box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    }

}

&--secondary {
color: var(--color-text-primary);
background: #fff;
border-color: var(--color-border-base);

    &:hover:not(:disabled):not(.is-disabled) {
      color: var(--color-primary);
      border-color: var(--color-primary);
    }

    &:focus {
      box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.05);
    }

}

&--danger {
color: #fff;
background: var(--color-error);
border-color: var(--color-error);

    &:hover:not(:disabled):not(.is-disabled) {
      background: #ff7875;
      border-color: #ff7875;
    }

    &:focus {
      box-shadow: 0 0 0 2px rgba(255, 77, 79, 0.2);
    }

}

&--link {
color: var(--color-primary);
background: transparent;
border-color: transparent;
padding: 0;

    &:hover:not(:disabled):not(.is-disabled) {
      color: var(--color-primary-hover);
    }

}

// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞–∑–º–µ—Ä–∞
&--sm {
height: 28px;
padding: 2px 12px;
font-size: var(--font-size-xs);
}

&--md {
height: 32px;
padding: 4px 16px;
font-size: var(--font-size-sm);
}

&--lg {
height: 40px;
padding: 8px 24px;
font-size: var(--font-size-md);
}

// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä block
&--block {
width: 100%;
}

// –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä ghost
&--ghost {
background: transparent;

    &.btn--primary {
      color: var(--color-primary);
      border-color: var(--color-primary);

      &:hover:not(:disabled):not(.is-disabled) {
        background: rgba(24, 144, 255, 0.1);
      }
    }

}

// –≠–ª–µ–º–µ–Ω—Ç—ã
&\_\_icon {
display: inline-flex;
font-size: 16px;

    .btn--sm & {
      font-size: 14px;
    }

    .btn--lg & {
      font-size: 18px;
    }

}

&\_\_text {
line-height: 1;
}

&\_\_spinner {
display: inline-flex;
animation: btn-spin 1s linear infinite;
}

@keyframes btn-spin {
from { transform: rotate(0deg); }
to { transform: rotate(360deg); }
}
}

// –°–æ—Å—Ç–æ—è–Ω–∏—è (is-\* –∫–ª–∞—Å—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –í–ú–ï–°–¢–ï —Å .btn)
.btn.is-loading {
pointer-events: none;
opacity: 0.7;
}

.btn.is-disabled,
.btn:disabled {
opacity: 0.5;
cursor: not-allowed;
pointer-events: none;
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 7.2 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ theming)?
–ß–ê–°–¢–¨ 7: STYLING SYSTEM (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
7.2 ng-zorro –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ theming)
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ng-zorro —á–µ—Ä–µ–∑ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –µ–¥–∏–Ω–æ–≥–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∏–ª—è –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è .ant-\* –∫–ª–∞—Å—Å–æ–≤.

7.2.1 ng-zorro CSS Variables Override
// ===== vendors/\_ng-zorro.scss =====

/\*\*

- –ö–†–ò–¢–ò–ß–ù–û:
- - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¢–û–õ–¨–ö–û CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ng-zorro
- - –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º .ant-\* –∫–ª–∞—Å—Å—ã –Ω–∞–ø—Ä—è–º—É—é
- - –í—Å–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–∞—à–∏ –æ–±—ë—Ä—Ç–∫–∏
    \*/

:root {
// ===== PRIMARY COLORS =====
--ant-primary-color: #1890ff;
--ant-primary-color-hover: #40a9ff;
--ant-primary-color-active: #096dd9;
--ant-primary-color-outline: rgba(24, 144, 255, 0.2);

--ant-primary-1: #e6f7ff; // Lightest
--ant-primary-2: #bae7ff;
--ant-primary-3: #91d5ff;
--ant-primary-4: #69c0ff;
--ant-primary-5: #40a9ff;
--ant-primary-6: #1890ff; // Base
--ant-primary-7: #096dd9;
--ant-primary-8: #0050b3;
--ant-primary-9: #003a8c;
--ant-primary-10: #002766; // Darkest

// ===== SUCCESS COLORS =====
--ant-success-color: #52c41a;
--ant-success-color-hover: #73d13d;
--ant-success-color-active: #389e0d;
--ant-success-color-outline: rgba(82, 196, 26, 0.2);

// ===== WARNING COLORS =====
--ant-warning-color: #faad14;
--ant-warning-color-hover: #ffc53d;
--ant-warning-color-active: #d48806;
--ant-warning-color-outline: rgba(250, 173, 20, 0.2);

// ===== ERROR COLORS =====
--ant-error-color: #ff4d4f;
--ant-error-color-hover: #ff7875;
--ant-error-color-active: #d9363e;
--ant-error-color-outline: rgba(255, 77, 79, 0.2);

// ===== INFO COLORS =====
--ant-info-color: #1890ff;
--ant-info-color-hover: #40a9ff;
--ant-info-color-active: #096dd9;

// ===== TEXT COLORS =====
--ant-text-color: #262626;
--ant-text-color-secondary: #8c8c8c;
--ant-text-color-inverse: #fff;
--ant-text-color-dark: rgba(0, 0, 0, 0.85);
--ant-text-color-secondary-dark: rgba(0, 0, 0, 0.45);

// ===== HEADING COLORS =====
--ant-heading-color: #262626;
--ant-heading-color-dark: rgba(0, 0, 0, 0.85);

// ===== BACKGROUND COLORS =====
--ant-background-color-base: #f0f0f0;
--ant-background-color-light: #fafafa;
--ant-component-background: #fff;
--ant-body-background: #fff;
--ant-popover-background: #fff;
--ant-tooltip-bg: #262626;

// ===== BORDER COLORS =====
--ant-border-color-base: #d9d9d9;
--ant-border-color-split: #f0f0f0;
--ant-border-color-inverse: #fff;

// ===== BORDER RADIUS =====
--ant-border-radius-base: 4px;
--ant-border-radius-sm: 2px;
--ant-border-radius-lg: 8px;

// ===== SHADOW =====
--ant-shadow-1-up: 0 -2px 8px rgba(0, 0, 0, 0.09);
--ant-shadow-1-down: 0 2px 8px rgba(0, 0, 0, 0.09);
--ant-shadow-1-left: -2px 0 8px rgba(0, 0, 0, 0.09);
--ant-shadow-1-right: 2px 0 8px rgba(0, 0, 0, 0.09);
--ant-shadow-2: 0 4px 12px rgba(0, 0, 0, 0.15);
--ant-box-shadow-base: 0 2px 8px rgba(0, 0, 0, 0.15);

// ===== FONT =====
--ant-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
'Helvetica Neue', Arial, 'Noto Sans', sans-serif,
'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
--ant-code-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo,
Courier, monospace;

--ant-font-size-base: 14px;
--ant-font-size-lg: 16px;
--ant-font-size-sm: 12px;

--ant-font-weight-base: 400;
--ant-font-weight-bold: 600;

--ant-line-height-base: 1.5;

// ===== SPACING =====
--ant-padding-lg: 24px;
--ant-padding-md: 16px;
--ant-padding-sm: 12px;
--ant-padding-xs: 8px;
--ant-padding-xss: 4px;

--ant-margin-lg: 24px;
--ant-margin-md: 16px;
--ant-margin-sm: 12px;
--ant-margin-xs: 8px;
--ant-margin-xss: 4px;

// ===== HEIGHTS =====
--ant-height-base: 32px;
--ant-height-lg: 40px;
--ant-height-sm: 28px;

// ===== Z-INDEX =====
--ant-zindex-base: 0;
--ant-zindex-popup-base: 1000;
--ant-zindex-affix: 10;
--ant-zindex-back-top: 10;
--ant-zindex-picker-panel: 1050;
--ant-zindex-popup: 1050;
--ant-zindex-dropdown: 1050;
--ant-zindex-picker: 1050;
--ant-zindex-tooltip: 1060;
--ant-zindex-notification: 1010;
--ant-zindex-message: 1010;
--ant-zindex-modal-mask: 1000;
--ant-zindex-modal: 1000;
--ant-zindex-image: 1080;

// ===== ANIMATION =====
--ant-ease-base-out: cubic-bezier(0.7, 0.3, 0.1, 1);
--ant-ease-base-in: cubic-bezier(0.9, 0, 0.3, 0.7);
--ant-ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
--ant-ease-in: cubic-bezier(0.55, 0.055, 0.675, 0.19);
--ant-ease-in-out: cubic-bezier(0.645, 0.045, 0.355, 1);

--ant-animation-duration-slow: 0.3s;
--ant-animation-duration-base: 0.2s;
--ant-animation-duration-fast: 0.1s;

// ===== DISABLED =====
--ant-disabled-color: rgba(0, 0, 0, 0.25);
--ant-disabled-bg: #f5f5f5;
--ant-disabled-color-dark: rgba(0, 0, 0, 0.25);

// ===== LINK =====
--ant-link-color: #1890ff;
--ant-link-hover-color: #40a9ff;
--ant-link-active-color: #096dd9;
--ant-link-decoration: none;
--ant-link-hover-decoration: none;
--ant-link-focus-decoration: none;
--ant-link-focus-outline: 0;
}

/\*\*

- COMPONENT-SPECIFIC OVERRIDES
- –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ö–†–ò–¢–ò–ß–ù–û –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
  \*/

// Table
:root {
--ant-table-header-bg: #fafafa;
--ant-table-header-color: #262626;
--ant-table-header-sort-bg: #f0f0f0;
--ant-table-body-sort-bg: #fafafa;
--ant-table-row-hover-bg: #fafafa;
--ant-table-selected-row-bg: #e6f7ff;
--ant-table-selected-row-hover-bg: #d1edff;
--ant-table-expanded-row-bg: #fbfbfb;
--ant-table-padding-vertical: 16px;
--ant-table-padding-horizontal: 16px;
--ant-table-padding-vertical-md: 12px;
--ant-table-padding-horizontal-md: 8px;
--ant-table-padding-vertical-sm: 8px;
--ant-table-padding-horizontal-sm: 8px;
--ant-table-border-color: #f0f0f0;
--ant-table-border-radius-base: 4px;
--ant-table-footer-bg: #fafafa;
--ant-table-footer-color: #262626;
--ant-table-header-bg-sm: #fafafa;
--ant-table-font-size: 14px;
--ant-table-font-size-md: 14px;
--ant-table-font-size-sm: 14px;
--ant-table-header-cell-split-color: #f0f0f0;
--ant-table-filter-btns-bg: #fff;
--ant-table-filter-dropdown-bg: #fff;
--ant-table-expand-icon-bg: #fff;
--ant-table-selection-column-width: 60px;
--ant-table-sticky-scroll-bar-bg: rgba(0, 0, 0, 0.35);
--ant-table-sticky-scroll-bar-radius: 4px;
}

// Modal
:root {
--ant-modal-header-bg: #fff;
--ant-modal-header-padding: 16px 24px;
--ant-modal-header-border-width: 1px;
--ant-modal-header-border-style: solid;
--ant-modal-header-border-color-split: #f0f0f0;
--ant-modal-header-close-size: 56px;
--ant-modal-content-bg: #fff;
--ant-modal-heading-color: #262626;
--ant-modal-close-color: #8c8c8c;
--ant-modal-footer-bg: transparent;
--ant-modal-footer-border-color-split: #f0f0f0;
--ant-modal-footer-border-style: solid;
--ant-modal-footer-padding-vertical: 10px;
--ant-modal-footer-padding-horizontal: 16px;
--ant-modal-footer-border-width: 1px;
--ant-modal-mask-bg: rgba(0, 0, 0, 0.45);
--ant-modal-confirm-body-padding: 32px 32px 24px;
--ant-modal-confirm-title-font-size: 16px;
--ant-modal-border-radius: 4px;
}

// Input
:root {
--ant-input-height-base: 32px;
--ant-input-height-lg: 40px;
--ant-input-height-sm: 28px;
--ant-input-padding-horizontal: 11px;
--ant-input-padding-horizontal-base: 11px;
--ant-input-padding-horizontal-sm: 7px;
--ant-input-padding-horizontal-lg: 11px;
--ant-input-padding-vertical-base: 4px;
--ant-input-padding-vertical-sm: 1px;
--ant-input-padding-vertical-lg: 6px;
--ant-input-placeholder-color: #bfbfbf;
--ant-input-color: #262626;
--ant-input-icon-color: rgba(0, 0, 0, 0.25);
--ant-input-border-color: #d9d9d9;
--ant-input-bg: #fff;
--ant-input-number-hover-border-color: #40a9ff;
--ant-input-number-handler-active-bg: #f4f4f4;
--ant-input-number-handler-hover-bg: #40a9ff;
--ant-input-number-handler-bg: #fff;
--ant-input-number-handler-border-color: #d9d9d9;
--ant-input-addon-bg: #fafafa;
--ant-input-hover-border-color: #40a9ff;
--ant-input-disabled-bg: #f5f5f5;
--ant-input-outline-offset: 0;
--ant-input-icon-hover-color: rgba(0, 0, 0, 0.85);
--ant-input-disabled-color: rgba(0, 0, 0, 0.25);
}

// Button
:root {
--ant-btn-font-weight: 400;
--ant-btn-border-radius-base: 4px;
--ant-btn-border-radius-sm: 4px;
--ant-btn-border-width: 1px;
--ant-btn-border-style: solid;
--ant-btn-shadow: 0 2px 0 rgba(0, 0, 0, 0.015);
--ant-btn-primary-shadow: 0 2px 0 rgba(0, 0, 0, 0.045);
--ant-btn-text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
--ant-btn-primary-color: #fff;
--ant-btn-primary-bg: #1890ff;
--ant-btn-default-color: #262626;
--ant-btn-default-bg: #fff;
--ant-btn-default-border: #d9d9d9;
--ant-btn-danger-color: #fff;
--ant-btn-danger-bg: #ff4d4f;
--ant-btn-danger-border: #ff4d4f;
--ant-btn-disable-color: rgba(0, 0, 0, 0.25);
--ant-btn-disable-bg: #f5f5f5;
--ant-btn-disable-border: #d9d9d9;
--ant-btn-default-ghost-color: #fff;
--ant-btn-default-ghost-bg: transparent;
--ant-btn-default-ghost-border: #fff;
--ant-btn-font-size-lg: 16px;
--ant-btn-font-size-sm: 14px;
--ant-btn-padding-horizontal-base: 15px;
--ant-btn-padding-horizontal-lg: 15px;
--ant-btn-padding-horizontal-sm: 7px;
--ant-btn-height-base: 32px;
--ant-btn-height-lg: 40px;
--ant-btn-height-sm: 24px;
--ant-btn-line-height: 1.5;
--ant-btn-circle-size: 32px;
--ant-btn-circle-size-lg: 40px;
--ant-btn-circle-size-sm: 24px;
--ant-btn-square-size: 32px;
--ant-btn-square-size-lg: 40px;
--ant-btn-square-size-sm: 24px;
--ant-btn-square-only-icon-size: 16px;
--ant-btn-square-only-icon-size-sm: 14px;
--ant-btn-square-only-icon-size-lg: 18px;
--ant-btn-group-border: #40a9ff;
--ant-btn-link-hover-bg: transparent;
--ant-btn-text-hover-bg: rgba(0, 0, 0, 0.018);
}

// Alert
:root {
--ant-alert-success-border-color: #b7eb8f;
--ant-alert-success-bg-color: #f6ffed;
--ant-alert-success-icon-color: #52c41a;
--ant-alert-info-border-color: #91d5ff;
--ant-alert-info-bg-color: #e6f7ff;
--ant-alert-info-icon-color: #1890ff;
--ant-alert-warning-border-color: #ffe58f;
--ant-alert-warning-bg-color: #fffbe6;
--ant-alert-warning-icon-color: #faad14;
--ant-alert-error-border-color: #ffccc7;
--ant-alert-error-bg-color: #fff2f0;
--ant-alert-error-icon-color: #ff4d4f;
--ant-alert-message-color: #262626;
--ant-alert-text-color: #262626;
--ant-alert-close-color: #8c8c8c;
--ant-alert-close-hover-color: rgba(0, 0, 0, 0.75);
--ant-alert-no-icon-padding-vertical: 8px;
--ant-alert-with-description-no-icon-padding-vertical: 15px;
--ant-alert-with-description-padding-vertical: 15px;
--ant-alert-with-description-padding: 15px 15px 15px 64px;
--ant-alert-icon-top: 8px;
--ant-alert-with-description-icon-size: 24px;
}

// Message
:root {
--ant-message-notice-content-padding: 10px 16px;
--ant-message-notice-content-bg: #fff;
}

// Notification
:root {
--ant-notification-bg: #fff;
--ant-notification-padding-vertical: 16px;
--ant-notification-padding-horizontal: 24px;
--ant-notification-padding: 16px 24px;
--ant-notification-margin-bottom: 16px;
--ant-notification-margin-edge: 24px;
}

7.2.2 Dark Mode Support (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
// ===== vendors/\_ng-zorro-dark.scss =====

/\*\*

- Dark Mode –¥–ª—è ng-zorro
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ data-theme="dark" –Ω–∞ <html>
  \*/

[data-theme='dark'] {
// ===== PRIMARY COLORS (–Ω–µ –º–µ–Ω—è—é—Ç—Å—è) =====
--ant-primary-color: #1890ff;
--ant-primary-color-hover: #40a9ff;
--ant-primary-color-active: #096dd9;

// ===== TEXT COLORS =====
--ant-text-color: rgba(255, 255, 255, 0.85);
--ant-text-color-secondary: rgba(255, 255, 255, 0.45);
--ant-text-color-inverse: #262626;
--ant-heading-color: rgba(255, 255, 255, 0.85);

// ===== BACKGROUND COLORS =====
--ant-background-color-base: #1f1f1f;
--ant-background-color-light: #141414;
--ant-component-background: #1f1f1f;
--ant-body-background: #000;
--ant-popover-background: #1f1f1f;
--ant-tooltip-bg: rgba(255, 255, 255, 0.85);

// ===== BORDER COLORS =====
--ant-border-color-base: #434343;
--ant-border-color-split: #303030;

// ===== DISABLED =====
--ant-disabled-color: rgba(255, 255, 255, 0.25);
--ant-disabled-bg: rgba(255, 255, 255, 0.08);

// ===== TABLE =====
--ant-table-header-bg: #1f1f1f;
--ant-table-header-color: rgba(255, 255, 255, 0.85);
--ant-table-row-hover-bg: #262626;
--ant-table-selected-row-bg: #111b26;
--ant-table-footer-bg: #1f1f1f;
--ant-table-border-color: #303030;

// ===== MODAL =====
--ant-modal-header-bg: #1f1f1f;
--ant-modal-content-bg: #1f1f1f;
--ant-modal-mask-bg: rgba(0, 0, 0, 0.65);

// ===== INPUT =====
--ant-input-bg: transparent;
--ant-input-border-color: #434343;
--ant-input-placeholder-color: rgba(255, 255, 255, 0.3);
--ant-input-disabled-bg: rgba(255, 255, 255, 0.08);
--ant-input-addon-bg: #303030;

// ===== BUTTON =====
--ant-btn-default-color: rgba(255, 255, 255, 0.85);
--ant-btn-default-bg: transparent;
--ant-btn-default-border: #434343;
--ant-btn-disable-color: rgba(255, 255, 255, 0.25);
--ant-btn-disable-bg: rgba(255, 255, 255, 0.08);
--ant-btn-disable-border: #434343;
}

7.2.3 Theming Service
// ===== THEMING SERVICE =====

export type Theme = 'light' | 'dark';

@Injectable({ providedIn: 'root' })
export class ThemeService {
private readonly storageKey = 'app-theme';
private readonly themeSubject = new BehaviorSubject<Theme>('light');

theme$ = this.themeSubject.asObservable();

constructor() {
this.loadTheme();
}

/\*\*

- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É
  \*/
  setTheme(theme: Theme) {
  this.themeSubject.next(theme);
  this.applyTheme(theme);
  this.saveTheme(theme);
  }

/\*\*

- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É
  \*/
  toggleTheme() {
  const current = this.themeSubject.value;
  const newTheme = current === 'light' ? 'dark' : 'light';
  this.setTheme(newTheme);
  }

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ç–µ–º—É
  \*/
  getCurrentTheme(): Theme {
  return this.themeSubject.value;
  }

/\*\*

- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–µ–º—É –∏–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
  \*/
  detectSystemTheme(): Theme {
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
  return 'dark';
  }
  return 'light';
  }

/\*\*

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é —Ç–µ–º—É
  \*/
  useSystemTheme() {
  const systemTheme = this.detectSystemTheme();
  this.setTheme(systemTheme);


    // –°–ª—É—à–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
    window.matchMedia('(prefers-color-scheme: dark)')
      .addEventListener('change', (e) => {
        const newTheme = e.matches ? 'dark' : 'light';
        this.setTheme(newTheme);
      });

}

private loadTheme() {
const saved = localStorage.getItem(this.storageKey) as Theme;
if (saved && (saved === 'light' || saved === 'dark')) {
this.setTheme(saved);
} else {
// –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é light
this.setTheme('light');
}
}

private saveTheme(theme: Theme) {
localStorage.setItem(this.storageKey, theme);
}

private applyTheme(theme: Theme) {
const html = document.documentElement;

    if (theme === 'dark') {
      html.setAttribute('data-theme', 'dark');
      html.classList.add('dark-theme');
      html.classList.remove('light-theme');
    } else {
      html.setAttribute('data-theme', 'light');
      html.classList.add('light-theme');
      html.classList.remove('dark-theme');
    }

}
}

// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï =====

@Component({
selector: 'app-theme-switcher',
standalone: true,
imports: [CommonModule],
template: `    <button
      class="theme-toggle"
      (click)="toggleTheme()"
      [attr.aria-label]="currentTheme() === 'dark' ? '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞' : '–¢—ë–º–Ω–∞—è —Ç–µ–º–∞'"
    >
      @if (currentTheme() === 'dark') {
        <app-icon iconKey="icon-sun"></app-icon>
      } @else {
        <app-icon iconKey="icon-moon"></app-icon>
      }
    </button>
 `,
styles: [`
.theme-toggle {
width: 40px;
height: 40px;
border: none;
background: transparent;
cursor: pointer;
border-radius: var(--radius-md);
transition: background var(--transition-base);

      &:hover {
        background: var(--color-bg-light);
      }

      app-icon {
        font-size: 20px;
        color: var(--color-text-primary);
      }
    }

`]
})
export class ThemeSwitcherComponent {
private readonly themeService = inject(ThemeService);

currentTheme = toSignal(this.themeService.theme$, {
initialValue: 'light'
});

toggleTheme() {
this.themeService.toggleTheme();
}
}

7.3 Responsive Design
7.3.1 Breakpoints
// ===== abstracts/\_breakpoints.scss =====

/\*\*

- BREAKPOINTS
- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–æ—á–µ–∫ –ø–µ—Ä–µ–ª–æ–º–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞
  \*/

$breakpoints: (
'mobile-sm': 320px, // –ú–∞–ª–µ–Ω—å–∫–∏–π –º–æ–±–∏–ª—å–Ω—ã–π
'mobile': 480px, // –ú–æ–±–∏–ª—å–Ω—ã–π
'tablet-sm': 640px, // –ú–∞–ª–µ–Ω—å–∫–∏–π –ø–ª–∞–Ω—à–µ—Ç
'tablet': 768px, // –ü–ª–∞–Ω—à–µ—Ç
'tablet-lg': 1024px, // –ë–æ–ª—å—à–æ–π –ø–ª–∞–Ω—à–µ—Ç
'desktop': 1280px, // –î–µ—Å–∫—Ç–æ–ø
'desktop-lg': 1440px, // –ë–æ–ª—å—à–æ–π –¥–µ—Å–∫—Ç–æ–ø
'desktop-xl': 1920px // Extra large
);

/\*\*

- MIXINS –¥–ª—è –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å–æ–≤
  \*/

// Min-width (mobile-first approach)
@mixin media-min($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint #{$breakpoint} not found";
}
}

// Max-width
@mixin media-max($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (max-width: (map-get($breakpoints, $breakpoint) - 1px)) {
      @content;
    }
  } @else {
    @warn "Breakpoint #{$breakpoint} not found";
}
}

// Between
@mixin media-between($min, $max) {
  @if map-has-key($breakpoints, $min) and map-has-key($breakpoints, $max) {
    @media (min-width: map-get($breakpoints, $min)) and
           (max-width: (map-get($breakpoints, $max) - 1px)) {
      @content;
    }
  } @else {
    @warn "Breakpoints #{$min} or #{$max} not found";
}
}

// Shortcuts
@mixin mobile {
@include media-max('tablet') {
@content;
}
}

@mixin tablet {
@include media-between('tablet', 'desktop') {
@content;
}
}

@mixin desktop {
@include media-min('desktop') {
@content;
}
}

// ===== –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø =====

.admin-layout {
display: grid;
grid-template-columns: 240px 1fr 320px;

@include media-max('desktop') {
grid-template-columns: 64px 1fr 320px;
}

@include media-max('tablet') {
grid-template-columns: 1fr;
}
}

.page-header {
padding: var(--spacing-lg);

@include mobile {
padding: var(--spacing-md);
}
}

.data-table {
font-size: var(--font-size-sm);

@include media-max('mobile') {
font-size: var(--font-size-xs);

    // –°–∫—Ä—ã—Ç—å –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
    .table-col--optional {
      display: none;
    }

}
}

7.3.2 Container Queries (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥)
// ===== abstracts/\_container-queries.scss =====

/\*\*

- Container Queries –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ media queries
  \*/

// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
.page-body {
container-type: inline-size;
container-name: page-body;
}

.sidebar {
container-type: inline-size;
container-name: sidebar;
}

// Container query mixins
@mixin container($name, $min-width) {
  @container #{$name} (min-width: #{$min-width}) {
@content;
}
}

// ===== –ü–†–ò–ú–ï–†–´ =====

.user-card {
display: flex;
flex-direction: column;
gap: var(--spacing-md);

// –ö–æ–≥–¥–∞ page-body —à–∏—Ä–µ 600px
@container page-body (min-width: 600px) {
flex-direction: row;
align-items: center;
}

// –ö–æ–≥–¥–∞ page-body —à–∏—Ä–µ 900px
@container page-body (min-width: 900px) {
&\_\_avatar {
width: 80px;
height: 80px;
}
}
}

.sidebar-widget {
padding: var(--spacing-sm);

@container sidebar (min-width: 240px) {
padding: var(--spacing-md);
}

@container sidebar (min-width: 320px) {
padding: var(--spacing-lg);

    &__title {
      font-size: var(--font-size-lg);
    }

}
}

7.3.3 Responsive Utilities
// ===== utilities/\_responsive.scss =====

/\*\*

- Responsive utility classes
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö
  \*/

// Hide on mobile
.hide-mobile {
@include mobile {
display: none !important;
}
}

// Hide on tablet
.hide-tablet {
@include tablet {
display: none !important;
}
}

// Hide on desktop
.hide-desktop {
@include desktop {
display: none !important;
}
}

// Show only on mobile
.show-mobile-only {
display: none !important;

@include mobile {
display: block !important;
}
}

// Show only on tablet
.show-tablet-only {
display: none !important;

@include tablet {
display: block !important;
}
}

// Show only on desktop
.show-desktop-only {
display: none !important;

@include desktop {
display: block !important;
}
}

// Responsive text alignment
.text-center-mobile {
@include mobile {
text-align: center !important;
}
}

.text-left-desktop {
@include desktop {
text-align: left !important;
}
}

// Responsive spacing
.p-mobile-sm {
@include mobile {
padding: var(--spacing-sm) !important;
}
}

.p-desktop-lg {
@include desktop {
padding: var(--spacing-lg) !important;
}
}

7.3.4 Responsive Typography
// ===== base/\_typography-responsive.scss =====

/\*\*

- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞
- –†–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è –ø–æ —ç–∫—Ä–∞–Ω–∞–º
  \*/

// Fluid typography function
@function fluid-type($min-vw, $max-vw, $min-font-size, $max-font-size) {
  $u1: unit($min-vw);
$u2: unit($max-vw);
$u3: unit($min-font-size);
$u4: unit($max-font-size);

@if $u1 == $u2 and $u1 == $u3 and $u1 == $u4 {
    @return calc(
      #{$min-font-size} +
#{strip-unit($max-font-size - $min-font-size)} *
      ((100vw - #{$min-vw}) / #{strip-unit($max-vw - $min-vw)})
);
}
}

@function strip-unit($value) {
  @return $value / ($value \* 0 + 1);
}

// –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º
h1 {
font-size: fluid-type(320px, 1920px, 24px, 48px);
}

h2 {
font-size: fluid-type(320px, 1920px, 20px, 32px);
}

h3 {
font-size: fluid-type(320px, 1920px, 18px, 24px);
}

// –ò–ª–∏ —á–µ—Ä–µ–∑ –∫–ª–∞–º–ø—ã (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥)
h1 {
font-size: clamp(24px, 5vw, 48px);
}

h2 {
font-size: clamp(20px, 4vw, 32px);
}

h3 {
font-size: clamp(18px, 3vw, 24px);
}

// –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ line-height
p {
line-height: 1.8;

@include mobile {
line-height: 1.6;
}
}

7.3.5 Print Styles
// ===== utilities/\_print.scss =====

/\*\*

- –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—á–∞—Ç–∏
  \*/

@media print {
// –°–∫—Ä—ã—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
.admin-header,
.left-sidebar,
.right-panel,
.admin-footer,
.global-status-bar,
.page-footer {
display: none !important;
}

// –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
.admin-main {
width: 100% !important;
margin: 0 !important;
padding: 0 !important;
}

// –£–±—Ä–∞—Ç—å —Ç–µ–Ω–∏ –∏ —Å–∫—Ä—É–≥–ª–µ–Ω–∏—è

- {
  box-shadow: none !important;
  border-radius: 0 !important;
  }

// –ß–µ—Ä–Ω–æ-–±–µ–ª—ã–µ —Ü–≤–µ—Ç–∞
body {
color: #000;
background: #fff;
}

// –ü–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫–∏
a[href]:after {
content: " (" attr(href) ")";
font-size: 0.8em;
color: #666;
}

// –†–∞–∑—Ä—ã–≤—ã —Å—Ç—Ä–∞–Ω–∏—Ü
h1, h2, h3 {
page-break-after: avoid;
}

table {
page-break-inside: avoid;
}

// –£–±—Ä–∞—Ç—å —Ñ–æ–Ω—ã
.table-panel,
.form-group,
.status {
background: transparent !important;
border: 1px solid #000 !important;
}
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ß–ê–°–¢–¨ 8: ANGULAR IMPLEMENTATION (–¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞)?
–ß–ê–°–¢–¨ 8: ANGULAR IMPLEMENTATION
8.1 –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
Layer-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –∏ —á—ë—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
src/
‚îú‚îÄ‚îÄ app/
‚îÇ ‚îú‚îÄ‚îÄ core/ # Core Layer (Singleton services)
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ models/ # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ context.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-registry.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ command.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ event.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ icon.model.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ services/ # Core —Å–µ—Ä–≤–∏—Å—ã
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ context/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ context.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ context.service.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-registry/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-registry.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ error-registry.service.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ event-bus/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ event-bus.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ event-bus.service.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ command/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ command.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ command-registry.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ command.service.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ icon-provider/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ icon-provider.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ icon-provider.service.spec.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ guards/ # Route guards
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ auth.guard.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ permission.guard.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ unsaved-changes.guard.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ interceptors/ # HTTP Interceptors
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ auth.interceptor.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ http-error.interceptor.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ loading.interceptor.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ initializers/ # APP_INITIALIZER
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ app.initializer.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ commands.initializer.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts # Public API
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ shell/ # Shell Layer (Layout components)
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ components/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-layout/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-layout.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-layout.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-layout.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ admin-layout.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ header/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-header.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-header.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-header.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ admin-header.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ left-sidebar/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ left-sidebar.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ left-sidebar.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ left-sidebar.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ left-sidebar.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ left-sidebar.config.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ right-panel/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ right-panel.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ right-panel.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ right-panel.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ right-panel.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ panels/ # Panel implementations
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ actions-panel.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ errors-panel.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ history-panel.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ info-panel.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ footer/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-footer.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-footer.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ admin-footer.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ admin-footer.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ global-status-bar/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ global-status-bar.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ global-status-bar.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ global-status-bar.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ global-status-bar.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-status-bar/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-status-bar.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-status-bar.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-status-bar.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ form-status-bar.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ error-block/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-block.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-block.component.html
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-block.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-block.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ error-item.component.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts # Public API
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ shared/ # Shared Layer
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ components/ # Reusable UI components
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ buttons/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ button.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ button-group.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ forms/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-group.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ form-field.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ input.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ select.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ tables/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ table.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ pagination.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ modals/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ modal.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-modal-content.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ status/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ badge.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ status.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ progress.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ feedback/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ skeleton.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ empty-state.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ spinner.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ alert.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ grid/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ grid-row.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ grid-col.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ page-shell/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ page-shell.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ page-shell.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ page-shell.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ icon/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ icon.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ directives/ # –î–∏—Ä–µ–∫—Ç–∏–≤—ã
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ tooltip.directive.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ click-outside.directive.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ pipes/ # Pipes
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ safe-html.pipe.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ date-format.pipe.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ file-size.pipe.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ utils/ # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ date.utils.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ string.utils.ts
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ validation.utils.ts
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ infrastructures/ # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ interceptor/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ models/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ error-response.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ services/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ error-handling.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ http-error.interceptor.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ logging/
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ logging.service.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts # Public API
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ features/ # Feature Modules
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users/
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ pages/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users-list/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users-list.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users-list.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users-list.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ users-list.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-form/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-form.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-form.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-form.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user-form.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user-detail/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-detail.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-detail.component.html
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-detail.component.scss
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user-detail.component.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ components/ # Feature components
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user-avatar.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user-role-badge.component.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ services/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user.service.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user.service.spec.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ models/
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ user.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ user-filter.model.ts
‚îÇ ‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ users.routes.ts # Feature routes
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ index.ts
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ roles/
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ... # Similar structure
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ settings/
‚îÇ ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ...
‚îÇ ‚îÇ ‚îÇ
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ dashboard/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ...
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ app.component.ts # Root component
‚îÇ ‚îú‚îÄ‚îÄ app.component.html
‚îÇ ‚îú‚îÄ‚îÄ app.component.scss
‚îÇ ‚îú‚îÄ‚îÄ app.config.ts # App configuration
‚îÇ ‚îî‚îÄ‚îÄ app.routes.ts # Root routes
‚îÇ
‚îú‚îÄ‚îÄ assets/ # Static assets
‚îÇ ‚îú‚îÄ‚îÄ icons/ # SVG icons
‚îÇ ‚îú‚îÄ‚îÄ images/ # Images
‚îÇ ‚îî‚îÄ‚îÄ i18n/ # Translations
‚îÇ
‚îú‚îÄ‚îÄ styles/ # Global styles
‚îÇ ‚îú‚îÄ‚îÄ abstracts/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_variables.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_mixins.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_functions.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_breakpoints.scss
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ base/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_reset.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_typography.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_typography-responsive.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_global.scss
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ components/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_buttons.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_forms.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_tables.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_modals.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_alerts.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ ...
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ layout/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_header.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_sidebar.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_footer.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_grid.scss
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ states/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_states.scss
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ utilities/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_helpers.scss
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_responsive.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_print.scss
‚îÇ ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ vendors/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ \_ng-zorro.scss
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ \_ng-zorro-dark.scss
‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ main.scss # Main entry point
‚îÇ
‚îú‚îÄ‚îÄ environments/
‚îÇ ‚îú‚îÄ‚îÄ environment.ts # Development
‚îÇ ‚îî‚îÄ‚îÄ environment.prod.ts # Production
‚îÇ
‚îî‚îÄ‚îÄ index.html

8.2 App Configuration (Angular 19 Standalone)
8.2.1 app.config.ts
// ===== app.config.ts =====

import { ApplicationConfig, importProvidersFrom, provideZoneChangeDetection } from '@angular/core';
import { provideRouter, withComponentInputBinding, withInMemoryScrolling } from '@angular/router';
import { provideHttpClient, withInterceptors } from '@angular/common/http';
import { provideAnimations } from '@angular/platform-browser/animations';
import { routes } from './app.routes';

// ng-zorro
import { provideNzConfig } from 'ng-zorro-antd/core/config';
import { provideNzIcons } from 'ng-zorro-antd/icon';
import { IconDefinition } from '@ant-design/icons-angular';
import \* as AllIcons from '@ant-design/icons-angular/icons';

// Core services
import { ContextService } from './core/services/context/context.service';
import { ErrorRegistry } from './core/services/error-registry/error-registry.service';
import { EventBus } from './core/services/event-bus/event-bus.service';
import { CommandService } from './core/services/command/command.service';
import { IconProvider } from './core/services/icon-provider/icon-provider.service';

// Interceptors
import { authInterceptor } from './core/interceptors/auth.interceptor';
import { httpErrorInterceptor } from './core/interceptors/http-error.interceptor';
import { loadingInterceptor } from './core/interceptors/loading.interceptor';

// Initializers
import { appInitializer } from './core/initializers/app.initializer';
import { commandsInitializer } from './core/initializers/commands.initializer';

// Icons registration
const antDesignIcons = AllIcons as { [key: string]: IconDefinition };
const icons: IconDefinition[] = Object.keys(antDesignIcons).map(
key => antDesignIcons[key]
);

export const appConfig: ApplicationConfig = {
providers: [
// Zone.js optimization
provideZoneChangeDetection({ eventCoalescing: true }),

    // Router
    provideRouter(
      routes,
      withComponentInputBinding(),
      withInMemoryScrolling({
        scrollPositionRestoration: 'enabled',
        anchorScrolling: 'enabled'
      })
    ),

    // HTTP Client with interceptors
    provideHttpClient(
      withInterceptors([
        authInterceptor,
        httpErrorInterceptor,
        loadingInterceptor
      ])
    ),

    // Animations
    provideAnimations(),

    // ng-zorro configuration
    provideNzConfig({
      message: { nzTop: 24, nzDuration: 5000 },
      notification: { nzTop: 24, nzDuration: 4500 },
      modal: { nzMaskClosable: false }
    }),

    // ng-zorro icons
    provideNzIcons(icons),

    // Core services (singleton)
    ContextService,
    ErrorRegistry,
    EventBus,
    CommandService,
    IconProvider,

    // App initializers
    {
      provide: APP_INITIALIZER,
      useFactory: appInitializer,
      multi: true,
      deps: [ContextService, ErrorRegistry, IconProvider]
    },
    {
      provide: APP_INITIALIZER,
      useFactory: commandsInitializer,
      multi: true,
      deps: [CommandService, HttpClient]
    }

]
};

8.2.2 app.routes.ts
// ===== app.routes.ts =====

import { Routes } from '@angular/router';
import { authGuard } from './core/guards/auth.guard';
import { permissionGuard } from './core/guards/permission.guard';
import { unsavedChangesGuard } from './core/guards/unsaved-changes.guard';

export const routes: Routes = [
// Redirect root to dashboard
{
path: '',
redirectTo: 'admin/dashboard',
pathMatch: 'full'
},

// Admin layout (shell)
{
path: 'admin',
loadComponent: () =>
import('./shell/components/admin-layout/admin-layout.component')
.then(m => m.AdminLayoutComponent),
canActivate: [authGuard],
children: [
// Dashboard
{
path: 'dashboard',
loadComponent: () =>
import('./features/dashboard/pages/dashboard/dashboard.component')
.then(m => m.DashboardComponent),
data: {
title: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
breadcrumb: 'Dashboard'
}
},

      // Users feature
      {
        path: 'users',
        loadChildren: () =>
          import('./features/users/users.routes')
            .then(m => m.USERS_ROUTES),
        data: {
          permission: 'users.read'
        },
        canActivate: [permissionGuard]
      },

      // Roles feature
      {
        path: 'roles',
        loadChildren: () =>
          import('./features/roles/roles.routes')
            .then(m => m.ROLES_ROUTES),
        data: {
          permission: 'roles.read'
        },
        canActivate: [permissionGuard]
      },

      // Settings feature
      {
        path: 'settings',
        loadChildren: () =>
          import('./features/settings/settings.routes')
            .then(m => m.SETTINGS_ROUTES),
        data: {
          permission: 'settings.read'
        },
        canActivate: [permissionGuard]
      }
    ]

},

// Auth routes (outside admin layout)
{
path: 'auth',
loadChildren: () =>
import('./features/auth/auth.routes')
.then(m => m.AUTH_ROUTES)
},

// Error pages
{
path: '404',
loadComponent: () =>
import('./features/errors/pages/not-found/not-found.component')
.then(m => m.NotFoundComponent)
},
{
path: '403',
loadComponent: () =>
import('./features/errors/pages/forbidden/forbidden.component')
.then(m => m.ForbiddenComponent)
},
{
path: '500',
loadComponent: () =>
import('./features/errors/pages/server-error/server-error.component')
.then(m => m.ServerErrorComponent)
},

// Wildcard (404)
{
path: '\*\*',
redirectTo: '404'
}
];

8.2.3 Feature Routes Example (users.routes.ts)
// ===== features/users/users.routes.ts =====

import { Routes } from '@angular/router';
import { unsavedChangesGuard } from '../../core/guards/unsaved-changes.guard';
import { permissionGuard } from '../../core/guards/permission.guard';

export const USERS_ROUTES: Routes = [
// Users list
{
path: '',
loadComponent: () =>
import('./pages/users-list/users-list.component')
.then(m => m.UsersListComponent),
data: {
title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
breadcrumb: 'Users'
}
},

// Create user
{
path: 'create',
loadComponent: () =>
import('./pages/user-form/user-form.component')
.then(m => m.UserFormComponent),
canDeactivate: [unsavedChangesGuard],
data: {
title: '–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
breadcrumb: 'Create',
permission: 'users.create'
},
canActivate: [permissionGuard]
},

// Edit user
{
path: ':id/edit',
loadComponent: () =>
import('./pages/user-form/user-form.component')
.then(m => m.UserFormComponent),
canDeactivate: [unsavedChangesGuard],
data: {
title: '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
breadcrumb: 'Edit',
permission: 'users.update'
},
canActivate: [permissionGuard]
},

// User detail
{
path: ':id',
loadComponent: () =>
import('./pages/user-detail/user-detail.component')
.then(m => m.UserDetailComponent),
data: {
title: '–î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
breadcrumb: 'Detail'
}
}
];

8.3 Guards
8.3.1 Auth Guard
// ===== core/guards/auth.guard.ts =====

import { inject } from '@angular/core';
import { Router, CanActivateFn } from '@angular/router';
import { AuthService } from '../services/auth/auth.service';

export const authGuard: CanActivateFn = (route, state) => {
const authService = inject(AuthService);
const router = inject(Router);

if (authService.isAuthenticated()) {
return true;
}

// Redirect to login with return URL
return router.createUrlTree(['/auth/login'], {
queryParams: { returnUrl: state.url }
});
};

8.3.2 Permission Guard
// ===== core/guards/permission.guard.ts =====

import { inject } from '@angular/core';
import { Router, CanActivateFn } from '@angular/router';
import { ContextService } from '../services/context/context.service';

export const permissionGuard: CanActivateFn = (route, state) => {
const contextService = inject(ContextService);
const router = inject(Router);

const requiredPermission = route.data['permission'] as string | undefined;

if (!requiredPermission) {
// No permission required
return true;
}

if (contextService.hasPermission(requiredPermission)) {
return true;
}

// Redirect to 403
return router.createUrlTree(['/403']);
};

8.3.3 Unsaved Changes Guard
// ===== core/guards/unsaved-changes.guard.ts =====

import { inject } from '@angular/core';
import { CanDeactivateFn } from '@angular/router';
import { Observable } from 'rxjs';
import { ModalService } from '../../shared/components/modals/modal.service';

export interface CanComponentDeactivate {
canDeactivate: () => boolean | Observable<boolean> | Promise<boolean>;
}

export const unsavedChangesGuard: CanDeactivateFn<CanComponentDeactivate> = (
component
) => {
const modalService = inject(ModalService);

if (!component.canDeactivate) {
return true;
}

const canDeactivate = component.canDeactivate();

if (canDeactivate === true) {
return true;
}

if (canDeactivate === false) {
// Show confirmation modal
return new Promise<boolean>((resolve) => {
modalService.confirm({
title: '–ù–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è',
content: '–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É?',
footer: {
okText: '–ü–æ–∫–∏–Ω—É—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É',
cancelText: '–û—Å—Ç–∞—Ç—å—Å—è'
},
onOk: () => resolve(true),
onCancel: () => resolve(false)
});
});
}

return canDeactivate;
};

// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í –ö–û–ú–ü–û–ù–ï–ù–¢–ï =====

@Component({
selector: 'app-user-form'
})
export class UserFormComponent implements CanComponentDeactivate {
form!: FormGroup;

canDeactivate(): boolean {
// Return true if form is pristine (no changes)
// Return false if form is dirty (has changes)
return !this.form.dirty;
}
}

8.4 Interceptors
8.4.1 Auth Interceptor
// ===== core/interceptors/auth.interceptor.ts =====

import { HttpInterceptorFn } from '@angular/common/http';
import { inject } from '@angular/core';
import { AuthService } from '../services/auth/auth.service';

export const authInterceptor: HttpInterceptorFn = (req, next) => {
const authService = inject(AuthService);

// Get token
const token = authService.getToken();

if (!token) {
return next(req);
}

// Clone request and add Authorization header
const authReq = req.clone({
setHeaders: {
Authorization: `Bearer ${token}`
}
});

return next(authReq);
};

8.4.2 Loading Interceptor
// ===== core/interceptors/loading.interceptor.ts =====

import { HttpInterceptorFn } from '@angular/common/http';
import { inject } from '@angular/core';
import { finalize } from 'rxjs/operators';
import { LoadingService } from '../services/loading/loading.service';

export const loadingInterceptor: HttpInterceptorFn = (req, next) => {
const loadingService = inject(LoadingService);

// Skip loading for certain requests
if (req.headers.has('X-Skip-Loading')) {
return next(req.clone({
headers: req.headers.delete('X-Skip-Loading')
}));
}

// Show loading
loadingService.show();

return next(req).pipe(
finalize(() => {
loadingService.hide();
})
);
};

// ===== LOADING SERVICE =====

@Injectable({ providedIn: 'root' })
export class LoadingService {
private loadingSubject = new BehaviorSubject<boolean>(false);
loading$ = this.loadingSubject.asObservable();

private activeRequests = 0;

show() {
this.activeRequests++;
if (this.activeRequests === 1) {
this.loadingSubject.next(true);
}
}

hide() {
this.activeRequests--;
if (this.activeRequests <= 0) {
this.activeRequests = 0;
this.loadingSubject.next(false);
}
}

reset() {
this.activeRequests = 0;
this.loadingSubject.next(false);
}
}

8.5 Initializers
8.5.1 App Initializer
// ===== core/initializers/app.initializer.ts =====

import { ContextService } from '../services/context/context.service';
import { ErrorRegistry } from '../services/error-registry/error-registry.service';
import { IconProvider } from '../services/icon-provider/icon-provider.service';

export function appInitializer(
contextService: ContextService,
errorRegistry: ErrorRegistry,
iconProvider: IconProvider
) {
return () => {
return new Promise<void>((resolve) => {
// Initialize Context
contextService.setContext({
activeArea: {
type: 'dashboard',
entityId: 'main',
mode: 'view'
},
dataState: {
dirty: false,
valid: true,
loading: false
},
operationalState: {
healthy: true,
backendAvailable: true,
globalReadOnly: false,
locks: [],
backgroundTasks: []
},
permissions: {
user: {
id: '',
name: '',
email: '',
roles: []
},
global: [],
entity: {
entityName: 'main',
operations: {
read: false,
create: false,
update: false,
delete: false,
export: false
}
}
},
metadata: {
version: 1,
createdAt: new Date(),
updatedAt: new Date()
}
});

      // Icon Provider —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
      console.log('[App Initializer] Application initialized');

      resolve();
    });

};
}

8.5.2 Commands Initializer
// ===== core/initializers/commands.initializer.ts =====

import { HttpClient } from '@angular/common/http';
import { CommandService } from '../services/command/command.service';

export function commandsInitializer(
commandService: CommandService,
http: HttpClient
) {
return () => {
return new Promise<void>((resolve) => {
// Register global commands

      // Save command
      commandService.register('save', (payload, context) => {
        const url = `/api/${context.activeArea.entityId}`;
        const method = context.activeArea.recordId ? 'PUT' : 'POST';

        if (method === 'PUT') {
          return http.put(`${url}/${context.activeArea.recordId}`, payload);
        }
        return http.post(url, payload);
      });

      // Delete command
      commandService.register('delete', (payload: { id: string }, context) => {
        const url = `/api/${context.activeArea.entityId}/${payload.id}`;
        return http.delete(url);
      });

      // Refresh command
      commandService.register('refresh', (payload, context) => {
        const url = `/api/${context.activeArea.entityId}`;
        return http.get(url);
      });

      // Export command
      commandService.register('export', (payload: { format: string }, context) => {
        const url = `/api/${context.activeArea.entityId}/export`;
        return http.post(url, payload, {
          responseType: 'blob'
        });
      });

      console.log('[Commands Initializer] Commands registered');

      resolve();
    });

};
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å 8.6 Environment Configuration?
–ß–ê–°–¢–¨ 8: ANGULAR IMPLEMENTATION (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
8.6 Environment Configuration
8.6.1 Environment Files
// ===== environments/environment.ts (Development) =====

export const environment = {
production: false,

// API Configuration
api: {
baseUrl: 'http://localhost:3000/api',
timeout: 30000, // 30 seconds
retryAttempts: 3,
retryDelay: 1000 // 1 second
},

// Authentication
auth: {
tokenKey: 'auth_token',
refreshTokenKey: 'refresh_token',
tokenExpiry: 3600, // 1 hour in seconds
autoRefresh: true
},

// Feature Flags
features: {
enableDarkMode: true,
enableDebugMode: true,
enableErrorReporting: false,
enableAnalytics: false,
enableWebSockets: false,
enableOfflineMode: false
},

// Logging
logging: {
level: 'debug', // 'error' | 'warn' | 'info' | 'debug'
enableConsole: true,
enableRemote: false,
remoteUrl: ''
},

// Error Handling
errorHandling: {
showDetailedErrors: true,
reportToServer: false,
serverErrorUrl: ''
},

// UI Configuration
ui: {
defaultPageSize: 20,
pageSizeOptions: [10, 20, 50, 100],
toastDuration: 5000,
modalWidth: 600,
tableScrollHeight: 600
},

// Cache
cache: {
enabled: true,
ttl: 300000, // 5 minutes
maxSize: 100
},

// External Services
external: {
googleMapsApiKey: '',
sentryDsn: '',
mixpanelToken: ''
}
};

// ===== environments/environment.prod.ts (Production) =====

export const environment = {
production: true,

api: {
baseUrl: 'https://api.example.com/api',
timeout: 30000,
retryAttempts: 3,
retryDelay: 2000
},

auth: {
tokenKey: 'auth_token',
refreshTokenKey: 'refresh_token',
tokenExpiry: 3600,
autoRefresh: true
},

features: {
enableDarkMode: true,
enableDebugMode: false,
enableErrorReporting: true,
enableAnalytics: true,
enableWebSockets: true,
enableOfflineMode: true
},

logging: {
level: 'error',
enableConsole: false,
enableRemote: true,
remoteUrl: 'https://logging.example.com/api/logs'
},

errorHandling: {
showDetailedErrors: false,
reportToServer: true,
serverErrorUrl: 'https://errors.example.com/api/report'
},

ui: {
defaultPageSize: 20,
pageSizeOptions: [10, 20, 50, 100],
toastDuration: 5000,
modalWidth: 600,
tableScrollHeight: 600
},

cache: {
enabled: true,
ttl: 600000, // 10 minutes
maxSize: 200
},

external: {
googleMapsApiKey: 'YOUR_GOOGLE_MAPS_API_KEY',
sentryDsn: 'YOUR_SENTRY_DSN',
mixpanelToken: 'YOUR_MIXPANEL_TOKEN'
}
};

// ===== environments/environment.interface.ts =====

export interface Environment {
production: boolean;

api: {
baseUrl: string;
timeout: number;
retryAttempts: number;
retryDelay: number;
};

auth: {
tokenKey: string;
refreshTokenKey: string;
tokenExpiry: number;
autoRefresh: boolean;
};

features: {
enableDarkMode: boolean;
enableDebugMode: boolean;
enableErrorReporting: boolean;
enableAnalytics: boolean;
enableWebSockets: boolean;
enableOfflineMode: boolean;
};

logging: {
level: 'error' | 'warn' | 'info' | 'debug';
enableConsole: boolean;
enableRemote: boolean;
remoteUrl: string;
};

errorHandling: {
showDetailedErrors: boolean;
reportToServer: boolean;
serverErrorUrl: string;
};

ui: {
defaultPageSize: number;
pageSizeOptions: number[];
toastDuration: number;
modalWidth: number;
tableScrollHeight: number;
};

cache: {
enabled: boolean;
ttl: number;
maxSize: number;
};

external: {
googleMapsApiKey: string;
sentryDsn: string;
mixpanelToken: string;
};
}

8.6.2 Config Service
// ===== core/services/config/config.service.ts =====

import { Injectable } from '@angular/core';
import { environment } from '../../../environments/environment';
import { Environment } from '../../../environments/environment.interface';

@Injectable({
providedIn: 'root'
})
export class ConfigService {
private readonly config: Environment = environment;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  \*/
  getConfig(): Environment {
  return this.config;
  }

/\*\*

- –ü—Ä–æ–≤–µ—Ä–∫–∞ production —Ä–µ–∂–∏–º–∞
  \*/
  isProduction(): boolean {
  return this.config.production;
  }

/\*\*

- API Configuration
  \*/
  getApiBaseUrl(): string {
  return this.config.api.baseUrl;
  }

getApiTimeout(): number {
return this.config.api.timeout;
}

/\*\*

- Feature Flags
  \*/
  isFeatureEnabled(feature: keyof Environment['features']): boolean {
  return this.config.features[feature];
  }

/\*\*

- Logging Configuration
  \*/
  getLogLevel(): string {
  return this.config.logging.level;
  }

shouldLogToConsole(): boolean {
return this.config.logging.enableConsole;
}

/\*\*

- UI Configuration
  \*/
  getDefaultPageSize(): number {
  return this.config.ui.defaultPageSize;
  }

getPageSizeOptions(): number[] {
return this.config.ui.pageSizeOptions;
}

/\*\*

- Auth Configuration
  \*/
  getTokenKey(): string {
  return this.config.auth.tokenKey;
  }

getRefreshTokenKey(): string {
return this.config.auth.refreshTokenKey;
}

/\*\*

- Cache Configuration
  \*/
  isCacheEnabled(): boolean {
  return this.config.cache.enabled;
  }

getCacheTtl(): number {
return this.config.cache.ttl;
}
}

8.7 Base Services (Abstract Classes)
8.7.1 Base HTTP Service
// ===== shared/services/base-http.service.ts =====

import { Injectable, inject } from '@angular/core';
import { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';
import { Observable, throwError } from 'rxjs';
import { catchError, retry, timeout } from 'rxjs/operators';
import { ConfigService } from '../../core/services/config/config.service';

export interface HttpOptions {
headers?: HttpHeaders | { [header: string]: string | string[] };
params?: HttpParams | { [param: string]: string | number | boolean | ReadonlyArray<string | number | boolean> };
reportProgress?: boolean;
responseType?: 'json' | 'text' | 'blob' | 'arraybuffer';
withCredentials?: boolean;
skipLoading?: boolean;
}

export interface PaginatedResponse<T> {
data: T[];
total: number;
page: number;
pageSize: number;
totalPages: number;
}

@Injectable()
export abstract class BaseHttpService {
protected readonly http = inject(HttpClient);
protected readonly config = inject(ConfigService);

protected readonly baseUrl = this.config.getApiBaseUrl();

/\*\*

- GET request
  \*/
  protected get<T>(endpoint: string, options?: HttpOptions): Observable<T> {
  const url = this.buildUrl(endpoint);
  const httpOptions = this.buildHttpOptions(options);


    return this.http.get<T>(url, httpOptions).pipe(
      timeout(this.config.getApiTimeout()),
      retry(this.config.getConfig().api.retryAttempts),
      catchError(this.handleError)
    );

}

/\*\*

- POST request
  \*/
  protected post<T>(endpoint: string, body: any, options?: HttpOptions): Observable<T> {
  const url = this.buildUrl(endpoint);
  const httpOptions = this.buildHttpOptions(options);


    return this.http.post<T>(url, body, httpOptions).pipe(
      timeout(this.config.getApiTimeout()),
      catchError(this.handleError)
    );

}

/\*\*

- PUT request
  \*/
  protected put<T>(endpoint: string, body: any, options?: HttpOptions): Observable<T> {
  const url = this.buildUrl(endpoint);
  const httpOptions = this.buildHttpOptions(options);


    return this.http.put<T>(url, body, httpOptions).pipe(
      timeout(this.config.getApiTimeout()),
      catchError(this.handleError)
    );

}

/\*\*

- PATCH request
  \*/
  protected patch<T>(endpoint: string, body: any, options?: HttpOptions): Observable<T> {
  const url = this.buildUrl(endpoint);
  const httpOptions = this.buildHttpOptions(options);


    return this.http.patch<T>(url, body, httpOptions).pipe(
      timeout(this.config.getApiTimeout()),
      catchError(this.handleError)
    );

}

/\*\*

- DELETE request
  \*/
  protected delete<T>(endpoint: string, options?: HttpOptions): Observable<T> {
  const url = this.buildUrl(endpoint);
  const httpOptions = this.buildHttpOptions(options);


    return this.http.delete<T>(url, httpOptions).pipe(
      timeout(this.config.getApiTimeout()),
      catchError(this.handleError)
    );

}

/\*\*

- Build full URL
  \*/
  protected buildUrl(endpoint: string): string {
  // Remove leading slash if present
  const cleanEndpoint = endpoint.startsWith('/') ? endpoint.slice(1) : endpoint;
  return `${this.baseUrl}/${cleanEndpoint}`;
  }

/\*\*

- Build HTTP options
  \*/
  protected buildHttpOptions(options?: HttpOptions): any {
  const httpOptions: any = { ...options };


    // Add skip loading header if needed
    if (options?.skipLoading) {
      httpOptions.headers = {
        ...httpOptions.headers,
        'X-Skip-Loading': 'true'
      };
    }

    return httpOptions;

}

/\*\*

- Build query params for pagination
  \*/
  protected buildPaginationParams(page: number, pageSize: number, additionalParams?: any): HttpParams {
  let params = new HttpParams()
  .set('page', page.toString())
  .set('pageSize', pageSize.toString());


    if (additionalParams) {
      Object.keys(additionalParams).forEach(key => {
        const value = additionalParams[key];
        if (value !== null && value !== undefined && value !== '') {
          params = params.set(key, value.toString());
        }
      });
    }

    return params;

}

/\*\*

- Error handler
  \*/
  protected handleError(error: any): Observable<never> {
  // Error –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω HttpErrorInterceptor
  return throwError(() => error);
  }
  }

8.7.2 Base CRUD Service
// ===== shared/services/base-crud.service.ts =====

import { Observable } from 'rxjs';
import { BaseHttpService, PaginatedResponse } from './base-http.service';

export interface FilterParams {
search?: string;
sortBy?: string;
sortOrder?: 'asc' | 'desc';
[key: string]: any;
}

export abstract class BaseCrudService<T, TCreate = Partial<T>, TUpdate = Partial<T>> extends BaseHttpService {

/\*\*

- Abstract property –¥–ª—è endpoint
  \*/
  protected abstract readonly endpoint: string;

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  \*/
  getList(
  page: number = 1,
  pageSize: number = this.config.getDefaultPageSize(),
  filters?: FilterParams
  ): Observable<PaginatedResponse<T>> {
  const params = this.buildPaginationParams(page, pageSize, filters);
  return this.get<PaginatedResponse<T>>(this.endpoint, { params });
  }

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
  \*/
  getAll(filters?: FilterParams): Observable<T[]> {
  const params = filters ? new HttpParams({ fromObject: filters as any }) : undefined;
  return this.get<T[]>(`${this.endpoint}/all`, { params });
  }

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å—å –ø–æ ID
  \*/
  getById(id: string | number): Observable<T> {
  return this.get<T>(`${this.endpoint}/${id}`);
  }

/\*\*

- –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å
  \*/
  create(data: TCreate): Observable<T> {
  return this.post<T>(this.endpoint, data);
  }

/\*\*

- –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
  \*/
  update(id: string | number, data: TUpdate): Observable<T> {
  return this.put<T>(`${this.endpoint}/${id}`, data);
  }

/\*\*

- –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
  \*/
  patch(id: string | number, data: Partial<TUpdate>): Observable<T> {
  return this.patch<T>(`${this.endpoint}/${id}`, data);
  }

/\*\*

- –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å
  \*/
  deleteById(id: string | number): Observable<void> {
  return this.delete<void>(`${this.endpoint}/${id}`);
  }

/\*\*

- –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
  \*/
  deleteBulk(ids: (string | number)[]): Observable<void> {
  return this.post<void>(`${this.endpoint}/bulk-delete`, { ids });
  }

/\*\*

- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
  \*/
  export(format: 'csv' | 'xlsx' | 'pdf', filters?: FilterParams): Observable<Blob> {
  const params = filters ? new HttpParams({ fromObject: filters as any }) : undefined;
  return this.get<Blob>(`${this.endpoint}/export/${format}`, {
  params,
  responseType: 'blob' as any
  });
  }

/\*\*

- –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
  \*/
  import(file: File): Observable<{ success: number; failed: number; errors: any[] }> {
  const formData = new FormData();
  formData.append('file', file);


    return this.post<{ success: number; failed: number; errors: any[] }>(
      `${this.endpoint}/import`,
      formData
    );

}
}

8.7.3 Example: User Service
// ===== features/users/services/user.service.ts =====

import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { BaseCrudService } from '../../../shared/services/base-crud.service';
import { User, UserCreate, UserUpdate } from '../models/user.model';

@Injectable({
providedIn: 'root'
})
export class UserService extends BaseCrudService<User, UserCreate, UserUpdate> {
protected readonly endpoint = 'users';

/\*\*

- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏
  \*/
  getUsersByRole(role: string): Observable<User[]> {
  return this.get<User[]>(`${this.endpoint}/by-role/${role}`);
  }

/\*\*

- –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
  \*/
  changePassword(userId: string, oldPassword: string, newPassword: string): Observable<void> {
  return this.post<void>(`${this.endpoint}/${userId}/change-password`, {
  oldPassword,
  newPassword
  });
  }

/\*\*

- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (admin)
  \*/
  resetPassword(userId: string): Observable<{ temporaryPassword: string }> {
  return this.post<{ temporaryPassword: string }>(
  `${this.endpoint}/${userId}/reset-password`,
  {}
  );
  }

/\*\*

- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  \*/
  toggleActive(userId: string, active: boolean): Observable<User> {
  return this.patch<User>(`${this.endpoint}/${userId}`, { active });
  }

/\*\*

- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª–∏
  \*/
  assignRoles(userId: string, roleIds: string[]): Observable<User> {
  return this.post<User>(`${this.endpoint}/${userId}/roles`, { roleIds });
  }
  }

8.8 Models & Interfaces
8.8.1 Base Models
// ===== shared/models/base.model.ts =====

/\*\*

- –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
  \*/
  export interface BaseEntity {
  id: string;
  createdAt: Date;
  updatedAt: Date;
  createdBy?: string;
  updatedBy?: string;
  }

/\*\*

- –ê—É–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  \*/
  export interface Auditable {
  createdAt: Date;
  createdBy: string;
  updatedAt: Date;
  updatedBy: string;
  }

/\*\*

- Soft Delete
  \*/
  export interface SoftDeletable {
  deletedAt?: Date;
  deletedBy?: string;
  isDeleted: boolean;
  }

/\*\*

- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  \*/
  export interface Versionable {
  version: number;
  }

/\*\*

- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  \*/
  export interface WithMetadata {
  metadata?: Record<string, any>;
  }

8.8.2 Feature Models Example
// ===== features/users/models/user.model.ts =====

import { BaseEntity, Auditable, SoftDeletable } from '../../../shared/models/base.model';

/\*\*

- User entity
  \*/
  export interface User extends BaseEntity, Auditable, SoftDeletable {
  email: string;
  name: string;
  avatarUrl?: string;
  roles: string[];
  active: boolean;
  lastLoginAt?: Date;
  emailVerified: boolean;
  phoneNumber?: string;
  department?: string;
  position?: string;
  bio?: string;
  }

/\*\*

- User creation DTO
  \*/
  export interface UserCreate {
  email: string;
  name: string;
  password: string;
  roles: string[];
  active?: boolean;
  phoneNumber?: string;
  department?: string;
  position?: string;
  }

/\*\*

- User update DTO
  \*/
  export interface UserUpdate {
  name?: string;
  roles?: string[];
  active?: boolean;
  phoneNumber?: string;
  department?: string;
  position?: string;
  bio?: string;
  avatarUrl?: string;
  }

/\*\*

- User filter params
  \*/
  export interface UserFilterParams {
  search?: string;
  role?: string;
  active?: boolean;
  department?: string;
  sortBy?: 'name' | 'email' | 'createdAt' | 'lastLoginAt';
  sortOrder?: 'asc' | 'desc';
  }

/\*\*

- User statistics
  \*/
  export interface UserStats {
  total: number;
  active: number;
  inactive: number;
  byRole: Record<string, number>;
  byDepartment: Record<string, number>;
  }

8.9 State Management (–±–µ–∑ NgRx - Signals approach)
8.9.1 Feature State Service
// ===== features/users/services/user-state.service.ts =====

import { Injectable, signal, computed, inject } from '@angular/core';
import { toObservable, toSignal } from '@angular/core/rxjs-interop';
import { Subject } from 'rxjs';
import { User, UserFilterParams } from '../models/user.model';
import { UserService } from './user.service';

interface UserState {
users: User[];
selectedUser: User | null;
loading: boolean;
filters: UserFilterParams;
pagination: {
page: number;
pageSize: number;
total: number;
};
}

const initialState: UserState = {
users: [],
selectedUser: null,
loading: false,
filters: {},
pagination: {
page: 1,
pageSize: 20,
total: 0
}
};

@Injectable()
export class UserStateService {
private readonly userService = inject(UserService);

// State
private readonly state = signal<UserState>(initialState);

// Selectors (computed signals)
users = computed(() => this.state().users);
selectedUser = computed(() => this.state().selectedUser);
loading = computed(() => this.state().loading);
filters = computed(() => this.state().filters);
pagination = computed(() => this.state().pagination);

// Derived state
totalUsers = computed(() => this.state().pagination.total);
hasUsers = computed(() => this.state().users.length > 0);
activeUsers = computed(() =>
this.state().users.filter(u => u.active)
);

/\*\*

- Load users
  \*/
  loadUsers() {
  this.updateState({ loading: true });


    const { page, pageSize } = this.state().pagination;
    const filters = this.state().filters;

    this.userService.getList(page, pageSize, filters).subscribe({
      next: (response) => {
        this.updateState({
          users: response.data,
          loading: false,
          pagination: {
            page: response.page,
            pageSize: response.pageSize,
            total: response.total
          }
        });
      },
      error: () => {
        this.updateState({ loading: false });
      }
    });

}

/\*\*

- Set filters
  \*/
  setFilters(filters: UserFilterParams) {
  this.updateState({
  filters,
  pagination: { ...this.state().pagination, page: 1 }
  });
  this.loadUsers();
  }

/\*\*

- Set page
  \*/
  setPage(page: number) {
  this.updateState({
  pagination: { ...this.state().pagination, page }
  });
  this.loadUsers();
  }

/\*\*

- Set page size
  \*/
  setPageSize(pageSize: number) {
  this.updateState({
  pagination: { ...this.state().pagination, pageSize, page: 1 }
  });
  this.loadUsers();
  }

/\*\*

- Select user
  \*/
  selectUser(user: User | null) {
  this.updateState({ selectedUser: user });
  }

/\*\*

- Add user
  \*/
  addUser(user: User) {
  this.updateState({
  users: [...this.state().users, user],
  pagination: {
  ...this.state().pagination,
  total: this.state().pagination.total + 1
  }
  });
  }

/\*\*

- Update user
  \*/
  updateUser(user: User) {
  this.updateState({
  users: this.state().users.map(u => u.id === user.id ? user : u),
  selectedUser: this.state().selectedUser?.id === user.id ? user : this.state().selectedUser
  });
  }

/\*\*

- Remove user
  \*/
  removeUser(userId: string) {
  this.updateState({
  users: this.state().users.filter(u => u.id !== userId),
  selectedUser: this.state().selectedUser?.id === userId ? null : this.state().selectedUser,
  pagination: {
  ...this.state().pagination,
  total: this.state().pagination.total - 1
  }
  });
  }

/\*\*

- Reset state
  \*/
  reset() {
  this.state.set(initialState);
  }

/\*\*

- Update state
  \*/
  private updateState(partial: Partial<UserState>) {
  this.state.update(state => ({ ...state, ...partial }));
  }
  }

8.9.2 Using State Service in Component
// ===== features/users/pages/users-list/users-list.component.ts =====

@Component({
selector: 'app-users-list',
standalone: true,
imports: [
CommonModule,
PageShellComponent,
TableComponent,
PaginationComponent,
ButtonComponent
],
providers: [UserStateService], // Scoped to component
template: `
<app-page-shell [config]="pageConfig()">
<!-- Search/Filters -->
<div search-filters>
<input
type="text"
placeholder="–ü–æ–∏—Å–∫..."
#searchInput
(input)="onSearch(searchInput.value)"
/>
</div>

      <!-- Loading State -->
      @if (userState.loading()) {
        <app-skeleton [rows]="5" [active]="true"></app-skeleton>
      } @else if (!userState.hasUsers()) {
        <!-- Empty State -->
        <app-empty-state
          title="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
          description="–ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞"
          [actions]="emptyActions()"
        ></app-empty-state>
      } @else {
        <!-- Table -->
        <app-table [config]="tableConfig()"></app-table>
      }

      <!-- Pagination -->
      <div page-footer class="page-footer-content">
        <app-pagination [config]="paginationConfig()"></app-pagination>

        <app-button
          type="primary"
          icon="icon-plus"
          (click)="createUser()"
        >
          –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        </app-button>
      </div>
    </app-page-shell>

`
})
export class UsersListComponent implements OnInit {
protected readonly userState = inject(UserStateService);
private readonly router = inject(Router);

pageConfig = computed<PageConfig>(() => ({
header: {
title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
subtitle: `–í—Å–µ–≥–æ: ${this.userState.totalUsers()}`
},
contentType: 'table',
showFormStatusBar: false,
showSearchFilters: true,
showFooter: true
}));

tableConfig = computed<TableConfig<User>>(() => ({
data: this.userState.users(),
loading: this.userState.loading(),
columns: [
{ key: 'name', title: '–ò–º—è', sortable: true },
{ key: 'email', title: 'Email', sortable: true },
{ key: 'roles', title: '–†–æ–ª–∏', sortable: false },
{ key: 'active', title: '–°—Ç–∞—Ç—É—Å', sortable: true }
],
onRowClick: (user) => this.viewUser(user)
}));

paginationConfig = computed<PaginationConfig>(() => ({
total: this.userState.pagination().total,
pageSize: this.userState.pagination().pageSize,
currentPage: this.userState.pagination().page,
onPageChange: (page) => this.userState.setPage(page),
onPageSizeChange: (size) => this.userState.setPageSize(size)
}));

ngOnInit() {
this.userState.loadUsers();
}

onSearch(search: string) {
this.userState.setFilters({ search });
}

createUser() {
this.router.navigate(['/admin/users/create']);
}

viewUser(user: User) {
this.router.navigate(['/admin/users', user.id]);
}
}

–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –ß–ê–°–¢–¨ 9: TESTING STRATEGY?

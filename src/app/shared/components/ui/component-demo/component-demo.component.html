<av-wrapper-ui>
  <!-- Header: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ (sticky) -->
  <div wrapper-header>
    <h1>{{ config().title }}</h1>
    <div class="component-info">
      <code class="component-name">{{ config().componentName }}</code>
      <span class="component-path">{{ config().componentPath }}</span>
    </div>
  </div>

  <!-- Body: –í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç (–ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ—Ç—Å—è) -->
  <div wrapper-body>
    <!-- üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ -->
    <div class="playground-container">
      <div nz-row [nzGutter]="[24, 24]">
        <!-- Left: Controls & Docs Tabs -->
        <div nz-col [nzXs]="24" [nzLg]="15">
          <nz-card class="control-card-tabs">
            <nz-tabset>
              <!-- Tab 1: Settings -->
              <nz-tab nzTitle="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                <div style="padding-top: 20px">
                  @for (control of config().controls; track control.name) {
                  <av-field-group [label]="control.label" [description]="control.description">
                    @switch (control.type) { @case ('select') {
                    <nz-select
                      [ngModel]="controlValues()[control.name]"
                      (ngModelChange)="updateControl(control.name, $event)"
                      style="width: 100%"
                    >
                      @for (opt of control.options; track opt.value) {
                      <nz-option [nzValue]="opt.value" [nzLabel]="opt.label" />
                      }
                    </nz-select>
                    } @case ('boolean') {
                    <nz-switch
                      [ngModel]="controlValues()[control.name]"
                      (ngModelChange)="updateControl(control.name, $event)"
                    />
                    } @case ('text') {
                    <input
                      nz-input
                      [ngModel]="controlValues()[control.name]"
                      (ngModelChange)="updateControl(control.name, $event)"
                      [placeholder]="control.label"
                    />
                    } @case ('number') {
                    <nz-input-number
                      [ngModel]="controlValues()[control.name]"
                      (ngModelChange)="updateControl(control.name, $event)"
                      [nzMin]="control.min"
                      [nzMax]="control.max"
                      [nzStep]="control.step"
                      style="width: 100%"
                    />
                    } @case ('color') {
                    <input
                      type="color"
                      [ngModel]="controlValues()[control.name]"
                      (ngModelChange)="updateControl(control.name, $event)"
                      style="width: 100%; height: 40px; cursor: pointer"
                    />
                    } }
                  </av-field-group>
                  }
                  <div style="margin-top: 32px; padding-top: 24px; border-top: 1px solid #e8e8e8">
                    <button nz-button nzType="default" nzDanger (click)="resetAll()" style="width: 100%">
                      ‚ùå –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ
                    </button>
                  </div>
                </div>
              </nz-tab>

              <!-- Tab 2: Generated Code -->
              <nz-tab nzTitle="üìÑ –ö–æ–¥">
                <div style="padding-top: 20px">
                  <av-help-copy-container
                    title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML"
                    [content]="generatedCode()"
                    bgColor="#1e293b"
                    [defaultCollapsed]="false"
                  ></av-help-copy-container>
                </div>
              </nz-tab>

              <!-- Tab 3: API Docs -->
              <nz-tab nzTitle="üõ†Ô∏è API">
                <div style="padding-top: 20px">
                  <av-help-copy-container
                    title="Interface"
                    [content]="config().apiInterface"
                    bgColor="#0f172a"
                    [defaultCollapsed]="false"
                  ></av-help-copy-container>
                </div>
              </nz-tab>

              <!-- Tab 4: Import -->
              <nz-tab nzTitle="üí° –ò–º–ø–æ—Ä—Ç">
                <div style="padding-top: 20px">
                  <av-help-copy-container
                    title="–ö–∞–∫ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"
                    [content]="config().importCode"
                    bgColor="#0a0e1a"
                    [defaultCollapsed]="false"
                  ></av-help-copy-container>
                </div>
              </nz-tab>
            </nz-tabset>
          </nz-card>
        </div>

        <!-- Right: Result Preview -->
        <div nz-col [nzXs]="24" [nzLg]="9">
          <nz-card nzTitle="–†–µ–∑—É–ª—å—Ç–∞—Ç" class="result-card" style="height: 100%">
            <div style="height: 100%; min-height: 300px; display: flex; align-items: center; justify-content: center">
              <ng-content select="[demo-preview]" />
            </div>
          </nz-card>
        </div>
      </div>
    </div>

    <!-- üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
    @if (config().examples && config().examples.length > 0) {
    <div class="examples-section">
      <h2>üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</h2>
      <div nz-row [nzGutter]="[16, 16]">
        @for (example of config().examples; track example.title) {
        <div nz-col [nzXs]="24" [nzMd]="12" [nzLg]="8">
          <nz-card [nzTitle]="example.title" [class.highlight]="example.highlight">
            @if (example.description) {
            <p class="example-description">{{ example.description }}</p>
            }
            <av-help-copy-container [content]="example.code" bgColor="#1e293b" [defaultCollapsed]="true" />
          </nz-card>
        </div>
        }
      </div>
    </div>
    }

    <!-- üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ -->
    @if (config().documentation) {
    <div class="documentation-section">
      <h2>üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</h2>

      <nz-collapse [nzBordered]="false">
        <!-- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å -->
        <nz-collapse-panel nzHeader="–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ?" [nzActive]="true" nzShowArrow="true">
          <div [innerHTML]="config().documentation.usage"></div>
        </nz-collapse-panel>

        <!-- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ -->
        @if (config().documentation.installation) {
        <nz-collapse-panel nzHeader="–£—Å—Ç–∞–Ω–æ–≤–∫–∞" nzShowArrow="true">
          <div [innerHTML]="config().documentation.installation"></div>
        </nz-collapse-panel>
        }

        <!-- –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã -->
        @if (config().documentation.tips && config().documentation.tips?.length) {
        <nz-collapse-panel nzHeader="–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã" nzShowArrow="true">
          <ul class="tips-list">
            @for (tip of config().documentation.tips; track tip) {
            <li>{{ tip }}</li>
            }
          </ul>
        </nz-collapse-panel>
        }

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
        @if (config().documentation.links && config().documentation.links?.length) {
        <nz-collapse-panel nzHeader="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏" nzShowArrow="true">
          <ul class="links-list">
            @for (link of config().documentation.links; track link.url) {
            <li>
              <a [href]="link.url" target="_blank" rel="noopener">{{ link.title }}</a>
            </li>
            }
          </ul>
        </nz-collapse-panel>
        }
      </nz-collapse>
    </div>
    }
  </div>
</av-wrapper-ui>

<div class="json-node" [class.expandable]="isExpandable">
  <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ° ÑƒÐ·Ð»Ð° -->
  <div class="node-header" (click)="toggleExpand($event)">
    <!-- Ð˜ÐºÐ¾Ð½ÐºÐ° Ñ€Ð°ÑÐºÑ€Ñ‹Ñ‚Ð¸Ñ (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²/Ð¼Ð°ÑÑÐ¸Ð²Ð¾Ð²) -->
    @if (isExpandable) {
    <span class="toggle-icon" [class.expanded]="isExpanded()">â–¶</span>
    } @else {
    <span class="toggle-icon empty"></span>
    }

    <!-- ÐšÐ»ÑŽÑ‡ (ÐµÑÐ»Ð¸ ÐµÑÑ‚ÑŒ) -->
    @if (key) {
    <span class="node-key">{{ key }}:</span>
    }

    <!-- ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ -->
    <div class="node-value-preview">
      @if (isExpandable) {
      <span class="type-label">{{ typeLabel }}</span>
      @if (!isExpanded()) {
      <span
        class="collapsed-preview"
        [class.full-visible]="isPreviewFullyVisible()"
        (click)="togglePreviewFullText($event)"
        [title]="isPreviewFullyVisible() ? 'Click to collapse' : 'Click to expand text'"
      >
        {{ value | json }}
      </span>
      } } @else {
      <span class="primitive-value" [ngClass]="'type-' + valueType">
        {{ valueType === 'string' ? '"' + value + '"' : value }}
      </span>
      }
    </div>

    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿ÑƒÑ‚Ð¸ (Ð¿Ð¾ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ð¸) -->
    @if (path) {
    <button class="copy-path-btn" (click)="copyPath($event)" title="Copy path: {{ path }}">
      <span class="copy-icon">ðŸ“‹</span>
    </button>
    }
  </div>

  <!-- Ð ÐµÐºÑƒÑ€ÑÐ¸Ð²Ð½Ñ‹Ð¹ Ð²Ñ‹Ð²Ð¾Ð´ Ð´ÐµÑ‚ÐµÐ¹ -->
  @if (isExpandable && isExpanded()) {
  <div class="node-children">
    @for (childKey of objectKeys; track childKey) {
    <app-logger-console-json-viewer [key]="childKey" [value]="value[childKey]" [path]="getChildPath(childKey)">
    </app-logger-console-json-viewer>
    }
  </div>
  }
</div>

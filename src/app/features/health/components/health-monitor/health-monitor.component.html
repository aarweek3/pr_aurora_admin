<div class="health-container">
  <header class="monitor-header">
    <div class="title-group">
      <h1>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã</h1>
      <div class="status-badge" [class]="status().status.toLowerCase()">
        <app-health-indicator [status]="status().status" [pulse]="true"></app-health-indicator>
        <span>{{ translateStatus(status().status) }}</span>
      </div>
    </div>

    <div class="actions">
      <span class="last-check" *ngIf="status().lastCheck">–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ status().lastCheck | date : 'HH:mm:ss' }}</span>
      <button class="refresh-btn" (click)="refresh()" [disabled]="isLoading()">
        <span *ngIf="!isLoading()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</span>
        <span *ngIf="isLoading()">‚åõ –ó–∞–≥—Ä—É–∑–∫–∞...</span>
      </button>
    </div>
  </header>

  <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—ã—Å—Ç—Ä–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
  <div class="quick-stats">
    <div class="stat-card">
      <label>–¶–ü–£</label>
      <div class="value">{{ metrics()?.cpuUsagePercentage || 0 }}%</div>
      <div class="progress-bar">
        <div class="fill" [style.width.%]="metrics()?.cpuUsagePercentage || 0"></div>
      </div>
    </div>
    <div class="stat-card">
      <label>–û–ó–£</label>
      <div class="value">{{ metrics()?.getMemoryUsagePercentage() || 0 }}%</div>
      <div class="progress-bar">
        <div class="fill" [style.width.%]="metrics()?.getMemoryUsagePercentage() || 0"></div>
      </div>
    </div>
    <div class="stat-card">
      <label>–ê–ø—Ç–∞–π–º</label>
      <div class="value">{{ metrics()?.getUptimeFormatted() || '0–º' }}</div>
    </div>
  </div>

  <!-- –¢–∞–±—ã -->
  <nav class="monitor-tabs">
    <button [class.active]="activeTab() === 'overview'" (click)="setTab('overview')">–û–±–∑–æ—Ä</button>
    <button [class.active]="activeTab() === 'metrics'" (click)="setTab('metrics')">–ú–µ—Ç—Ä–∏–∫–∏</button>
    <button [class.active]="activeTab() === 'logs'" (click)="setTab('logs')">–õ–æ–≥–∏</button>
  </nav>

  <main class="tab-content" [ngSwitch]="activeTab()">
    <div *ngSwitchCase="'overview'" class="overview-grid">
      <section class="info-panel">
        <h3>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API</h3>
        <p>
          –û–∫—Ä—É–∂–µ–Ω–∏–µ: <strong>{{ status().environment || 'N/A' }}</strong>
        </p>
        <p>
          –í–µ—Ä—Å–∏—è: <strong>{{ status().version || '1.0.0' }}</strong>
        </p>
        <p>
          –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞: <strong>{{ status().responseTime }}–º—Å</strong>
        </p>
      </section>

      <section class="alerts-panel" *ngIf="alerts().length > 0">
        <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
        <div class="alert-item" *ngFor="let alert of alerts()" [class]="alert.severity">
          <span>{{ alert.message }}</span>
          <small>{{ alert.timestamp | date : 'HH:mm' }}</small>
        </div>
      </section>
    </div>

    <div *ngSwitchCase="'metrics'">
      <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ServerMetricsComponent...</p>
    </div>

    <div *ngSwitchCase="'logs'">
      <app-health-logs></app-health-logs>
    </div>
  </main>
</div>

<div class="ui-help-container">
  <!-- Header -->
  <div class="ui-help-header">
    <h1>Icon Control UI 22222üé® ‚≠ê</h1>
    <p class="text-secondary">
      –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∏–∫–æ–Ω–∫–∞–º–∏: —Ä–∞–∑–º–µ—Ä, —Ü–≤–µ—Ç, —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏, –≥—Ä–∞–Ω–∏—Ü—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã.
      <br />
      <small>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: IconControlComponent (src/app/pages/ui-demo/icon-control/icon-control.component.ts)</small>
    </p>
  </div>

  <div class="ui-help-content">
    <div class="ui-help-section">
      <div class="section-header">
        <button class="collapse-toggle" (click)="isPlaygroundVisible.set(!isPlaygroundVisible())">
          <av-icon
            [type]="isPlaygroundVisible() ? 'arrows/av_chevron-up' : 'arrows/av_chevron-down'"
            [size]="20"
          ></av-icon>
        </button>
        <h2>üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞ Icon Control</h2>
      </div>

      @if (isPlaygroundVisible()) {
      <!-- Interactive Playground -->
      <div class="playground-container">
        <div nz-row [nzGutter]="[24, 24]">
          <!-- Left: Controls & Docs Tabs -->
          <div nz-col [nzXs]="24" [nzLg]="15">
            <nz-card class="control-card-tabs">
              <nz-tabset>
                <!-- Tab 1: Settings -->
                <nz-tab nzTitle="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                  <div style="padding-top: 20px">
                    <av-icon-settings-control
                      [value]="pgConfig()"
                      (valueChange)="pgConfig.set($event)"
                      [presets]="iconPresets()"
                    ></av-icon-settings-control>
                  </div>
                </nz-tab>

                <!-- Tab 2: Generated Code -->
                <nz-tab nzTitle="üìÑ –ö–æ–¥">
                  <div style="padding-top: 20px">
                    <av-help-copy-container
                      title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (HTML / TS / SCSS)"
                      [content]="pgGeneratedCode()"
                      bgColor="#1e293b"
                    ></av-help-copy-container>
                  </div>
                </nz-tab>

                <!-- Tab 3: SVG Source -->
                <nz-tab nzTitle="üèóÔ∏è SVG Source">
                  <div style="padding-top: 20px">
                    <av-help-copy-container
                      title="Raw Source (SVG)"
                      [content]="pgRawSource()"
                      bgColor="#0f172a"
                      codeLang="xml"
                    ></av-help-copy-container>
                  </div>
                </nz-tab>

                <!-- Tab 4: API Docs -->
                <nz-tab nzTitle="üõ†Ô∏è API">
                  <div style="padding-top: 20px">
                    <av-help-copy-container
                      title="Interface: AvIconProps"
                      [content]="apiInterfaceCode"
                      bgColor="#0a0e1a"
                      [showHelpButton]="true"
                    ></av-help-copy-container>
                  </div>
                </nz-tab>
              </nz-tabset>
            </nz-card>
          </div>

          <!-- Right: Result Preview -->
          <div nz-col [nzXs]="24" [nzLg]="9">
            <nz-card nzTitle="–†–µ–∑—É–ª—å—Ç–∞—Ç" class="result-card" style="height: 100%">
              <div class="icon-preview-container" style="height: 100%; min-height: 300px">
                <div class="preview-background" style="flex: 1">
                  <div class="icon-showcase">
                    <av-icon [config]="pgConfig()"></av-icon>
                  </div>
                </div>
                <div class="preview-info">
                  <p><strong>–ò–∫–æ–Ω–∫–∞:</strong> {{ pgConfig().type }}</p>
                  <p><strong>–†–∞–∑–º–µ—Ä:</strong> {{ pgConfig().size }}px</p>
                  <p><strong>–¶–≤–µ—Ç:</strong> {{ pgConfig().color }}</p>
                  @if (pgConfig().rotation !== 0) {
                  <p><strong>–ü–æ–≤–æ—Ä–æ—Ç:</strong> {{ pgConfig().rotation }}¬∞</p>
                  } @if (pgConfig().scale !== 1) {
                  <p><strong>–ú–∞—Å—à—Ç–∞–±:</strong> {{ pgConfig().scale }}</p>
                  } @if (pgConfig().opacity !== 1) {
                  <p><strong>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å:</strong> {{ (pgConfig().opacity * 100).toFixed(0) }}%</p>
                  }
                </div>
              </div>
            </nz-card>
          </div>
        </div>
      </div>
      }
    </div>

    <!-- üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–∫–æ–Ω–æ–∫ -->
    <div class="ui-help-section" style="margin-top: 32px">
      <div class="section-header clickable" (click)="isSectionLibraryVisible.set(!isSectionLibraryVisible())">
        <av-icon
          [type]="isSectionLibraryVisible() ? 'arrows/av_chevron-up' : 'arrows/av_chevron-down'"
          [size]="20"
          class="header-arrow"
        ></av-icon>
        <h2>üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–∫–æ–Ω–æ–∫</h2>
      </div>

      @if (isSectionLibraryVisible()) {
      <div class="library-container">
        <div class="search-bar" style="margin-bottom: 24px">
          <nz-input-group [nzPrefix]="searchIcon">
            <input
              nz-input
              [ngModel]="searchQuery()"
              (ngModelChange)="searchQuery.set($event)"
              placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏..."
            />
          </nz-input-group>
          <ng-template #searchIcon>
            <av-icon type="actions/av_search" [size]="16" color="#bfbfbf"></av-icon>
          </ng-template>
        </div>

        @for (cat of filteredCategories(); track cat.category) {
        <div class="category-block" style="margin-bottom: 40px">
          <h3
            class="category-title"
            style="margin-bottom: 16px; border-bottom: 1px solid var(--color-border-secondary); padding-bottom: 8px"
          >
            {{ cat.category }}
            <small style="color: var(--color-text-secondary); margin-left: 8px">({{ cat.icons.length }})</small>
          </h3>

          <div
            class="icon-grid"
            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 16px"
          >
            @for (icon of cat.icons; track icon.type) {
            <nz-card
              class="icon-item-card"
              [nzHoverable]="true"
              (click)="copyToClipboard(icon.type, '–¢–∏–ø –∏–∫–æ–Ω–∫–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!')"
              style="text-align: center; cursor: pointer"
            >
              <div class="icon-holder" style="margin-bottom: 8px; display: flex; justify-content: center">
                <av-icon [type]="icon.type" [size]="32" [color]="pgConfig().color"></av-icon>
              </div>
              <div
                class="icon-label"
                style="
                  font-size: 11px;
                  color: var(--color-text-secondary);
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                "
              >
                {{ icon.name }}
              </div>
            </nz-card>
            }
          </div>
        </div>
        }
      </div>
      }
    </div>

    <!-- üìñ Examples & Guidelines -->
    <div class="ui-help-section" style="margin-top: 32px">
      <div class="section-header">
        <h2>üìñ –ü—Ä–∏–º–µ—Ä—ã –∏ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</h2>
      </div>

      <nz-card class="api-docs-card" style="margin-bottom: 24px">
        <div class="card-header-with-icon" style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px">
          <av-icon type="system/av_info" [size]="18" color="#1890ff"></av-icon>
          <span style="font-weight: 600">–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ?</span>
        </div>
        <p class="text-secondary" style="margin-bottom: 16px">
          –í—Å–µ –∏–∫–æ–Ω–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç <code>currentColor</code>.
        </p>
        <av-help-copy-container
          title="–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –±–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"
          [content]="howToConnectCode"
          bgColor="#0a0e1a"
          [showHelpButton]="true"
        ></av-help-copy-container>
      </nz-card>

      <nz-card class="api-docs-card">
        <div class="card-header-with-icon" style="margin-bottom: 16px; display: flex; align-items: center; gap: 8px">
          <av-icon type="actions/av_calculator" [size]="18" color="#52c41a"></av-icon>
          <span style="font-weight: 600">Dokumentation: Help Copy Container</span>
        </div>
        <p class="text-secondary" style="margin-bottom: 16px">
          –≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ <strong>?</strong> –≤
          –∑–∞–≥–æ–ª–æ–≤–∫–µ –±–ª–æ–∫–∞ –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
        </p>
        <av-help-copy-container
          title="Interface: AvHelpCopyProps"
          [content]="helpContainerDocsCode"
          bgColor="#0f172a"
          [showHelpButton]="true"
        ></av-help-copy-container>
      </nz-card>
    </div>
  </div>

  <!-- Toast Notification -->
  @if (toastMessage()) {
  <div class="av-toast">
    {{ toastMessage() }}
  </div>
  }
</div>

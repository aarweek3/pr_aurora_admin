<div class="ui-demo">
  <div class="ui-demo__header">
    <h1>Inputs (New Directive API) ‚≠ê</h1>
    <p class="text-secondary">
      –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã <code>avInput</code> –Ω–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ —Å—Ç–∏–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
      –≤–≤–æ–¥–∞.
    </p>
  </div>

  <!-- üõ†Ô∏è API Interface Documentation -->
  <section class="demo-section">
    <div class="demo-section__header">
      <h2>üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Inputs)</h2>
    </div>
    <p class="demo-section__description">
      –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É <strong>"?"</strong> –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∏–∂–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
      –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
    </p>

    <div class="demo-section__preview" style="padding: 0; background: none; border: none">
      <av-help-copy-container
        title="Interface: AvInputProps"
        [content]="apiInterfaceCode"
        bgColor="#0a0e1a"
        [showHelpButton]="true"
      ></av-help-copy-container>
    </div>
  </section>

  <!-- üéÆ Interactive Playground -->
  <section class="demo-section">
    <h2>üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–ª–æ—â–∞–¥–∫–∞</h2>
    <div class="playground-container">
      <div nz-row [nzGutter]="[24, 24]">
        <!-- Controls -->
        <div nz-col [nzXs]="24" [nzLg]="10">
          <nz-card nzTitle="–ù–∞—Å—Ç—Ä–æ–π–∫–∏" [nzExtra]="resetTpl">
            <ng-template #resetTpl>
              <button av-button avType="text" avSize="small" (click)="resetAllSettings()" style="color: #ff4d4f">
                –°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë
              </button>
            </ng-template>

            <!-- 1. General Config -->
            <div class="control-item">
              <label>–¢–∏–ø —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏</label>
              <div class="control-content-zone">
                <nz-select [ngModel]="pgType()" (ngModelChange)="pgType.set($event)" style="width: 100%">
                  <nz-option nzValue="directive" nzLabel="Directive (avInput)"></nz-option>
                  <nz-option nzValue="component" nzLabel="Component (<av-input>)"></nz-option>
                </nz-select>
              </div>
            </div>

            <div class="control-item">
              <label>–¢–∏–ø –ø–æ–ª—è (type)</label>
              <div class="control-content-zone">
                <nz-select [ngModel]="pgInputType()" (ngModelChange)="pgInputType.set($event)" style="width: 100%">
                  <nz-option nzValue="text" nzLabel="Text"></nz-option>
                  <nz-option nzValue="email" nzLabel="Email"></nz-option>
                  <nz-option nzValue="password" nzLabel="Password"></nz-option>
                  <nz-option nzValue="number" nzLabel="Number"></nz-option>
                  <nz-option nzValue="tel" nzLabel="Tel"></nz-option>
                  <nz-option nzValue="url" nzLabel="URL"></nz-option>
                  <nz-option nzValue="search" nzLabel="Search"></nz-option>
                  <nz-option nzValue="date" nzLabel="Date"></nz-option>
                </nz-select>
              </div>
            </div>

            <!-- 2. Appearance -->
            <div class="control-item">
              <label>–†–∞–∑–º–µ—Ä</label>
              <div class="control-content-zone">
                <nz-select [ngModel]="pgSize()" (ngModelChange)="pgSize.set($event)" style="width: 100%">
                  <nz-option nzValue="small" nzLabel="Small"></nz-option>
                  <nz-option nzValue="default" nzLabel="Default"></nz-option>
                  <nz-option nzValue="large" nzLabel="Large"></nz-option>
                  <nz-option nzValue="x-large" nzLabel="X-Large"></nz-option>
                  <nz-option nzValue="custom" nzLabel="Custom (–°–≤–æ–π —Ä–∞–∑–º–µ—Ä)"></nz-option>
                </nz-select>

                @if (pgSize() === 'custom') {
                <div class="custom-size-row">
                  <div class="compact-field">
                    <span class="field-label">W</span>
                    <input
                      type="number"
                      nz-input
                      [ngModel]="pgWidth()"
                      (ngModelChange)="pgWidth.set($event)"
                      placeholder="Auto"
                    />
                  </div>
                  <div class="compact-field">
                    <span class="field-label">H</span>
                    <input
                      type="number"
                      nz-input
                      [ngModel]="pgHeight()"
                      (ngModelChange)="pgHeight.set($event)"
                      placeholder="Auto"
                    />
                  </div>
                  <div class="compact-field">
                    <span class="field-label">R</span>
                    <input
                      type="number"
                      nz-input
                      [ngModel]="pgRadius()"
                      (ngModelChange)="pgRadius.set($event)"
                      placeholder="0"
                    />
                  </div>
                </div>
                }
              </div>
            </div>

            <div class="control-item">
              <label nz-tooltip nzTooltipTitle="–§–æ—Ä–º–∞ –ø–æ–ª—è (—Å–∫—Ä—É–≥–ª–µ–Ω–∏–µ)"
                >–§–æ—Ä–º–∞ (avShape) <span class="info-icon">‚ìò</span></label
              >
              <div class="control-content-zone">
                <nz-select [ngModel]="pgShape()" (ngModelChange)="pgShape.set($event)" style="width: 100%">
                  <nz-option nzValue="default" nzLabel="Default (Sharp Rect)"></nz-option>
                  <nz-option nzValue="rounded" nzLabel="Rounded (Standard)"></nz-option>
                  <nz-option nzValue="rounded-big" nzLabel="Rounded-big"></nz-option>
                </nz-select>
              </div>
            </div>

            <div class="control-item">
              <label>–î–∏–∑–∞–π–Ω (Variant)</label>
              <div class="control-content-zone">
                <nz-select [ngModel]="pgVariant()" (ngModelChange)="pgVariant.set($event)" style="width: 100%">
                  <nz-option nzValue="outlined" nzLabel="Outlined"></nz-option>
                  <nz-option nzValue="filled" nzLabel="Filled"></nz-option>
                  <nz-option nzValue="borderless" nzLabel="Borderless"></nz-option>
                </nz-select>
              </div>
            </div>

            <div class="control-item">
              <label>–°—Ç–∞—Ç—É—Å (Validation)</label>
              <div class="control-content-zone">
                <nz-select [ngModel]="pgStatus()" (ngModelChange)="pgStatus.set($event)" style="width: 100%">
                  <nz-option nzValue="default" nzLabel="Default"></nz-option>
                  <nz-option nzValue="success" nzLabel="Success"></nz-option>
                  <nz-option nzValue="warning" nzLabel="Warning"></nz-option>
                  <nz-option nzValue="error" nzLabel="Error"></nz-option>
                </nz-select>
              </div>
            </div>

            <!-- 4. Content & Labels -->
            <div class="control-item">
              <label>Placeholder</label>
              <div class="control-content-zone">
                <input nz-input [ngModel]="pgPlaceholder()" (ngModelChange)="pgPlaceholder.set($event)" />
              </div>
            </div>

            @if (pgType() === 'component') {
            <div class="control-item">
              <label>Label</label>
              <input nz-input [ngModel]="pgLabel()" (ngModelChange)="pgLabel.set($event)" />
            </div>
            <div class="control-item">
              <label>Hint (–ü–æ–¥—Å–∫–∞–∑–∫–∞)</label>
              <input nz-input [ngModel]="pgHint()" (ngModelChange)="pgHint.set($event)" />
            </div>
            @if (pgStatus() === 'error') {
            <div class="control-item">
              <label>Error Message</label>
              <input nz-input [ngModel]="pgErrorMessage()" (ngModelChange)="pgErrorMessage.set($event)" />
            </div>
            } }

            <!-- ‚ú® Prefix Icon Section -->
            <div
              style="background: #f0f7ff; border: 1px solid #bae7ff; border-radius: 12px; padding: 16px; margin: 20px 0"
            >
              <div
                style="
                  margin-bottom: 20px;
                  font-weight: 700;
                  font-size: 14px;
                  color: #0050b3;
                  display: flex;
                  align-items: center;
                  gap: 10px;
                "
              >
                <span nz-icon nzType="login"></span>
                Prefix Icon Settings
              </div>

              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–ò–∫–æ–Ω–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –ø–æ–ª—è">
                  –ò–∫–æ–Ω–∫–∞: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone">
                  <nz-select
                    [ngModel]="pgPrefixIcon()"
                    (ngModelChange)="pgPrefixIcon.set($event)"
                    nzAllowClear
                    nzPlaceHolder="None"
                    style="width: 100%"
                  >
                    <nz-option nzValue="search" nzLabel="Search"></nz-option>
                    <nz-option nzValue="user" nzLabel="User"></nz-option>
                    <nz-option nzValue="mail" nzLabel="Email"></nz-option>
                    <nz-option nzValue="lock" nzLabel="Lock"></nz-option>
                    <nz-option nzValue="download" nzLabel="Download"></nz-option>
                  </nz-select>
                </div>
              </div>

              @if (pgPrefixIcon()) {
              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–†–∞–∑–º–µ—Ä –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π –∏–∫–æ–Ω–∫–∏">
                  –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone" style="flex-direction: row; align-items: center; gap: 16px">
                  <nz-slider
                    style="flex: 1"
                    [nzMin]="12"
                    [nzMax]="40"
                    [ngModel]="pgPrefixIconSize() || 16"
                    (ngModelChange)="pgPrefixIconSize.set($event)"
                  ></nz-slider>
                  <nz-input-number
                    style="width: 60px"
                    [nzMin]="12"
                    [nzMax]="40"
                    [ngModel]="pgPrefixIconSize() || 16"
                    (ngModelChange)="pgPrefixIconSize.set($event)"
                  ></nz-input-number>
                </div>
              </div>

              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–¶–≤–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (avPrefixIconColor)">
                  –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone">
                  <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-bottom: 8px">
                    @for (color of colorPresets; track color) {
                    <div
                      class="color-preset"
                      [style.background]="color"
                      [class.active]="pgPrefixIconColor() === color"
                      (click)="pgPrefixIconColor.set(color)"
                    ></div>
                    }
                    <button av-button avType="text" avSize="small" (click)="pgPrefixIconColor.set(null)">–°–±—Ä–æ—Å</button>
                  </div>
                  <div style="display: flex; gap: 8px; align-items: center">
                    <nz-color-picker
                      [ngModel]="pgPrefixIconColor()"
                      (ngModelChange)="pgPrefixIconColor.set($event)"
                    ></nz-color-picker>
                    <input
                      nz-input
                      [ngModel]="pgPrefixIconColor()"
                      (ngModelChange)="pgPrefixIconColor.set($event)"
                      placeholder="HEX, RGB..."
                      style="flex: 1"
                    />
                  </div>
                </div>
              </div>
              }
            </div>

            <!-- ‚ú® Suffix Icon Section -->
            <div
              style="background: #fffbe6; border: 1px solid #ffe58f; border-radius: 12px; padding: 16px; margin: 20px 0"
            >
              <div
                style="
                  margin-bottom: 20px;
                  font-weight: 700;
                  font-size: 14px;
                  color: #d48806;
                  display: flex;
                  align-items: center;
                  gap: 10px;
                "
              >
                <span nz-icon nzType="logout"></span>
                Suffix Icon Settings
              </div>

              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–ò–∫–æ–Ω–∫–∞ –≤ –∫–æ–Ω—Ü–µ –ø–æ–ª—è">
                  –ò–∫–æ–Ω–∫–∞: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone">
                  <nz-select
                    [ngModel]="pgSuffixIcon()"
                    (ngModelChange)="pgSuffixIcon.set($event)"
                    nzAllowClear
                    nzPlaceHolder="None"
                    style="width: 100%"
                  >
                    <nz-option nzValue="check" nzLabel="Check"></nz-option>
                    <nz-option nzValue="close" nzLabel="Close"></nz-option>
                    <nz-option nzValue="info-circle" nzLabel="Info"></nz-option>
                    <nz-option nzValue="calendar" nzLabel="Calendar"></nz-option>
                    <nz-option nzValue="eye" nzLabel="Eye"></nz-option>
                    <nz-option nzValue="download" nzLabel="Download"></nz-option>
                  </nz-select>
                </div>
              </div>

              @if (pgSuffixIcon()) {
              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–†–∞–∑–º–µ—Ä —Å—É—Ñ—Ñ–∏–∫—Å–Ω–æ–π –∏–∫–æ–Ω–∫–∏">
                  –†–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone" style="flex-direction: row; align-items: center; gap: 16px">
                  <nz-slider
                    style="flex: 1"
                    [nzMin]="12"
                    [nzMax]="40"
                    [ngModel]="pgSuffixIconSize() || 16"
                    (ngModelChange)="pgSuffixIconSize.set($event)"
                  ></nz-slider>
                  <nz-input-number
                    style="width: 60px"
                    [nzMin]="12"
                    [nzMax]="40"
                    [ngModel]="pgSuffixIconSize() || 16"
                    (ngModelChange)="pgSuffixIconSize.set($event)"
                  ></nz-input-number>
                </div>
              </div>

              <div class="control-item">
                <label nz-tooltip nzTooltipTitle="–¶–≤–µ—Ç —Å—É—Ñ—Ñ–∏–∫—Å–Ω–æ–π –∏–∫–æ–Ω–∫–∏ (avSuffixIconColor)">
                  –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏: <span class="info-icon">‚ìò</span>
                </label>
                <div class="control-content-zone">
                  <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center; margin-bottom: 8px">
                    @for (color of colorPresets; track color) {
                    <div
                      class="color-preset"
                      [style.background]="color"
                      [class.active]="pgSuffixIconColor() === color"
                      (click)="pgSuffixIconColor.set(color)"
                    ></div>
                    }
                    <button av-button avType="text" avSize="small" (click)="pgSuffixIconColor.set(null)">–°–±—Ä–æ—Å</button>
                  </div>
                  <div style="display: flex; gap: 8px; align-items: center">
                    <nz-color-picker
                      [ngModel]="pgSuffixIconColor()"
                      (ngModelChange)="pgSuffixIconColor.set($event)"
                    ></nz-color-picker>
                    <input
                      nz-input
                      [ngModel]="pgSuffixIconColor()"
                      (ngModelChange)="pgSuffixIconColor.set($event)"
                      placeholder="HEX, RGB..."
                      style="flex: 1"
                    />
                  </div>
                </div>
              </div>
              }
            </div>

            <!-- 5. Status Switches -->
            <div class="control-item switches-row">
              <div class="switch-item">
                <label>Disabled</label>
                <nz-switch [ngModel]="pgDisabled()" (ngModelChange)="pgDisabled.set($event)"></nz-switch>
              </div>

              <div class="switch-item">
                <label nz-tooltip nzTooltipTitle="–ü–æ–∫–∞–∑–∞—Ç—å –∏–ª–∏ —Å–∫—Ä—ã—Ç—å –ø–æ–ª–µ"
                  >Visible <span class="info-icon">‚ìò</span></label
                >
                <nz-switch [ngModel]="pgVisible()" (ngModelChange)="pgVisible.set($event)"></nz-switch>
              </div>

              <div class="switch-item">
                <label nz-tooltip nzTooltipTitle="–†–∞—Å—Ç—è–Ω—É—Ç—å –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É"
                  >Block <span class="info-icon">‚ìò</span></label
                >
                <nz-switch [ngModel]="pgBlock()" (ngModelChange)="pgBlock.set($event)"></nz-switch>
              </div>

              @if (pgInputType() === 'password') {
              <div class="switch-item">
                <label>Password Toggle</label>
                <nz-switch
                  [ngModel]="pgShowPasswordToggle()"
                  (ngModelChange)="pgShowPasswordToggle.set($event)"
                ></nz-switch>
              </div>
              }
            </div>
          </nz-card>
        </div>

        <!-- Preview & Code -->
        <div nz-col [nzXs]="24" [nzLg]="14">
          <nz-card nzTitle="–†–µ–∑—É–ª—å—Ç–∞—Ç" [nzExtra]="stateActions">
            <ng-template #stateActions>
              <div class="preview-badge" [class.success]="pgValue()">
                {{ pgValue() ? 'Value present' : 'Empty' }}
              </div>
            </ng-template>

            <div class="preview-area">
              <div style="width: 100%; max-width: 400px">
                @if (refreshTrigger()) { @if (pgType() === 'directive') {
                <div
                  [class.av-input-container]="pgPrefixIcon() || pgSuffixIcon()"
                  [style.--av-prefix-icon-size]="(pgPrefixIconSize() || 16) + 'px'"
                  [style.--av-prefix-icon-color]="pgPrefixIconColor()"
                  [style.--av-suffix-icon-size]="(pgSuffixIconSize() || 16) + 'px'"
                  [style.--av-suffix-icon-color]="pgSuffixIconColor()"
                >
                  @if (pgPrefixIcon()) {
                  <div class="av-input-prefix">
                    <app-icon [type]="pgPrefixIcon()!"></app-icon>
                  </div>
                  }
                  <input
                    avInput
                    [type]="pgInputType()"
                    [avSize]="appliedSize()"
                    [avVariant]="pgVariant()"
                    [avStatus]="pgStatus()"
                    [avWidth]="pgSize() === 'custom' ? pgWidth() : pgBlock() ? '100%' : null"
                    [avHeight]="pgSize() === 'custom' ? pgHeight() : null"
                    [avRadius]="pgSize() === 'custom' ? pgRadius() : null"
                    [avVisible]="pgVisible()"
                    [avBlock]="pgBlock()"
                    [avShape]="pgShape()"
                    [avPrefixIconSize]="pgPrefixIconSize()"
                    [avPrefixIconColor]="pgPrefixIconColor()"
                    [avSuffixIconSize]="pgSuffixIconSize()"
                    [avSuffixIconColor]="pgSuffixIconColor()"
                    [placeholder]="pgPlaceholder()"
                    [disabled]="pgDisabled()"
                    [(ngModel)]="pgValue"
                    [style.padding-left]="pgPrefixIcon() ? (pgPrefixIconSize() || 16) + 20 + 'px' : null"
                    [style.padding-right]="
                      (pgSuffixIcon() ? (pgSuffixIconSize() || 16) + 20 : 0) +
                      (pgInputType() === 'password' && pgShowPasswordToggle() ? 40 : 0) +
                      'px'
                    "
                  />
                  @if (pgSuffixIcon()) {
                  <div class="av-input-suffix">
                    <app-icon [type]="pgSuffixIcon()!"></app-icon>
                  </div>
                  }
                </div>
                } @else {
                <av-input
                  [(value)]="pgValue"
                  [label]="pgLabel()"
                  [placeholder]="pgPlaceholder()"
                  [type]="pgInputType()"
                  [size]="appliedSize()"
                  [variant]="pgVariant()"
                  [status]="pgStatus()"
                  [hint]="pgHint()"
                  [errorMessage]="pgErrorMessage()"
                  [width]="pgSize() === 'custom' ? pgWidth() : null"
                  [height]="pgSize() === 'custom' ? pgHeight() : null"
                  [radius]="pgSize() === 'custom' ? pgRadius() : null"
                  [visible]="pgVisible()"
                  [block]="pgBlock()"
                  [shape]="pgShape()"
                  [disabled]="pgDisabled()"
                  [showPasswordToggle]="pgShowPasswordToggle()"
                  [prefixIcon]="pgPrefixIcon()"
                  [prefixIconSize]="pgPrefixIconSize()"
                  [prefixIconColor]="pgPrefixIconColor()"
                  [suffixIcon]="pgSuffixIcon()"
                  [suffixIconSize]="pgSuffixIconSize()"
                  [suffixIconColor]="pgSuffixIconColor()"
                ></av-input>
                } }
              </div>
            </div>

            <div style="margin-top: 24px">
              <av-help-copy-container
                title="–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥"
                [content]="pgGeneratedCode()"
                bgColor="#1e293b"
              ></av-help-copy-container>
            </div>
          </nz-card>
        </div>
      </div>
    </div>
  </section>

  <!-- Message Display -->
  @if (message()) {
  <div class="message-display">
    {{ message() }}
  </div>
  }
</div>

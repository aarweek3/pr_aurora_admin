<av-showcase [config]="showcaseConfig" [generatedCodeInput]="codeForShowcase()">
  <!-- TAB: PLAYGROUND (CONTROLS) -->
  <div showcase-tabs>
    <nz-tabset [nzAnimated]="false">
      <nz-tab nzTitle="üéÆ Playground">
        <div class="demo-form">
          <h3 class="form-section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>

          <div class="control-group">
            <label class="control-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
            <input nz-input [(ngModel)]="dialogConfig().title" (ngModelChange)="updateConfig('title', $event)" />
          </div>

          <div class="control-group">
            <label class="control-label">–°–æ–æ–±—â–µ–Ω–∏–µ:</label>
            <textarea
              nz-input
              rows="3"
              [(ngModel)]="dialogConfig().message"
              (ngModelChange)="updateConfig('message', $event)"
            ></textarea>
          </div>

          <h3 class="form-section-title" style="margin-top: 24px">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∫–æ–Ω–∫–∏</h3>
          <av-icon-settings-control
            [(value)]="iconConfig"
            [presets]="iconPresets"
            (valueChange)="onIconConfigChange($event)"
          ></av-icon-settings-control>

          <h3 class="form-section-title" style="margin-top: 24px">–ö–Ω–æ–ø–∫–∏ –¥–∏–∞–ª–æ–≥–∞</h3>

          <div class="control-group">
            <label class="control-label">–¢–µ–∫—Å—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å":</label>
            <input
              nz-input
              [(ngModel)]="dialogConfig().confirmText"
              (ngModelChange)="updateConfig('confirmText', $event)"
            />
          </div>

          <div class="control-group">
            <label class="control-label">–¢–∏–ø –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</label>
            <nz-radio-group
              [(ngModel)]="dialogConfig().confirmType"
              (ngModelChange)="updateConfig('confirmType', $event)"
            >
              <label nz-radio nzValue="primary">Primary</label>
              <label nz-radio nzValue="default">Default</label>
              <label nz-radio nzValue="danger">Danger</label>
            </nz-radio-group>
          </div>

          <div class="control-group checkbox-group">
            <label
              nz-checkbox
              [(ngModel)]="dialogConfig().showCancelButton"
              (ngModelChange)="updateConfig('showCancelButton', $event)"
            >
              –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "–û—Ç–º–µ–Ω–∞"
            </label>
            @if(dialogConfig().showCancelButton) {
            <input
              nz-input
              size="small"
              [(ngModel)]="dialogConfig().cancelText"
              (ngModelChange)="updateConfig('cancelText', $event)"
              placeholder="–¢–µ–∫—Å—Ç –æ—Ç–º–µ–Ω—ã"
            />
            }
          </div>

          <h3 class="form-section-title" style="margin-top: 24px">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–∫–Ω–∞</h3>

          <div class="control-group">
            <label class="control-label">–®–∏—Ä–∏–Ω–∞:</label>
            <input nz-input [(ngModel)]="dialogConfig().width" (ngModelChange)="updateConfig('width', $event)" />
          </div>

          <div class="control-group checkbox-group">
            <label nz-checkbox [(ngModel)]="dialogConfig().centered" (ngModelChange)="updateConfig('centered', $event)">
              –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å (Centered)
            </label>
            <label
              nz-checkbox
              [(ngModel)]="dialogConfig().draggable"
              (ngModelChange)="updateConfig('draggable', $event)"
            >
              –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–æ–µ (Draggable)
            </label>
            <label
              nz-checkbox
              [(ngModel)]="dialogConfig().closeOnBackdrop"
              (ngModelChange)="updateConfig('closeOnBackdrop', $event)"
            >
              –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
            </label>
            <label
              nz-checkbox
              [(ngModel)]="dialogConfig().closeOnEsc"
              (ngModelChange)="updateConfig('closeOnEsc', $event)"
            >
              –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ ESC
            </label>
            <label
              nz-checkbox
              [(ngModel)]="dialogConfig().showCloseButton"
              (ngModelChange)="updateConfig('showCloseButton', $event)"
            >
              –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ä–µ—Å—Ç–∏–∫ (X)
            </label>
          </div>
        </div>
      </nz-tab>

      <!-- 2. –ö–æ–¥ (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π) -->
      <nz-tab nzTitle="üíª –ö–æ–¥">
        <div class="demo-form">
          <div style="margin-bottom: 32px">
            <h4>üöÄ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–∏–º–µ—Ä</h4>
            <p style="color: #666; margin-bottom: 16px">
              –ö–æ–¥ –Ω–∏–∂–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ Playground.
            </p>

            <div class="code-block-container">
              <div class="code-header">
                <span>HTML Template (–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ)</span>
                <button class="copy-btn" (click)="copyToClipboard(generatedCode().html)">üìã</button>
              </div>
              <pre><code>{{ generatedCode().html }}</code></pre>
            </div>

            <div class="code-block-container" style="margin-top: 24px">
              <div class="code-header">
                <span>TypeScript (ModalService)</span>
                <button class="copy-btn" (click)="copyToClipboard(generatedCode().typescript)">üìã</button>
              </div>
              <pre><code>{{ generatedCode().typescript }}</code></pre>
            </div>

            <div style="margin-top: 24px">
              <button av-button avType="primary" (click)="copyCode()">
                <av-icon type="actions/av_copy" [size]="16"></av-icon>
                –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –∫–æ–¥
              </button>
            </div>
          </div>

          <hr style="border: 0; border-top: 1px solid #eee; margin: 32px 0" />

          <!-- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ -->
          <div *ngFor="let example of documentationConfig.codeExamples; let i = index" style="margin-bottom: 32px">
            <h4>{{ example.title }}</h4>
            <p *ngIf="example.description" style="color: #666; margin-bottom: 16px">{{ example.description }}</p>

            <div class="code-block-container">
              <div class="code-header">
                <span>HTML</span>
                <button class="copy-btn" (click)="copyToClipboard(example.htmlCode)">üìã</button>
              </div>
              <pre><code>{{ example.htmlCode }}</code></pre>
            </div>

            <div class="code-block-container" style="margin-top: 16px" *ngIf="example.tsCode">
              <div class="code-header">
                <span>TypeScript</span>
                <button class="copy-btn" (click)="copyToClipboard(example.tsCode)">üìã</button>
              </div>
              <pre><code>{{ example.tsCode }}</code></pre>
            </div>
          </div>
        </div>
      </nz-tab>

      <nz-tab nzTitle="üìö –ü—Ä–∏–º–µ—Ä—ã">
        <div class="demo-form">
          <h4>–ë—ã—Å—Ç—Ä—ã–µ —à–∞–±–ª–æ–Ω—ã:</h4>

          <div nz-row [nzGutter]="[16, 16]">
            <div nz-col [nzSpan]="24">
              <div class="example-item">
                <h4>–£—Å–ø–µ—à–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ</h4>
                <p>–î–∏–∞–ª–æ–≥ —Å –∑–µ–ª–µ–Ω–æ–π –≥–∞–ª–æ—á–∫–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π –û–ö.</p>
                <div class="example-buttons">
                  <button
                    nz-button
                    nzType="primary"
                    (click)="
                      updateConfig('title', '–£—Å–ø–µ—à–Ω–æ!');
                      updateIconConfig({ type: 'actions/av_check_mark', color: '#52c41a', size: 48 })
                    "
                  >
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>

            <div nz-col [nzSpan]="24">
              <div class="example-item">
                <h4>–û–ø–∞—Å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ</h4>
                <p>–ö—Ä–∞—Å–Ω–∞—è –∫–æ—Ä–∑–∏–Ω–∞, –∫–Ω–æ–ø–∫–∞ Danger, –∑–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
                <div class="example-buttons">
                  <button
                    nz-button
                    nzType="default"
                    nzDanger
                    (click)="
                      updateConfig('title', '–£–¥–∞–ª–∏—Ç—å?');
                      updateConfig('confirmType', 'danger');
                      updateIconConfig({ type: 'actions/av_trash', color: '#ff4d4f', size: 48 })
                    "
                  >
                    –ü—Ä–∏–º–µ–Ω–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>

          <h4 style="margin-top: 24px">–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞:</h4>
          <div *ngFor="let example of documentationConfig.usageExamples; let i = index" style="margin-bottom: 24px">
            <h5>{{ example.title }}</h5>
            <p style="color: #666; margin-bottom: 16px">{{ example.description }}</p>

            <div class="code-block-container">
              <div class="code-header">
                <span>HTML</span>
                <button class="copy-btn" (click)="copyToClipboard(example.htmlCode)">üìã</button>
              </div>
              <pre><code>{{ example.htmlCode }}</code></pre>
            </div>

            <div class="code-block-container" style="margin-top: 16px" *ngIf="example.tsCode">
              <div class="code-header">
                <span>TypeScript</span>
                <button class="copy-btn" (click)="copyToClipboard(example.tsCode)">üìã</button>
              </div>
              <pre><code>{{ example.tsCode }}</code></pre>
            </div>
          </div>
        </div>
      </nz-tab>

      <nz-tab nzTitle="üìñ API">
        <div class="demo-form">
          <p>API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è" –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.</p>
        </div>
      </nz-tab>
    </nz-tabset>
  </div>

  <!-- RESULT: LIVE PREVIEW & DESCRIPTION -->
  <div showcase-result>
    <div class="preview-container">
      <button class="main-action-btn" av-button avType="primary" avSize="large" (click)="openDialog()">
        –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥
      </button>

      <div class="dialog-info">
        <h4>üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:</h4>
        <ul>
          <li><strong>Title:</strong> {{ dialogConfig().title }}</li>
          <li><strong>Icon:</strong> {{ iconConfig().type }} ({{ iconConfig().color }})</li>
          <li><strong>Width:</strong> {{ dialogConfig().width }}</li>
          <li><strong>Buttons:</strong> {{ dialogConfig().showCancelButton ? 'Cancel + Confirm' : 'Confirm only' }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- RESULT: DESCRIPTION (BOTTOM) -->
  <div showcase-description>
    <div class="config-summary">
      <div class="config-grid">
        <div class="config-item">
          <span class="config-label">Title</span>
          <span class="config-value">{{ dialogConfig().title }}</span>
        </div>
        <div class="config-item">
          <span class="config-label">Width</span>
          <span class="config-value">{{ dialogConfig().width }}</span>
        </div>
        <div class="config-item">
          <span class="config-label">Centered</span>
          <span class="config-value">{{ dialogConfig().centered }}</span>
        </div>
        <div class="config-item">
          <span class="config-label">Confirm Type</span>
          <span class="config-value">{{ dialogConfig().confirmType }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Showcase Examples -->
  <div showcase-examples>
    <div class="demo-form">
      <h3 style="margin-bottom: 24px">üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AvModal</h3>

      <!-- Example 1: Success Dialog -->
      <div class="example-block" style="margin-bottom: 32px">
        <h4>1. –î–∏–∞–ª–æ–≥ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</h4>
        <p>–ü—Ä–æ—Å—Ç–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∑–µ–ª–µ–Ω–æ–π –≥–∞–ª–æ—á–∫–æ–π –∏ –æ–¥–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>

        <div
          style="padding: 24px; border: 1px solid #f0f0f0; border-radius: 6px; margin-bottom: 16px; background: white"
        >
          <button av-button avType="primary" (click)="example1Open.set(true)">–ü–æ–∫–∞–∑–∞—Ç—å Success Dialog</button>
        </div>

        <div class="code-block-container">
          <div class="code-header">
            <span>HTML Template</span>
            <button class="copy-btn" (click)="copyToClipboard(getSuccessDialogCode().html)">üìã</button>
          </div>
          <pre><code>{{ getSuccessDialogCode().html }}</code></pre>
        </div>

        <div class="code-block-container" style="margin-top: 16px">
          <div class="code-header">
            <span>TypeScript</span>
            <button class="copy-btn" (click)="copyToClipboard(getSuccessDialogCode().ts)">üìã</button>
          </div>
          <pre><code>{{ getSuccessDialogCode().ts }}</code></pre>
        </div>
      </div>

      <!-- Example 2: Warning Dialog -->
      <div class="example-block" style="margin-bottom: 32px">
        <h4>2. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–π –¥–∏–∞–ª–æ–≥</h4>
        <p>–î–∏–∞–ª–æ–≥ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏ (–û—Ç–º–µ–Ω–∞ –∏ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å).</p>

        <div
          style="padding: 24px; border: 1px solid #f0f0f0; border-radius: 6px; margin-bottom: 16px; background: white"
        >
          <button av-button avType="default" (click)="example2Open.set(true)">–ü–æ–∫–∞–∑–∞—Ç—å Warning Dialog</button>
        </div>

        <div class="code-block-container">
          <div class="code-header">
            <span>HTML Template</span>
            <button class="copy-btn" (click)="copyToClipboard(getWarningDialogCode().html)">üìã</button>
          </div>
          <pre><code>{{ getWarningDialogCode().html }}</code></pre>
        </div>

        <div class="code-block-container" style="margin-top: 16px">
          <div class="code-header">
            <span>TypeScript</span>
            <button class="copy-btn" (click)="copyToClipboard(getWarningDialogCode().ts)">üìã</button>
          </div>
          <pre><code>{{ getWarningDialogCode().ts }}</code></pre>
        </div>
      </div>

      <!-- Example 3: Danger Dialog -->
      <div class="example-block" style="margin-bottom: 32px">
        <h4>3. –û–ø–∞—Å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–£–¥–∞–ª–µ–Ω–∏–µ)</h4>
        <p>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –¥–∏–∞–ª–æ–≥ —Å –∫—Ä–∞—Å–Ω–æ–π –∏–∫–æ–Ω–∫–æ–π –∏ –∫–Ω–æ–ø–∫–æ–π Danger.</p>

        <div
          style="padding: 24px; border: 1px solid #f0f0f0; border-radius: 6px; margin-bottom: 16px; background: white"
        >
          <button av-button avType="danger" (click)="example3Open.set(true)">–ü–æ–∫–∞–∑–∞—Ç—å Delete Dialog</button>
        </div>

        <div class="code-block-container">
          <div class="code-header">
            <span>HTML Template</span>
            <button class="copy-btn" (click)="copyToClipboard(getDangerDialogCode().html)">üìã</button>
          </div>
          <pre><code>{{ getDangerDialogCode().html }}</code></pre>
        </div>

        <div class="code-block-container" style="margin-top: 16px">
          <div class="code-header">
            <span>TypeScript</span>
            <button class="copy-btn" (click)="copyToClipboard(getDangerDialogCode().ts)">üìã</button>
          </div>
          <pre><code>{{ getDangerDialogCode().ts }}</code></pre>
        </div>
      </div>
    </div>
  </div>

  <!-- BOTTOM: Documentation -->
  <div showcase-docs>
    <control-documentation [config]="documentationConfig"></control-documentation>
  </div>
</av-showcase>

<!-- ACTIVE MODAL COMPONENT (Triggered by isDialogOpen) -->
<av-modal
  [(isOpen)]="isDialogOpen"
  [centered]="dialogConfig().centered"
  [avWidth]="dialogConfig().width"
  [showBackdrop]="dialogConfig().closeOnBackdrop"
  [closeOnBackdrop]="dialogConfig().closeOnBackdrop"
  [closeOnEsc]="dialogConfig().closeOnEsc"
  [showCloseButton]="dialogConfig().showCloseButton"
  [draggable]="dialogConfig().draggable"
>
  <div modal-body>
    <div style="text-align: center; padding: 24px">
      @if(iconConfig().type) {
      <av-icon
        [type]="iconConfig().type!"
        [size]="iconConfig().size"
        [color]="iconConfig().color"
        [style.transform]="'rotate(' + iconConfig().rotation + 'deg) scale(' + iconConfig().scale + ')'"
        [style.opacity]="iconConfig().opacity"
      ></av-icon>
      }
      <h3 style="margin: 16px 0 8px; font-weight: 600">{{ dialogConfig().title }}</h3>
      <p style="color: #8c8c8c; margin: 0">{{ dialogConfig().message }}</p>
    </div>
  </div>
  <div modal-footer style="text-align: center; justify-content: center; gap: 8px">
    @if(dialogConfig().showCancelButton) {
    <button av-button avType="default" (click)="onCancel()">
      {{ dialogConfig().cancelText }}
    </button>
    }
    <button av-button [avType]="dialogConfig().confirmType" (click)="onConfirm()">
      {{ dialogConfig().confirmText }}
    </button>
  </div>
</av-modal>

<!-- Example Modals -->
<!-- Example 1: Success Modal -->
<av-modal [(isOpen)]="example1Open" [centered]="true" [avWidth]="'400px'" [showCloseButton]="true">
  <div modal-body>
    <div style="text-align: center; padding: 24px">
      <av-icon type="actions/av_check_mark" [size]="48" color="#52c41a"></av-icon>
      <h3 style="margin: 16px 0 8px; font-weight: 600">–£—Å–ø–µ—à–Ω–æ!</h3>
      <p style="color: #8c8c8c; margin: 0">–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.</p>
    </div>
  </div>
  <div modal-footer style="justify-content: center">
    <button av-button avType="primary" (click)="example1Open.set(false)">OK</button>
  </div>
</av-modal>

<!-- Example 2: Warning Modal -->
<av-modal [(isOpen)]="example2Open" [centered]="true" [avWidth]="'450px'">
  <div modal-body>
    <div style="text-align: center; padding: 24px">
      <av-icon type="system/av_warning" [size]="48" color="#faad14"></av-icon>
      <h3 style="margin: 16px 0 8px; font-weight: 600">–í–Ω–∏–º–∞–Ω–∏–µ!</h3>
      <p style="color: #8c8c8c; margin: 0">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?</p>
    </div>
  </div>
  <div modal-footer style="justify-content: center; gap: 8px">
    <button av-button avType="default" (click)="example2Open.set(false)">–û—Ç–º–µ–Ω–∞</button>
    <button av-button avType="primary" (click)="example2Open.set(false)">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
  </div>
</av-modal>

<!-- Example 3: Danger Modal -->
<av-modal [(isOpen)]="example3Open" [centered]="true" [avWidth]="'450px'" [closeOnBackdrop]="false">
  <div modal-body>
    <div style="text-align: center; padding: 24px">
      <av-icon type="actions/av_trash" [size]="48" color="#ff4d4f"></av-icon>
      <h3 style="margin: 16px 0 8px; font-weight: 600">–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?</h3>
      <p style="color: #8c8c8c; margin: 0">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
    </div>
  </div>
  <div modal-footer style="justify-content: center; gap: 8px">
    <button av-button avType="default" (click)="example3Open.set(false)">–û—Ç–º–µ–Ω–∞</button>
    <button av-button avType="danger" (click)="example3Open.set(false)">–£–¥–∞–ª–∏—Ç—å</button>
  </div>
</av-modal>

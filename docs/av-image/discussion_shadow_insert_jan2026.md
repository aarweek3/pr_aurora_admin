# История обсуждения: Инструмент "Тень" и Логика Вставки (январь 2026)

## 1. Инструмент "Тень" (Shadow Tool)

Мы обсудили и утвердили концепцию инструмента для добавления тени к изображению.

### Основные параметры (ТЗ)

- **Включение/Выключение**: Переключатель.
- **Смещение X / Y**: Слайдеры (-100..+100 px).
- **Размытие (Blur)**: Слайдер (0..50 px).
- **Прозрачность**: Слайдер (0..100%).
- **Цвет**: Выбор цвета.

### Техническое решение

Мы выбрали подход "Canvas Burning" (Запекание в Canvas), а не CSS `box-shadow`:

- Тень рисуется на Canvas и становится частью итогового файла изображения.
- Это обеспечивает совместимость (тень видна везде, включая email) и единство с другими инструментами (Рамка, Watermark).
- Итоговый холст расширяется, чтобы вместить тень (аналогично рамке "Снаружи").

## 2. Логика кнопки "Вставить" (Insert Logic)

Мы проанализировали текущую реализацию в `image-modal.component.ts` и решили повторить её в новом JS-плагине.

### Workflow (Процесс):

1.  Пользователь нажимает **"Вставить в текст"**.
2.  Открывается промежуточное окно **"Параметры сохранения" (Export Modal)**.
3.  Пользователь выбирает:
    - **Формат**: JPG, PNG, WEBP.
    - **Качество**: 10..100% (для JPG/WEBP).
    - **Имя файла**.
4.  Пользователь нажимает **"Подтвердить"**.
5.  Изображение загружается на сервер.
6.  В редактор вставляется HTML-код.

### HTML-разметка для вставки

Стандартный вариант, который мы будем генерировать:

```html
<img src="https://path-to-image.jpg" width="..." height="..." alt="..." />
```

- Если выбрано выравнивание, добавляются стили (`style="float:left"`, `margin`, или классы).
- Если есть подпись, оборачиваем в `<figure>`.

---

_Файл сохранен для возвращения к задаче позже._
